(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Yo(n,e){const t=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)t[s[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const od="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ad=Yo(od);function Al(n){return!!n||n===""}function Zo(n){if(X(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=Le(s)?ud(s):Zo(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(Le(n))return n;if(Te(n))return n}}const cd=/;(?![^(]*\))/g,ld=/:(.+)/;function ud(n){const e={};return n.split(cd).forEach(t=>{if(t){const s=t.split(ld);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function wr(n){let e="";if(Le(n))e=n;else if(X(n))for(let t=0;t<n.length;t++){const s=wr(n[t]);s&&(e+=s+" ")}else if(Te(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const oc=n=>Le(n)?n:n==null?"":X(n)||Te(n)&&(n.toString===Il||!se(n.toString))?JSON.stringify(n,xl,2):String(n),xl=(n,e)=>e&&e.__v_isRef?xl(n,e.value):hs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r])=>(t[`${s} =>`]=r,t),{})}:El(e)?{[`Set(${e.size})`]:[...e.values()]}:Te(e)&&!X(e)&&!Nl(e)?String(e):e,me={},us=[],At=()=>{},hd=()=>!1,dd=/^on[^a-z]/,ki=n=>dd.test(n),Xo=n=>n.startsWith("onUpdate:"),Ve=Object.assign,Qo=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},fd=Object.prototype.hasOwnProperty,ue=(n,e)=>fd.call(n,e),X=Array.isArray,hs=n=>Ai(n)==="[object Map]",El=n=>Ai(n)==="[object Set]",se=n=>typeof n=="function",Le=n=>typeof n=="string",ea=n=>typeof n=="symbol",Te=n=>n!==null&&typeof n=="object",Ol=n=>Te(n)&&se(n.then)&&se(n.catch),Il=Object.prototype.toString,Ai=n=>Il.call(n),pd=n=>Ai(n).slice(8,-1),Nl=n=>Ai(n)==="[object Object]",ta=n=>Le(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Gr=Yo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xi=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},md=/-(\w)/g,gs=xi(n=>n.replace(md,(e,t)=>t?t.toUpperCase():"")),gd=/\B([A-Z])/g,xs=xi(n=>n.replace(gd,"-$1").toLowerCase()),Pl=xi(n=>n.charAt(0).toUpperCase()+n.slice(1)),no=xi(n=>n?`on${Pl(n)}`:""),Xs=(n,e)=>!Object.is(n,e),Kr=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},ei=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},ti=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let ac;const _d=()=>ac||(ac=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let jt;class Rl{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}run(e){if(this.active){const t=jt;try{return jt=this,e()}finally{jt=t}}}on(){jt=this}off(){jt=this.parent}stop(e){if(this.active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function Dl(n){return new Rl(n)}function yd(n,e=jt){e&&e.active&&e.effects.push(n)}const na=n=>{const e=new Set(n);return e.w=0,e.n=0,e},Ml=n=>(n.w&bn)>0,Fl=n=>(n.n&bn)>0,vd=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=bn},wd=n=>{const{deps:e}=n;if(e.length){let t=0;for(let s=0;s<e.length;s++){const r=e[s];Ml(r)&&!Fl(r)?r.delete(n):e[t++]=r,r.w&=~bn,r.n&=~bn}e.length=t}},mo=new WeakMap;let qs=0,bn=1;const go=30;let Tt;const Vn=Symbol(""),_o=Symbol("");class sa{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,yd(this,s)}run(){if(!this.active)return this.fn();let e=Tt,t=gn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Tt,Tt=this,gn=!0,bn=1<<++qs,qs<=go?vd(this):cc(this),this.fn()}finally{qs<=go&&wd(this),bn=1<<--qs,Tt=this.parent,gn=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Tt===this?this.deferStop=!0:this.active&&(cc(this),this.onStop&&this.onStop(),this.active=!1)}}function cc(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let gn=!0;const jl=[];function Es(){jl.push(gn),gn=!1}function Os(){const n=jl.pop();gn=n===void 0?!0:n}function lt(n,e,t){if(gn&&Tt){let s=mo.get(n);s||mo.set(n,s=new Map);let r=s.get(t);r||s.set(t,r=na()),Ll(r)}}function Ll(n,e){let t=!1;qs<=go?Fl(n)||(n.n|=bn,t=!Ml(n)):t=!n.has(Tt),t&&(n.add(Tt),Tt.deps.push(n))}function Xt(n,e,t,s,r,i){const o=mo.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&X(n))o.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":X(n)?ta(t)&&a.push(o.get("length")):(a.push(o.get(Vn)),hs(n)&&a.push(o.get(_o)));break;case"delete":X(n)||(a.push(o.get(Vn)),hs(n)&&a.push(o.get(_o)));break;case"set":hs(n)&&a.push(o.get(Vn));break}if(a.length===1)a[0]&&yo(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);yo(na(c))}}function yo(n,e){const t=X(n)?n:[...n];for(const s of t)s.computed&&lc(s);for(const s of t)s.computed||lc(s)}function lc(n,e){(n!==Tt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const bd=Yo("__proto__,__v_isRef,__isVue"),$l=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ea)),Td=ra(),Cd=ra(!1,!0),Sd=ra(!0),uc=kd();function kd(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const s=de(this);for(let i=0,o=this.length;i<o;i++)lt(s,"get",i+"");const r=s[e](...t);return r===-1||r===!1?s[e](...t.map(de)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Es();const s=de(this)[e].apply(this,t);return Os(),s}}),n}function ra(n=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(n?e?Ud:Wl:e?Bl:ql).get(s))return s;const o=X(s);if(!n&&o&&ue(uc,r))return Reflect.get(uc,r,i);const a=Reflect.get(s,r,i);return(ea(r)?$l.has(r):bd(r))||(n||lt(s,"get",r),e)?a:Oe(a)?o&&ta(r)?a:a.value:Te(a)?n?zl(a):Oi(a):a}}const Ad=Vl(),xd=Vl(!0);function Vl(n=!1){return function(t,s,r,i){let o=t[s];if(_s(o)&&Oe(o)&&!Oe(r))return!1;if(!n&&(!ni(r)&&!_s(r)&&(o=de(o),r=de(r)),!X(t)&&Oe(o)&&!Oe(r)))return o.value=r,!0;const a=X(t)&&ta(s)?Number(s)<t.length:ue(t,s),c=Reflect.set(t,s,r,i);return t===de(i)&&(a?Xs(r,o)&&Xt(t,"set",s,r):Xt(t,"add",s,r)),c}}function Ed(n,e){const t=ue(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&t&&Xt(n,"delete",e,void 0),s}function Od(n,e){const t=Reflect.has(n,e);return(!ea(e)||!$l.has(e))&&lt(n,"has",e),t}function Id(n){return lt(n,"iterate",X(n)?"length":Vn),Reflect.ownKeys(n)}const Ul={get:Td,set:Ad,deleteProperty:Ed,has:Od,ownKeys:Id},Nd={get:Sd,set(n,e){return!0},deleteProperty(n,e){return!0}},Pd=Ve({},Ul,{get:Cd,set:xd}),ia=n=>n,Ei=n=>Reflect.getPrototypeOf(n);function Dr(n,e,t=!1,s=!1){n=n.__v_raw;const r=de(n),i=de(e);t||(e!==i&&lt(r,"get",e),lt(r,"get",i));const{has:o}=Ei(r),a=s?ia:t?ca:Qs;if(o.call(r,e))return a(n.get(e));if(o.call(r,i))return a(n.get(i));n!==r&&n.get(e)}function Mr(n,e=!1){const t=this.__v_raw,s=de(t),r=de(n);return e||(n!==r&&lt(s,"has",n),lt(s,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function Fr(n,e=!1){return n=n.__v_raw,!e&&lt(de(n),"iterate",Vn),Reflect.get(n,"size",n)}function hc(n){n=de(n);const e=de(this);return Ei(e).has.call(e,n)||(e.add(n),Xt(e,"add",n,n)),this}function dc(n,e){e=de(e);const t=de(this),{has:s,get:r}=Ei(t);let i=s.call(t,n);i||(n=de(n),i=s.call(t,n));const o=r.call(t,n);return t.set(n,e),i?Xs(e,o)&&Xt(t,"set",n,e):Xt(t,"add",n,e),this}function fc(n){const e=de(this),{has:t,get:s}=Ei(e);let r=t.call(e,n);r||(n=de(n),r=t.call(e,n)),s&&s.call(e,n);const i=e.delete(n);return r&&Xt(e,"delete",n,void 0),i}function pc(){const n=de(this),e=n.size!==0,t=n.clear();return e&&Xt(n,"clear",void 0,void 0),t}function jr(n,e){return function(s,r){const i=this,o=i.__v_raw,a=de(o),c=e?ia:n?ca:Qs;return!n&&lt(a,"iterate",Vn),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function Lr(n,e,t){return function(...s){const r=this.__v_raw,i=de(r),o=hs(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=t?ia:e?ca:Qs;return!e&&lt(i,"iterate",c?_o:Vn),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function rn(n){return function(...e){return n==="delete"?!1:this}}function Rd(){const n={get(i){return Dr(this,i)},get size(){return Fr(this)},has:Mr,add:hc,set:dc,delete:fc,clear:pc,forEach:jr(!1,!1)},e={get(i){return Dr(this,i,!1,!0)},get size(){return Fr(this)},has:Mr,add:hc,set:dc,delete:fc,clear:pc,forEach:jr(!1,!0)},t={get(i){return Dr(this,i,!0)},get size(){return Fr(this,!0)},has(i){return Mr.call(this,i,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:jr(!0,!1)},s={get(i){return Dr(this,i,!0,!0)},get size(){return Fr(this,!0)},has(i){return Mr.call(this,i,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:jr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Lr(i,!1,!1),t[i]=Lr(i,!0,!1),e[i]=Lr(i,!1,!0),s[i]=Lr(i,!0,!0)}),[n,t,e,s]}const[Dd,Md,Fd,jd]=Rd();function oa(n,e){const t=e?n?jd:Fd:n?Md:Dd;return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(ue(t,r)&&r in s?t:s,r,i)}const Ld={get:oa(!1,!1)},$d={get:oa(!1,!0)},Vd={get:oa(!0,!1)},ql=new WeakMap,Bl=new WeakMap,Wl=new WeakMap,Ud=new WeakMap;function qd(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bd(n){return n.__v_skip||!Object.isExtensible(n)?0:qd(pd(n))}function Oi(n){return _s(n)?n:aa(n,!1,Ul,Ld,ql)}function Wd(n){return aa(n,!1,Pd,$d,Bl)}function zl(n){return aa(n,!0,Nd,Vd,Wl)}function aa(n,e,t,s,r){if(!Te(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=Bd(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function _n(n){return _s(n)?_n(n.__v_raw):!!(n&&n.__v_isReactive)}function _s(n){return!!(n&&n.__v_isReadonly)}function ni(n){return!!(n&&n.__v_isShallow)}function Hl(n){return _n(n)||_s(n)}function de(n){const e=n&&n.__v_raw;return e?de(e):n}function ys(n){return ei(n,"__v_skip",!0),n}const Qs=n=>Te(n)?Oi(n):n,ca=n=>Te(n)?zl(n):n;function Gl(n){gn&&Tt&&(n=de(n),Ll(n.dep||(n.dep=na())))}function Kl(n,e){n=de(n),n.dep&&yo(n.dep)}function Oe(n){return!!(n&&n.__v_isRef===!0)}function ct(n){return zd(n,!1)}function zd(n,e){return Oe(n)?n:new Hd(n,e)}class Hd{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:de(e),this._value=t?e:Qs(e)}get value(){return Gl(this),this._value}set value(e){const t=this.__v_isShallow||ni(e)||_s(e);e=t?e:de(e),Xs(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Qs(e),Kl(this))}}function la(n){return Oe(n)?n.value:n}const Gd={get:(n,e,t)=>la(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return Oe(r)&&!Oe(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function Jl(n){return _n(n)?n:new Proxy(n,Gd)}function Kd(n){const e=X(n)?new Array(n.length):{};for(const t in n)e[t]=Yd(n,t);return e}class Jd{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Yd(n,e,t){const s=n[e];return Oe(s)?s:new Jd(n,e,t)}var Yl;class Zd{constructor(e,t,s,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Yl]=!1,this._dirty=!0,this.effect=new sa(e,()=>{this._dirty||(this._dirty=!0,Kl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=de(this);return Gl(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Yl="__v_isReadonly";function Xd(n,e,t=!1){let s,r;const i=se(n);return i?(s=n,r=At):(s=n.get,r=n.set),new Zd(s,r,i||!r,t)}function yn(n,e,t,s){let r;try{r=s?n(...s):n()}catch(i){Ii(i,e,t)}return r}function mt(n,e,t,s){if(se(n)){const i=yn(n,e,t,s);return i&&Ol(i)&&i.catch(o=>{Ii(o,e,t)}),i}const r=[];for(let i=0;i<n.length;i++)r.push(mt(n[i],e,t,s));return r}function Ii(n,e,t,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=t;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](n,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){yn(c,null,10,[n,o,a]);return}}Qd(n,t,r,s)}function Qd(n,e,t,s=!0){console.error(n)}let er=!1,vo=!1;const Be=[];let Vt=0;const ds=[];let Gt=null,Dn=0;const Zl=Promise.resolve();let ua=null;function Xl(n){const e=ua||Zl;return n?e.then(this?n.bind(this):n):e}function ef(n){let e=Vt+1,t=Be.length;for(;e<t;){const s=e+t>>>1;tr(Be[s])<n?e=s+1:t=s}return e}function ha(n){(!Be.length||!Be.includes(n,er&&n.allowRecurse?Vt+1:Vt))&&(n.id==null?Be.push(n):Be.splice(ef(n.id),0,n),Ql())}function Ql(){!er&&!vo&&(vo=!0,ua=Zl.then(tu))}function tf(n){const e=Be.indexOf(n);e>Vt&&Be.splice(e,1)}function nf(n){X(n)?ds.push(...n):(!Gt||!Gt.includes(n,n.allowRecurse?Dn+1:Dn))&&ds.push(n),Ql()}function mc(n,e=er?Vt+1:0){for(;e<Be.length;e++){const t=Be[e];t&&t.pre&&(Be.splice(e,1),e--,t())}}function eu(n){if(ds.length){const e=[...new Set(ds)];if(ds.length=0,Gt){Gt.push(...e);return}for(Gt=e,Gt.sort((t,s)=>tr(t)-tr(s)),Dn=0;Dn<Gt.length;Dn++)Gt[Dn]();Gt=null,Dn=0}}const tr=n=>n.id==null?1/0:n.id,sf=(n,e)=>{const t=tr(n)-tr(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function tu(n){vo=!1,er=!0,Be.sort(sf);const e=At;try{for(Vt=0;Vt<Be.length;Vt++){const t=Be[Vt];t&&t.active!==!1&&yn(t,null,14)}}finally{Vt=0,Be.length=0,eu(),er=!1,ua=null,(Be.length||ds.length)&&tu()}}function rf(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||me;let r=t;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||me;d&&(r=t.map(f=>f.trim())),h&&(r=t.map(ti))}let a,c=s[a=no(e)]||s[a=no(gs(e))];!c&&i&&(c=s[a=no(xs(e))]),c&&mt(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,mt(l,n,6,r)}}function nu(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!se(n)){const c=l=>{const u=nu(l,e,!0);u&&(a=!0,Ve(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Te(n)&&s.set(n,null),null):(X(i)?i.forEach(c=>o[c]=null):Ve(o,i),Te(n)&&s.set(n,o),o)}function Ni(n,e){return!n||!ki(e)?!1:(e=e.slice(2).replace(/Once$/,""),ue(n,e[0].toLowerCase()+e.slice(1))||ue(n,xs(e))||ue(n,e))}let Ct=null,Pi=null;function si(n){const e=Ct;return Ct=n,Pi=n&&n.type.__scopeId||null,e}function su(n){Pi=n}function ru(){Pi=null}function da(n,e=Ct,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Ac(-1);const i=si(e);let o;try{o=n(...r)}finally{si(i),s._d&&Ac(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function so(n){const{type:e,vnode:t,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=n;let g,y;const k=si(n);try{if(t.shapeFlag&4){const E=r||s;g=$t(u.call(E,E,h,i,f,d,p)),y=c}else{const E=e;g=$t(E.length>1?E(i,{attrs:c,slots:a,emit:l}):E(i,null)),y=e.props?c:of(c)}}catch(E){Hs.length=0,Ii(E,n,1),g=We(xt)}let O=g;if(y&&m!==!1){const E=Object.keys(y),{shapeFlag:_}=O;E.length&&_&7&&(o&&E.some(Xo)&&(y=af(y,o)),O=Tn(O,y))}return t.dirs&&(O=Tn(O),O.dirs=O.dirs?O.dirs.concat(t.dirs):t.dirs),t.transition&&(O.transition=t.transition),g=O,si(k),g}const of=n=>{let e;for(const t in n)(t==="class"||t==="style"||ki(t))&&((e||(e={}))[t]=n[t]);return e},af=(n,e)=>{const t={};for(const s in n)(!Xo(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function cf(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?gc(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!Ni(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?gc(s,o,l):!0:!!o;return!1}function gc(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Ni(t,i))return!0}return!1}function lf({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const uf=n=>n.__isSuspense;function hf(n,e){e&&e.pendingBranch?X(n)?e.effects.push(...n):e.effects.push(n):nf(n)}function df(n,e){if($e){let t=$e.provides;const s=$e.parent&&$e.parent.provides;s===t&&(t=$e.provides=Object.create(s)),t[n]=e}}function Jr(n,e,t=!1){const s=$e||Ct;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&se(e)?e.call(s.proxy):e}}const _c={};function zs(n,e,t){return iu(n,e,t)}function iu(n,e,{immediate:t,deep:s,flush:r,onTrack:i,onTrigger:o}=me){const a=$e;let c,l=!1,u=!1;if(Oe(n)?(c=()=>n.value,l=ni(n)):_n(n)?(c=()=>n,s=!0):X(n)?(u=!0,l=n.some(y=>_n(y)||ni(y)),c=()=>n.map(y=>{if(Oe(y))return y.value;if(_n(y))return $n(y);if(se(y))return yn(y,a,2)})):se(n)?e?c=()=>yn(n,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),mt(n,a,3,[d])}:c=At,e&&s){const y=c;c=()=>$n(y())}let h,d=y=>{h=g.onStop=()=>{yn(y,a,4)}};if(sr)return d=At,e?t&&mt(e,a,3,[c(),u?[]:void 0,d]):c(),At;let f=u?[]:_c;const p=()=>{if(!!g.active)if(e){const y=g.run();(s||l||(u?y.some((k,O)=>Xs(k,f[O])):Xs(y,f)))&&(h&&h(),mt(e,a,3,[y,f===_c?void 0:f,d]),f=y)}else g.run()};p.allowRecurse=!!e;let m;r==="sync"?m=p:r==="post"?m=()=>et(p,a&&a.suspense):(p.pre=!0,a&&(p.id=a.uid),m=()=>ha(p));const g=new sa(c,m);return e?t?p():f=g.run():r==="post"?et(g.run.bind(g),a&&a.suspense):g.run(),()=>{g.stop(),a&&a.scope&&Qo(a.scope.effects,g)}}function ff(n,e,t){const s=this.proxy,r=Le(n)?n.includes(".")?ou(s,n):()=>s[n]:n.bind(s,s);let i;se(e)?i=e:(i=e.handler,t=e);const o=$e;vs(this);const a=iu(r,i.bind(s),t);return o?vs(o):Un(),a}function ou(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}function $n(n,e){if(!Te(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),Oe(n))$n(n.value,e);else if(X(n))for(let t=0;t<n.length;t++)$n(n[t],e);else if(El(n)||hs(n))n.forEach(t=>{$n(t,e)});else if(Nl(n))for(const t in n)$n(n[t],e);return n}function pf(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fa(()=>{n.isMounted=!0}),hu(()=>{n.isUnmounting=!0}),n}const ht=[Function,Array],mf={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ht,onEnter:ht,onAfterEnter:ht,onEnterCancelled:ht,onBeforeLeave:ht,onLeave:ht,onAfterLeave:ht,onLeaveCancelled:ht,onBeforeAppear:ht,onAppear:ht,onAfterAppear:ht,onAppearCancelled:ht},setup(n,{slots:e}){const t=wa(),s=pf();let r;return()=>{const i=e.default&&lu(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const m of i)if(m.type!==xt){o=m;break}}const a=de(n),{mode:c}=a;if(s.isLeaving)return ro(o);const l=yc(o);if(!l)return ro(o);const u=wo(l,a,s,t);bo(l,u);const h=t.subTree,d=h&&yc(h);let f=!1;const{getTransitionKey:p}=l.type;if(p){const m=p();r===void 0?r=m:m!==r&&(r=m,f=!0)}if(d&&d.type!==xt&&(!Mn(l,d)||f)){const m=wo(d,a,s,t);if(bo(d,m),c==="out-in")return s.isLeaving=!0,m.afterLeave=()=>{s.isLeaving=!1,t.update()},ro(o);c==="in-out"&&l.type!==xt&&(m.delayLeave=(g,y,k)=>{const O=cu(s,d);O[String(d.key)]=d,g._leaveCb=()=>{y(),g._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=k})}return o}}},au=mf;function cu(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function wo(n,e,t,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:k}=e,O=String(n.key),E=cu(t,n),_=(w,R)=>{w&&mt(w,s,9,R)},A=(w,R)=>{const I=R[1];_(w,R),X(w)?w.every(D=>D.length<=1)&&I():w.length<=1&&I()},C={mode:i,persisted:o,beforeEnter(w){let R=a;if(!t.isMounted)if(r)R=m||a;else return;w._leaveCb&&w._leaveCb(!0);const I=E[O];I&&Mn(n,I)&&I.el._leaveCb&&I.el._leaveCb(),_(R,[w])},enter(w){let R=c,I=l,D=u;if(!t.isMounted)if(r)R=g||c,I=y||l,D=k||u;else return;let S=!1;const $=w._enterCb=V=>{S||(S=!0,V?_(D,[w]):_(I,[w]),C.delayedLeave&&C.delayedLeave(),w._enterCb=void 0)};R?A(R,[w,$]):$()},leave(w,R){const I=String(n.key);if(w._enterCb&&w._enterCb(!0),t.isUnmounting)return R();_(h,[w]);let D=!1;const S=w._leaveCb=$=>{D||(D=!0,R(),$?_(p,[w]):_(f,[w]),w._leaveCb=void 0,E[I]===n&&delete E[I])};E[I]=n,d?A(d,[w,S]):S()},clone(w){return wo(w,e,t,s)}};return C}function ro(n){if(Ri(n))return n=Tn(n),n.children=null,n}function yc(n){return Ri(n)?n.children?n.children[0]:void 0:n}function bo(n,e){n.shapeFlag&6&&n.component?bo(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function lu(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===dt?(o.patchFlag&128&&r++,s=s.concat(lu(o.children,e,a))):(e||o.type!==xt)&&s.push(a!=null?Tn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function br(n){return se(n)?{setup:n,name:n.name}:n}const Yr=n=>!!n.type.__asyncLoader,Ri=n=>n.type.__isKeepAlive;function gf(n,e){uu(n,"a",e)}function _f(n,e){uu(n,"da",e)}function uu(n,e,t=$e){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Di(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Ri(r.parent.vnode)&&yf(s,e,t,r),r=r.parent}}function yf(n,e,t,s){const r=Di(e,n,s,!0);pa(()=>{Qo(s[e],r)},t)}function Di(n,e,t=$e,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Es(),vs(t);const a=mt(e,t,n,o);return Un(),Os(),a});return s?r.unshift(i):r.push(i),i}}const en=n=>(e,t=$e)=>(!sr||n==="sp")&&Di(n,(...s)=>e(...s),t),vf=en("bm"),fa=en("m"),wf=en("bu"),bf=en("u"),hu=en("bum"),pa=en("um"),Tf=en("sp"),Cf=en("rtg"),Sf=en("rtc");function kf(n,e=$e){Di("ec",n,e)}function vc(n,e){const t=Ct;if(t===null)return n;const s=Fi(t)||t.proxy,r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=me]=e[i];se(o)&&(o={mounted:o,updated:o}),o.deep&&$n(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l})}return n}function xn(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Es(),mt(c,t,8,[n.el,a,n,e]),Os())}}const Af=Symbol();function du(n,e,t,s){let r;const i=t&&t[s];if(X(n)||Le(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,i&&i[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Te(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(n[l],l,a,i&&i[a])}}else r=[];return t&&(t[s]=r),r}const To=n=>n?Cu(n)?Fi(n)||n.proxy:To(n.parent):null,ri=Ve(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>To(n.parent),$root:n=>To(n.root),$emit:n=>n.emit,$options:n=>ma(n),$forceUpdate:n=>n.f||(n.f=()=>ha(n.update)),$nextTick:n=>n.n||(n.n=Xl.bind(n.proxy)),$watch:n=>ff.bind(n)}),xf={get({_:n},e){const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(s!==me&&ue(s,e))return o[e]=1,s[e];if(r!==me&&ue(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&ue(l,e))return o[e]=3,i[e];if(t!==me&&ue(t,e))return o[e]=4,t[e];Co&&(o[e]=0)}}const u=ri[e];let h,d;if(u)return e==="$attrs"&&lt(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==me&&ue(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,ue(d,e))return d[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return r!==me&&ue(r,e)?(r[e]=t,!0):s!==me&&ue(s,e)?(s[e]=t,!0):ue(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==me&&ue(n,o)||e!==me&&ue(e,o)||(a=i[0])&&ue(a,o)||ue(s,o)||ue(ri,o)||ue(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ue(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};let Co=!0;function Ef(n){const e=ma(n),t=n.proxy,s=n.ctx;Co=!1,e.beforeCreate&&wc(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:k,destroyed:O,unmounted:E,render:_,renderTracked:A,renderTriggered:C,errorCaptured:w,serverPrefetch:R,expose:I,inheritAttrs:D,components:S,directives:$,filters:V}=e;if(l&&Of(l,s,null,n.appContext.config.unwrapInjectedRef),o)for(const q in o){const H=o[q];se(H)&&(s[q]=H.bind(t))}if(r){const q=r.call(t,t);Te(q)&&(n.data=Oi(q))}if(Co=!0,i)for(const q in i){const H=i[q],K=se(H)?H.bind(t,t):se(H.get)?H.get.bind(t,t):At,ee=!se(H)&&se(H.set)?H.set.bind(t):At,Z=ba({get:K,set:ee});Object.defineProperty(s,q,{enumerable:!0,configurable:!0,get:()=>Z.value,set:re=>Z.value=re})}if(a)for(const q in a)fu(a[q],s,t,q);if(c){const q=se(c)?c.call(t):c;Reflect.ownKeys(q).forEach(H=>{df(H,q[H])})}u&&wc(u,n,"c");function U(q,H){X(H)?H.forEach(K=>q(K.bind(t))):H&&q(H.bind(t))}if(U(vf,h),U(fa,d),U(wf,f),U(bf,p),U(gf,m),U(_f,g),U(kf,w),U(Sf,A),U(Cf,C),U(hu,k),U(pa,E),U(Tf,R),X(I))if(I.length){const q=n.exposed||(n.exposed={});I.forEach(H=>{Object.defineProperty(q,H,{get:()=>t[H],set:K=>t[H]=K})})}else n.exposed||(n.exposed={});_&&n.render===At&&(n.render=_),D!=null&&(n.inheritAttrs=D),S&&(n.components=S),$&&(n.directives=$)}function Of(n,e,t=At,s=!1){X(n)&&(n=So(n));for(const r in n){const i=n[r];let o;Te(i)?"default"in i?o=Jr(i.from||r,i.default,!0):o=Jr(i.from||r):o=Jr(i),Oe(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function wc(n,e,t){mt(X(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function fu(n,e,t,s){const r=s.includes(".")?ou(t,s):()=>t[s];if(Le(n)){const i=e[n];se(i)&&zs(r,i)}else if(se(n))zs(r,n.bind(t));else if(Te(n))if(X(n))n.forEach(i=>fu(i,e,t,s));else{const i=se(n.handler)?n.handler.bind(t):e[n.handler];se(i)&&zs(r,i,n)}}function ma(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(l=>ii(c,l,o,!0)),ii(c,e,o)),Te(e)&&i.set(e,c),c}function ii(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&ii(n,i,t,!0),r&&r.forEach(o=>ii(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=If[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const If={data:bc,props:Pn,emits:Pn,methods:Pn,computed:Pn,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:Pn,directives:Pn,watch:Pf,provide:bc,inject:Nf};function bc(n,e){return e?n?function(){return Ve(se(n)?n.call(this,this):n,se(e)?e.call(this,this):e)}:e:n}function Nf(n,e){return Pn(So(n),So(e))}function So(n){if(X(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ge(n,e){return n?[...new Set([].concat(n,e))]:e}function Pn(n,e){return n?Ve(Ve(Object.create(null),n),e):e}function Pf(n,e){if(!n)return e;if(!e)return n;const t=Ve(Object.create(null),n);for(const s in e)t[s]=Ge(n[s],e[s]);return t}function Rf(n,e,t,s=!1){const r={},i={};ei(i,Mi,1),n.propsDefaults=Object.create(null),pu(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Wd(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function Df(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=de(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Ni(n.emitsOptions,d))continue;const f=e[d];if(c)if(ue(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=gs(d);r[p]=ko(c,a,p,f,n,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{pu(n,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!ue(e,h)&&((u=xs(h))===h||!ue(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=ko(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!ue(e,h)&&!0)&&(delete i[h],l=!0)}l&&Xt(n,"set","$attrs")}function pu(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(Gr(c))continue;const l=e[c];let u;r&&ue(r,u=gs(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:Ni(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=de(t),l=a||me;for(let u=0;u<i.length;u++){const h=i[u];t[h]=ko(r,c,h,l[h],n,!ue(l,h))}}return o}function ko(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=ue(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&se(c)){const{propsDefaults:l}=r;t in l?s=l[t]:(vs(r),s=l[t]=c.call(null,e),Un())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===xs(t))&&(s=!0))}return s}function mu(n,e,t=!1){const s=e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!se(n)){const u=h=>{c=!0;const[d,f]=mu(h,e,!0);Ve(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return Te(n)&&s.set(n,us),us;if(X(i))for(let u=0;u<i.length;u++){const h=gs(i[u]);Tc(h)&&(o[h]=me)}else if(i)for(const u in i){const h=gs(u);if(Tc(h)){const d=i[u],f=o[h]=X(d)||se(d)?{type:d}:d;if(f){const p=kc(Boolean,f.type),m=kc(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||ue(f,"default"))&&a.push(h)}}}const l=[o,a];return Te(n)&&s.set(n,l),l}function Tc(n){return n[0]!=="$"}function Cc(n){const e=n&&n.toString().match(/^\s*function (\w+)/);return e?e[1]:n===null?"null":""}function Sc(n,e){return Cc(n)===Cc(e)}function kc(n,e){return X(e)?e.findIndex(t=>Sc(t,n)):se(e)&&Sc(e,n)?0:-1}const gu=n=>n[0]==="_"||n==="$stable",ga=n=>X(n)?n.map($t):[$t(n)],Mf=(n,e,t)=>{if(e._n)return e;const s=da((...r)=>ga(e(...r)),t);return s._c=!1,s},_u=(n,e,t)=>{const s=n._ctx;for(const r in n){if(gu(r))continue;const i=n[r];if(se(i))e[r]=Mf(r,i,s);else if(i!=null){const o=ga(i);e[r]=()=>o}}},yu=(n,e)=>{const t=ga(e);n.slots.default=()=>t},Ff=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=de(e),ei(e,"_",t)):_u(e,n.slots={})}else n.slots={},e&&yu(n,e);ei(n.slots,Mi,1)},jf=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=me;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:(Ve(r,e),!t&&a===1&&delete r._):(i=!e.$stable,_u(e,r)),o=e}else e&&(yu(n,e),o={default:1});if(i)for(const a in r)!gu(a)&&!(a in o)&&delete r[a]};function vu(){return{app:null,config:{isNativeTag:hd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lf=0;function $f(n,e){return function(s,r=null){se(s)||(s=Object.assign({},s)),r!=null&&!Te(r)&&(r=null);const i=vu(),o=new Set;let a=!1;const c=i.app={_uid:Lf++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:ip,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&se(l.install)?(o.add(l),l.install(c,...u)):se(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=We(s,r);return d.appContext=i,u&&e?e(d,l):n(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Fi(d.component)||d.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Ao(n,e,t,s,r=!1){if(X(n)){n.forEach((d,f)=>Ao(d,e&&(X(e)?e[f]:e),t,s,r));return}if(Yr(s)&&!r)return;const i=s.shapeFlag&4?Fi(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=n,l=e&&e.r,u=a.refs===me?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Le(l)?(u[l]=null,ue(h,l)&&(h[l]=null)):Oe(l)&&(l.value=null)),se(c))yn(c,a,12,[o,u]);else{const d=Le(c),f=Oe(c);if(d||f){const p=()=>{if(n.f){const m=d?ue(h,c)?h[c]:u[c]:c.value;r?X(m)&&Qo(m,i):X(m)?m.includes(i)||m.push(i):d?(u[c]=[i],ue(h,c)&&(h[c]=u[c])):(c.value=[i],n.k&&(u[n.k]=c.value))}else d?(u[c]=o,ue(h,c)&&(h[c]=o)):f&&(c.value=o,n.k&&(u[n.k]=o))};o?(p.id=-1,et(p,t)):p()}}}const et=hf;function Vf(n){return Uf(n)}function Uf(n,e){const t=_d();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=At,insertStaticContent:p}=n,m=(v,b,N,T=null,x=null,F=null,L=!1,P=null,j=!!b.dynamicChildren)=>{if(v===b)return;v&&!Mn(v,b)&&(T=Ne(v),re(v,x,F,!0),v=null),b.patchFlag===-2&&(j=!1,b.dynamicChildren=null);const{type:M,ref:G,shapeFlag:z}=b;switch(M){case _a:g(v,b,N,T);break;case xt:y(v,b,N,T);break;case io:v==null&&k(b,N,T,L);break;case dt:S(v,b,N,T,x,F,L,P,j);break;default:z&1?_(v,b,N,T,x,F,L,P,j):z&6?$(v,b,N,T,x,F,L,P,j):(z&64||z&128)&&M.process(v,b,N,T,x,F,L,P,j,Xe)}G!=null&&x&&Ao(G,v&&v.ref,F,b||v,!b)},g=(v,b,N,T)=>{if(v==null)s(b.el=a(b.children),N,T);else{const x=b.el=v.el;b.children!==v.children&&l(x,b.children)}},y=(v,b,N,T)=>{v==null?s(b.el=c(b.children||""),N,T):b.el=v.el},k=(v,b,N,T)=>{[v.el,v.anchor]=p(v.children,b,N,T,v.el,v.anchor)},O=({el:v,anchor:b},N,T)=>{let x;for(;v&&v!==b;)x=d(v),s(v,N,T),v=x;s(b,N,T)},E=({el:v,anchor:b})=>{let N;for(;v&&v!==b;)N=d(v),r(v),v=N;r(b)},_=(v,b,N,T,x,F,L,P,j)=>{L=L||b.type==="svg",v==null?A(b,N,T,x,F,L,P,j):R(v,b,x,F,L,P,j)},A=(v,b,N,T,x,F,L,P)=>{let j,M;const{type:G,props:z,shapeFlag:J,transition:Q,dirs:oe}=v;if(j=v.el=o(v.type,F,z&&z.is,z),J&8?u(j,v.children):J&16&&w(v.children,j,null,T,x,F&&G!=="foreignObject",L,P),oe&&xn(v,null,T,"created"),z){for(const fe in z)fe!=="value"&&!Gr(fe)&&i(j,fe,null,z[fe],F,v.children,T,x,he);"value"in z&&i(j,"value",null,z.value),(M=z.onVnodeBeforeMount)&&Ft(M,T,v)}C(j,v,v.scopeId,L,T),oe&&xn(v,null,T,"beforeMount");const _e=(!x||x&&!x.pendingBranch)&&Q&&!Q.persisted;_e&&Q.beforeEnter(j),s(j,b,N),((M=z&&z.onVnodeMounted)||_e||oe)&&et(()=>{M&&Ft(M,T,v),_e&&Q.enter(j),oe&&xn(v,null,T,"mounted")},x)},C=(v,b,N,T,x)=>{if(N&&f(v,N),T)for(let F=0;F<T.length;F++)f(v,T[F]);if(x){let F=x.subTree;if(b===F){const L=x.vnode;C(v,L,L.scopeId,L.slotScopeIds,x.parent)}}},w=(v,b,N,T,x,F,L,P,j=0)=>{for(let M=j;M<v.length;M++){const G=v[M]=P?hn(v[M]):$t(v[M]);m(null,G,b,N,T,x,F,L,P)}},R=(v,b,N,T,x,F,L)=>{const P=b.el=v.el;let{patchFlag:j,dynamicChildren:M,dirs:G}=b;j|=v.patchFlag&16;const z=v.props||me,J=b.props||me;let Q;N&&En(N,!1),(Q=J.onVnodeBeforeUpdate)&&Ft(Q,N,b,v),G&&xn(b,v,N,"beforeUpdate"),N&&En(N,!0);const oe=x&&b.type!=="foreignObject";if(M?I(v.dynamicChildren,M,P,N,T,oe,F):L||H(v,b,P,null,N,T,oe,F,!1),j>0){if(j&16)D(P,b,z,J,N,T,x);else if(j&2&&z.class!==J.class&&i(P,"class",null,J.class,x),j&4&&i(P,"style",z.style,J.style,x),j&8){const _e=b.dynamicProps;for(let fe=0;fe<_e.length;fe++){const Pe=_e[fe],vt=z[Pe],ns=J[Pe];(ns!==vt||Pe==="value")&&i(P,Pe,vt,ns,x,v.children,N,T,he)}}j&1&&v.children!==b.children&&u(P,b.children)}else!L&&M==null&&D(P,b,z,J,N,T,x);((Q=J.onVnodeUpdated)||G)&&et(()=>{Q&&Ft(Q,N,b,v),G&&xn(b,v,N,"updated")},T)},I=(v,b,N,T,x,F,L)=>{for(let P=0;P<b.length;P++){const j=v[P],M=b[P],G=j.el&&(j.type===dt||!Mn(j,M)||j.shapeFlag&70)?h(j.el):N;m(j,M,G,null,T,x,F,L,!0)}},D=(v,b,N,T,x,F,L)=>{if(N!==T){if(N!==me)for(const P in N)!Gr(P)&&!(P in T)&&i(v,P,N[P],null,L,b.children,x,F,he);for(const P in T){if(Gr(P))continue;const j=T[P],M=N[P];j!==M&&P!=="value"&&i(v,P,M,j,L,b.children,x,F,he)}"value"in T&&i(v,"value",N.value,T.value)}},S=(v,b,N,T,x,F,L,P,j)=>{const M=b.el=v?v.el:a(""),G=b.anchor=v?v.anchor:a("");let{patchFlag:z,dynamicChildren:J,slotScopeIds:Q}=b;Q&&(P=P?P.concat(Q):Q),v==null?(s(M,N,T),s(G,N,T),w(b.children,N,G,x,F,L,P,j)):z>0&&z&64&&J&&v.dynamicChildren?(I(v.dynamicChildren,J,N,x,F,L,P),(b.key!=null||x&&b===x.subTree)&&wu(v,b,!0)):H(v,b,N,G,x,F,L,P,j)},$=(v,b,N,T,x,F,L,P,j)=>{b.slotScopeIds=P,v==null?b.shapeFlag&512?x.ctx.activate(b,N,T,L,j):V(b,N,T,x,F,L,j):W(v,b,j)},V=(v,b,N,T,x,F,L)=>{const P=v.component=Xf(v,T,x);if(Ri(v)&&(P.ctx.renderer=Xe),Qf(P),P.asyncDep){if(x&&x.registerDep(P,U),!v.el){const j=P.subTree=We(xt);y(null,j,b,N)}return}U(P,v,b,N,x,F,L)},W=(v,b,N)=>{const T=b.component=v.component;if(cf(v,b,N))if(T.asyncDep&&!T.asyncResolved){q(T,b,N);return}else T.next=b,tf(T.update),T.update();else b.el=v.el,T.vnode=b},U=(v,b,N,T,x,F,L)=>{const P=()=>{if(v.isMounted){let{next:G,bu:z,u:J,parent:Q,vnode:oe}=v,_e=G,fe;En(v,!1),G?(G.el=oe.el,q(v,G,L)):G=oe,z&&Kr(z),(fe=G.props&&G.props.onVnodeBeforeUpdate)&&Ft(fe,Q,G,oe),En(v,!0);const Pe=so(v),vt=v.subTree;v.subTree=Pe,m(vt,Pe,h(vt.el),Ne(vt),v,x,F),G.el=Pe.el,_e===null&&lf(v,Pe.el),J&&et(J,x),(fe=G.props&&G.props.onVnodeUpdated)&&et(()=>Ft(fe,Q,G,oe),x)}else{let G;const{el:z,props:J}=b,{bm:Q,m:oe,parent:_e}=v,fe=Yr(b);if(En(v,!1),Q&&Kr(Q),!fe&&(G=J&&J.onVnodeBeforeMount)&&Ft(G,_e,b),En(v,!0),z&&Dt){const Pe=()=>{v.subTree=so(v),Dt(z,v.subTree,v,x,null)};fe?b.type.__asyncLoader().then(()=>!v.isUnmounted&&Pe()):Pe()}else{const Pe=v.subTree=so(v);m(null,Pe,N,T,v,x,F),b.el=Pe.el}if(oe&&et(oe,x),!fe&&(G=J&&J.onVnodeMounted)){const Pe=b;et(()=>Ft(G,_e,Pe),x)}(b.shapeFlag&256||_e&&Yr(_e.vnode)&&_e.vnode.shapeFlag&256)&&v.a&&et(v.a,x),v.isMounted=!0,b=N=T=null}},j=v.effect=new sa(P,()=>ha(M),v.scope),M=v.update=()=>j.run();M.id=v.uid,En(v,!0),M()},q=(v,b,N)=>{b.component=v;const T=v.vnode.props;v.vnode=b,v.next=null,Df(v,b.props,T,N),jf(v,b.children,N),Es(),mc(),Os()},H=(v,b,N,T,x,F,L,P,j=!1)=>{const M=v&&v.children,G=v?v.shapeFlag:0,z=b.children,{patchFlag:J,shapeFlag:Q}=b;if(J>0){if(J&128){ee(M,z,N,T,x,F,L,P,j);return}else if(J&256){K(M,z,N,T,x,F,L,P,j);return}}Q&8?(G&16&&he(M,x,F),z!==M&&u(N,z)):G&16?Q&16?ee(M,z,N,T,x,F,L,P,j):he(M,x,F,!0):(G&8&&u(N,""),Q&16&&w(z,N,T,x,F,L,P,j))},K=(v,b,N,T,x,F,L,P,j)=>{v=v||us,b=b||us;const M=v.length,G=b.length,z=Math.min(M,G);let J;for(J=0;J<z;J++){const Q=b[J]=j?hn(b[J]):$t(b[J]);m(v[J],Q,N,null,x,F,L,P,j)}M>G?he(v,x,F,!0,!1,z):w(b,N,T,x,F,L,P,j,z)},ee=(v,b,N,T,x,F,L,P,j)=>{let M=0;const G=b.length;let z=v.length-1,J=G-1;for(;M<=z&&M<=J;){const Q=v[M],oe=b[M]=j?hn(b[M]):$t(b[M]);if(Mn(Q,oe))m(Q,oe,N,null,x,F,L,P,j);else break;M++}for(;M<=z&&M<=J;){const Q=v[z],oe=b[J]=j?hn(b[J]):$t(b[J]);if(Mn(Q,oe))m(Q,oe,N,null,x,F,L,P,j);else break;z--,J--}if(M>z){if(M<=J){const Q=J+1,oe=Q<G?b[Q].el:T;for(;M<=J;)m(null,b[M]=j?hn(b[M]):$t(b[M]),N,oe,x,F,L,P,j),M++}}else if(M>J)for(;M<=z;)re(v[M],x,F,!0),M++;else{const Q=M,oe=M,_e=new Map;for(M=oe;M<=J;M++){const ot=b[M]=j?hn(b[M]):$t(b[M]);ot.key!=null&&_e.set(ot.key,M)}let fe,Pe=0;const vt=J-oe+1;let ns=!1,sc=0;const Ls=new Array(vt);for(M=0;M<vt;M++)Ls[M]=0;for(M=Q;M<=z;M++){const ot=v[M];if(Pe>=vt){re(ot,x,F,!0);continue}let Mt;if(ot.key!=null)Mt=_e.get(ot.key);else for(fe=oe;fe<=J;fe++)if(Ls[fe-oe]===0&&Mn(ot,b[fe])){Mt=fe;break}Mt===void 0?re(ot,x,F,!0):(Ls[Mt-oe]=M+1,Mt>=sc?sc=Mt:ns=!0,m(ot,b[Mt],N,null,x,F,L,P,j),Pe++)}const rc=ns?qf(Ls):us;for(fe=rc.length-1,M=vt-1;M>=0;M--){const ot=oe+M,Mt=b[ot],ic=ot+1<G?b[ot+1].el:T;Ls[M]===0?m(null,Mt,N,ic,x,F,L,P,j):ns&&(fe<0||M!==rc[fe]?Z(Mt,N,ic,2):fe--)}}},Z=(v,b,N,T,x=null)=>{const{el:F,type:L,transition:P,children:j,shapeFlag:M}=v;if(M&6){Z(v.component.subTree,b,N,T);return}if(M&128){v.suspense.move(b,N,T);return}if(M&64){L.move(v,b,N,Xe);return}if(L===dt){s(F,b,N);for(let z=0;z<j.length;z++)Z(j[z],b,N,T);s(v.anchor,b,N);return}if(L===io){O(v,b,N);return}if(T!==2&&M&1&&P)if(T===0)P.beforeEnter(F),s(F,b,N),et(()=>P.enter(F),x);else{const{leave:z,delayLeave:J,afterLeave:Q}=P,oe=()=>s(F,b,N),_e=()=>{z(F,()=>{oe(),Q&&Q()})};J?J(F,oe,_e):_e()}else s(F,b,N)},re=(v,b,N,T=!1,x=!1)=>{const{type:F,props:L,ref:P,children:j,dynamicChildren:M,shapeFlag:G,patchFlag:z,dirs:J}=v;if(P!=null&&Ao(P,null,N,v,!0),G&256){b.ctx.deactivate(v);return}const Q=G&1&&J,oe=!Yr(v);let _e;if(oe&&(_e=L&&L.onVnodeBeforeUnmount)&&Ft(_e,b,v),G&6)ie(v.component,N,T);else{if(G&128){v.suspense.unmount(N,T);return}Q&&xn(v,null,b,"beforeUnmount"),G&64?v.type.remove(v,b,N,x,Xe,T):M&&(F!==dt||z>0&&z&64)?he(M,b,N,!1,!0):(F===dt&&z&384||!x&&G&16)&&he(j,b,N),T&&qe(v)}(oe&&(_e=L&&L.onVnodeUnmounted)||Q)&&et(()=>{_e&&Ft(_e,b,v),Q&&xn(v,null,b,"unmounted")},N)},qe=v=>{const{type:b,el:N,anchor:T,transition:x}=v;if(b===dt){He(N,T);return}if(b===io){E(v);return}const F=()=>{r(N),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(v.shapeFlag&1&&x&&!x.persisted){const{leave:L,delayLeave:P}=x,j=()=>L(N,F);P?P(v.el,F,j):j()}else F()},He=(v,b)=>{let N;for(;v!==b;)N=d(v),r(v),v=N;r(b)},ie=(v,b,N)=>{const{bum:T,scope:x,update:F,subTree:L,um:P}=v;T&&Kr(T),x.stop(),F&&(F.active=!1,re(L,v,b,N)),P&&et(P,b),et(()=>{v.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},he=(v,b,N,T=!1,x=!1,F=0)=>{for(let L=F;L<v.length;L++)re(v[L],b,N,T,x)},Ne=v=>v.shapeFlag&6?Ne(v.component.subTree):v.shapeFlag&128?v.suspense.next():d(v.anchor||v.el),Y=(v,b,N)=>{v==null?b._vnode&&re(b._vnode,null,null,!0):m(b._vnode||null,v,b,null,null,null,N),mc(),eu(),b._vnode=v},Xe={p:m,um:re,m:Z,r:qe,mt:V,mc:w,pc:H,pbc:I,n:Ne,o:n};let yt,Dt;return e&&([yt,Dt]=e(Xe)),{render:Y,hydrate:yt,createApp:$f(Y,yt)}}function En({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function wu(n,e,t=!1){const s=n.children,r=e.children;if(X(s)&&X(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=hn(r[i]),a.el=o.el),t||wu(o,a))}}function qf(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=t[t.length-1],n[r]<l){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<l?i=a+1:o=a;l<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}const Bf=n=>n.__isTeleport,dt=Symbol(void 0),_a=Symbol(void 0),xt=Symbol(void 0),io=Symbol(void 0),Hs=[];let St=null;function Et(n=!1){Hs.push(St=n?null:[])}function Wf(){Hs.pop(),St=Hs[Hs.length-1]||null}let nr=1;function Ac(n){nr+=n}function bu(n){return n.dynamicChildren=nr>0?St||us:null,Wf(),nr>0&&St&&St.push(n),n}function vn(n,e,t,s,r,i){return bu(tt(n,e,t,s,r,i,!0))}function ya(n,e,t,s,r){return bu(We(n,e,t,s,r,!0))}function xo(n){return n?n.__v_isVNode===!0:!1}function Mn(n,e){return n.type===e.type&&n.key===e.key}const Mi="__vInternal",Tu=({key:n})=>n!=null?n:null,Zr=({ref:n,ref_key:e,ref_for:t})=>n!=null?Le(n)||Oe(n)||se(n)?{i:Ct,r:n,k:e,f:!!t}:n:null;function tt(n,e=null,t=null,s=0,r=null,i=n===dt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Tu(e),ref:e&&Zr(e),scopeId:Pi,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(va(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Le(t)?8:16),nr>0&&!o&&St&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&St.push(c),c}const We=zf;function zf(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Af)&&(n=xt),xo(n)){const a=Tn(n,e,!0);return t&&va(a,t),nr>0&&!i&&St&&(a.shapeFlag&6?St[St.indexOf(n)]=a:St.push(a)),a.patchFlag|=-2,a}if(sp(n)&&(n=n.__vccOpts),e){e=Hf(e);let{class:a,style:c}=e;a&&!Le(a)&&(e.class=wr(a)),Te(c)&&(Hl(c)&&!X(c)&&(c=Ve({},c)),e.style=Zo(c))}const o=Le(n)?1:uf(n)?128:Bf(n)?64:Te(n)?4:se(n)?2:0;return tt(n,e,t,s,r,o,i,!0)}function Hf(n){return n?Hl(n)||Mi in n?Ve({},n):n:null}function Tn(n,e,t=!1){const{props:s,ref:r,patchFlag:i,children:o}=n,a=e?Jf(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Tu(a),ref:e&&e.ref?t&&r?X(r)?r.concat(Zr(e)):[r,Zr(e)]:Zr(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==dt?i===-1?16:i|16:i,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Tn(n.ssContent),ssFallback:n.ssFallback&&Tn(n.ssFallback),el:n.el,anchor:n.anchor}}function Gf(n=" ",e=0){return We(_a,null,n,e)}function Kf(n="",e=!1){return e?(Et(),ya(xt,null,n)):We(xt,null,n)}function $t(n){return n==null||typeof n=="boolean"?We(xt):X(n)?We(dt,null,n.slice()):typeof n=="object"?hn(n):We(_a,null,String(n))}function hn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Tn(n)}function va(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(X(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),va(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(Mi in e)?e._ctx=Ct:r===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else se(e)?(e={default:e,_ctx:Ct},t=32):(e=String(e),s&64?(t=16,e=[Gf(e)]):t=8);n.children=e,n.shapeFlag|=t}function Jf(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=wr([e.class,s.class]));else if(r==="style")e.style=Zo([e.style,s.style]);else if(ki(r)){const i=e[r],o=s[r];o&&i!==o&&!(X(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ft(n,e,t,s=null){mt(n,e,7,[t,s])}const Yf=vu();let Zf=0;function Xf(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||Yf,i={uid:Zf++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mu(s,r),emitsOptions:nu(s,r),emit:null,emitted:null,propsDefaults:me,inheritAttrs:s.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=rf.bind(null,i),n.ce&&n.ce(i),i}let $e=null;const wa=()=>$e||Ct,vs=n=>{$e=n,n.scope.on()},Un=()=>{$e&&$e.scope.off(),$e=null};function Cu(n){return n.vnode.shapeFlag&4}let sr=!1;function Qf(n,e=!1){sr=e;const{props:t,children:s}=n.vnode,r=Cu(n);Rf(n,t,r,e),Ff(n,s);const i=r?ep(n,e):void 0;return sr=!1,i}function ep(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=ys(new Proxy(n.ctx,xf));const{setup:s}=t;if(s){const r=n.setupContext=s.length>1?np(n):null;vs(n),Es();const i=yn(s,n,0,[n.props,r]);if(Os(),Un(),Ol(i)){if(i.then(Un,Un),e)return i.then(o=>{xc(n,o,e)}).catch(o=>{Ii(o,n,0)});n.asyncDep=i}else xc(n,i,e)}else Su(n,e)}function xc(n,e,t){se(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Te(e)&&(n.setupState=Jl(e)),Su(n,t)}let Ec;function Su(n,e,t){const s=n.type;if(!n.render){if(!e&&Ec&&!s.render){const r=s.template||ma(n).template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Ve(Ve({isCustomElement:i,delimiters:a},o),c);s.render=Ec(r,l)}}n.render=s.render||At}vs(n),Es(),Ef(n),Os(),Un()}function tp(n){return new Proxy(n.attrs,{get(e,t){return lt(n,"get","$attrs"),e[t]}})}function np(n){const e=s=>{n.exposed=s||{}};let t;return{get attrs(){return t||(t=tp(n))},slots:n.slots,emit:n.emit,expose:e}}function Fi(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Jl(ys(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ri)return ri[t](n)}}))}function sp(n){return se(n)&&"__vccOpts"in n}const ba=(n,e)=>Xd(n,e,sr);function rp(n,e,t){const s=arguments.length;return s===2?Te(e)&&!X(e)?xo(e)?We(n,null,[e]):We(n,e):We(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&xo(t)&&(t=[t]),We(n,e,t))}const ip="3.2.41",op="http://www.w3.org/2000/svg",Fn=typeof document<"u"?document:null,Oc=Fn&&Fn.createElement("template"),ap={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e?Fn.createElementNS(op,n):Fn.createElement(n,t?{is:t}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Fn.createTextNode(n),createComment:n=>Fn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Fn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Oc.innerHTML=s?`<svg>${n}</svg>`:n;const a=Oc.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function cp(n,e,t){const s=n._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function lp(n,e,t){const s=n.style,r=Le(t);if(t&&!r){for(const i in t)Eo(s,i,t[i]);if(e&&!Le(e))for(const i in e)t[i]==null&&Eo(s,i,"")}else{const i=s.display;r?e!==t&&(s.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(s.display=i)}}const Ic=/\s*!important$/;function Eo(n,e,t){if(X(t))t.forEach(s=>Eo(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=up(n,e);Ic.test(t)?n.setProperty(xs(s),t.replace(Ic,""),"important"):n[s]=t}}const Nc=["Webkit","Moz","ms"],oo={};function up(n,e){const t=oo[e];if(t)return t;let s=gs(e);if(s!=="filter"&&s in n)return oo[e]=s;s=Pl(s);for(let r=0;r<Nc.length;r++){const i=Nc[r]+s;if(i in n)return oo[e]=i}return e}const Pc="http://www.w3.org/1999/xlink";function hp(n,e,t,s,r){if(s&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Pc,e.slice(6,e.length)):n.setAttributeNS(Pc,e,t);else{const i=ad(e);t==null||i&&!Al(t)?n.removeAttribute(e):n.setAttribute(e,i?"":t)}}function dp(n,e,t,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const c=t==null?"":t;(n.value!==c||n.tagName==="OPTION")&&(n.value=c),t==null&&n.removeAttribute(e);return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=Al(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(e)}function as(n,e,t,s){n.addEventListener(e,t,s)}function fp(n,e,t,s){n.removeEventListener(e,t,s)}function pp(n,e,t,s,r=null){const i=n._vei||(n._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=mp(e);if(s){const l=i[e]=yp(s,r);as(n,a,l,c)}else o&&(fp(n,a,o,c),i[e]=void 0)}}const Rc=/(?:Once|Passive|Capture)$/;function mp(n){let e;if(Rc.test(n)){e={};let s;for(;s=n.match(Rc);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):xs(n.slice(2)),e]}let ao=0;const gp=Promise.resolve(),_p=()=>ao||(gp.then(()=>ao=0),ao=Date.now());function yp(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;mt(vp(s,t.value),e,5,[s])};return t.value=n,t.attached=_p(),t}function vp(n,e){if(X(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Dc=/^on[a-z]/,wp=(n,e,t,s,r=!1,i,o,a,c)=>{e==="class"?cp(n,s,r):e==="style"?lp(n,t,s):ki(e)?Xo(e)||pp(n,e,t,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bp(n,e,s,r))?dp(n,e,s,i,o,a,c):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),hp(n,e,s,r))};function bp(n,e,t,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&Dc.test(e)&&se(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Dc.test(e)&&Le(t)?!1:e in n}const on="transition",$s="animation",Ta=(n,{slots:e})=>rp(au,Tp(n),e);Ta.displayName="Transition";const ku={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ta.props=Ve({},au.props,ku);const On=(n,e=[])=>{X(n)?n.forEach(t=>t(...e)):n&&n(...e)},Mc=n=>n?X(n)?n.some(e=>e.length>1):n.length>1:!1;function Tp(n){const e={};for(const S in n)S in ku||(e[S]=n[S]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=Cp(r),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:k,onEnterCancelled:O,onLeave:E,onLeaveCancelled:_,onBeforeAppear:A=y,onAppear:C=k,onAppearCancelled:w=O}=e,R=(S,$,V)=>{In(S,$?u:a),In(S,$?l:o),V&&V()},I=(S,$)=>{S._isLeaving=!1,In(S,h),In(S,f),In(S,d),$&&$()},D=S=>($,V)=>{const W=S?C:k,U=()=>R($,S,V);On(W,[$,U]),Fc(()=>{In($,S?c:i),an($,S?u:a),Mc(W)||jc($,s,m,U)})};return Ve(e,{onBeforeEnter(S){On(y,[S]),an(S,i),an(S,o)},onBeforeAppear(S){On(A,[S]),an(S,c),an(S,l)},onEnter:D(!1),onAppear:D(!0),onLeave(S,$){S._isLeaving=!0;const V=()=>I(S,$);an(S,h),Ap(),an(S,d),Fc(()=>{!S._isLeaving||(In(S,h),an(S,f),Mc(E)||jc(S,s,g,V))}),On(E,[S,V])},onEnterCancelled(S){R(S,!1),On(O,[S])},onAppearCancelled(S){R(S,!0),On(w,[S])},onLeaveCancelled(S){I(S),On(_,[S])}})}function Cp(n){if(n==null)return null;if(Te(n))return[co(n.enter),co(n.leave)];{const e=co(n);return[e,e]}}function co(n){return ti(n)}function an(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function In(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function Fc(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Sp=0;function jc(n,e,t,s){const r=n._endId=++Sp,i=()=>{r===n._endId&&s()};if(t)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=kp(n,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,d),i()},d=f=>{f.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,d)}function kp(n,e){const t=window.getComputedStyle(n),s=p=>(t[p]||"").split(", "),r=s(on+"Delay"),i=s(on+"Duration"),o=Lc(r,i),a=s($s+"Delay"),c=s($s+"Duration"),l=Lc(a,c);let u=null,h=0,d=0;e===on?o>0&&(u=on,h=o,d=i.length):e===$s?l>0&&(u=$s,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?on:$s:null,d=u?u===on?i.length:c.length:0);const f=u===on&&/\b(transform|all)(,|$)/.test(t[on+"Property"]);return{type:u,timeout:h,propCount:d,hasTransform:f}}function Lc(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>$c(t)+$c(n[s])))}function $c(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function Ap(){return document.body.offsetHeight}const Vc=n=>{const e=n.props["onUpdate:modelValue"]||!1;return X(e)?t=>Kr(e,t):e};function xp(n){n.target.composing=!0}function Uc(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qc={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n._assign=Vc(r);const i=s||r.props&&r.props.type==="number";as(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=ti(a)),n._assign(a)}),t&&as(n,"change",()=>{n.value=n.value.trim()}),e||(as(n,"compositionstart",xp),as(n,"compositionend",Uc),as(n,"change",Uc))},mounted(n,{value:e}){n.value=e==null?"":e},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:s,number:r}},i){if(n._assign=Vc(i),n.composing||document.activeElement===n&&n.type!=="range"&&(t||s&&n.value.trim()===e||(r||n.type==="number")&&ti(n.value)===e))return;const o=e==null?"":e;n.value!==o&&(n.value=o)}},Ep=["ctrl","shift","alt","meta"],Op={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Ep.some(t=>n[`${t}Key`]&&!e.includes(t))},Ip=(n,e)=>(t,...s)=>{for(let r=0;r<e.length;r++){const i=Op[e[r]];if(i&&i(t,e))return}return n(t,...s)},Np=Ve({patchProp:wp},ap);let Bc;function Pp(){return Bc||(Bc=Vf(Np))}const Rp=(...n)=>{const e=Pp().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=Dp(s);if(!r)return;const i=e._component;!se(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Dp(n){return Le(n)?document.querySelector(n):n}var Mp=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Au;const ji=n=>Au=n,xu=Symbol();function Oo(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Gs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Gs||(Gs={}));function Fp(){const n=Dl(!0),e=n.run(()=>ct({}));let t=[],s=[];const r=ys({install(i){ji(r),r._a=i,i.provide(xu,r),i.config.globalProperties.$pinia=r,s.forEach(o=>t.push(o)),s=[]},use(i){return!this._a&&!Mp?s.push(i):t.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const Eu=()=>{};function Wc(n,e,t,s=Eu){n.push(e);const r=()=>{const i=n.indexOf(e);i>-1&&(n.splice(i,1),s())};return!t&&wa()&&pa(r),r}function ss(n,...e){n.slice().forEach(t=>{t(...e)})}function Io(n,e){n instanceof Map&&e instanceof Map&&e.forEach((t,s)=>n.set(s,t)),n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t],r=n[t];Oo(r)&&Oo(s)&&n.hasOwnProperty(t)&&!Oe(s)&&!_n(s)?n[t]=Io(r,s):n[t]=s}return n}const jp=Symbol();function Lp(n){return!Oo(n)||!n.hasOwnProperty(jp)}const{assign:dn}=Object;function $p(n){return!!(Oe(n)&&n.effect)}function Vp(n,e,t,s){const{state:r,actions:i,getters:o}=e,a=t.state.value[n];let c;function l(){a||(t.state.value[n]=r?r():{});const u=Kd(t.state.value[n]);return dn(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=ys(ba(()=>{ji(t);const f=t._s.get(n);return o[d].call(f,f)})),h),{}))}return c=Ou(n,l,e,t,s,!0),c.$reset=function(){const h=r?r():{};this.$patch(d=>{dn(d,h)})},c}function Ou(n,e,t={},s,r,i){let o;const a=dn({actions:{}},t),c={deep:!0};let l,u,h=ys([]),d=ys([]),f;const p=s.state.value[n];!i&&!p&&(s.state.value[n]={}),ct({});let m;function g(C){let w;l=u=!1,typeof C=="function"?(C(s.state.value[n]),w={type:Gs.patchFunction,storeId:n,events:f}):(Io(s.state.value[n],C),w={type:Gs.patchObject,payload:C,storeId:n,events:f});const R=m=Symbol();Xl().then(()=>{m===R&&(l=!0)}),u=!0,ss(h,w,s.state.value[n])}const y=Eu;function k(){o.stop(),h=[],d=[],s._s.delete(n)}function O(C,w){return function(){ji(s);const R=Array.from(arguments),I=[],D=[];function S(W){I.push(W)}function $(W){D.push(W)}ss(d,{args:R,name:C,store:_,after:S,onError:$});let V;try{V=w.apply(this&&this.$id===n?this:_,R)}catch(W){throw ss(D,W),W}return V instanceof Promise?V.then(W=>(ss(I,W),W)).catch(W=>(ss(D,W),Promise.reject(W))):(ss(I,V),V)}}const E={_p:s,$id:n,$onAction:Wc.bind(null,d),$patch:g,$reset:y,$subscribe(C,w={}){const R=Wc(h,C,w.detached,()=>I()),I=o.run(()=>zs(()=>s.state.value[n],D=>{(w.flush==="sync"?u:l)&&C({storeId:n,type:Gs.direct,events:f},D)},dn({},c,w)));return R},$dispose:k},_=Oi(E);s._s.set(n,_);const A=s._e.run(()=>(o=Dl(),o.run(()=>e())));for(const C in A){const w=A[C];if(Oe(w)&&!$p(w)||_n(w))i||(p&&Lp(w)&&(Oe(w)?w.value=p[C]:Io(w,p[C])),s.state.value[n][C]=w);else if(typeof w=="function"){const R=O(C,w);A[C]=R,a.actions[C]=w}}return dn(_,A),dn(de(_),A),Object.defineProperty(_,"$state",{get:()=>s.state.value[n],set:C=>{g(w=>{dn(w,C)})}}),s._p.forEach(C=>{dn(_,o.run(()=>C({store:_,app:s._a,pinia:s,options:a})))}),p&&i&&t.hydrate&&t.hydrate(_.$state,p),l=!0,u=!0,_}function Up(n,e,t){let s,r;const i=typeof e=="function";typeof n=="string"?(s=n,r=i?t:e):(r=n,s=n.id);function o(a,c){const l=wa();return a=a||l&&Jr(xu),a&&ji(a),a=Au,a._s.has(s)||(i?Ou(s,e,r,a):Vp(s,r,a)),a._s.get(s)}return o.$id=s,o}const qp="/pengUIn/p.png",Bp=[{type:0,name:"c2",keyCode:"KeyQ"},{type:1,name:"c#2",keyCode:"Digit1"},{type:0,name:"d2",keyCode:"KeyW"},{type:1,name:"d#2",keyCode:"Digit2"},{type:0,name:"e2",keyCode:"KeyE"},{type:0,name:"f2",keyCode:"KeyR"},{type:1,name:"f#2",keyCode:"Digit3"},{type:0,name:"g2",keyCode:"KeyT"},{type:1,name:"g#2",keyCode:"Digit4"},{type:0,name:"a2",keyCode:"KeyY"},{type:1,name:"a#2",keyCode:"Digit5"},{type:0,name:"b2",keyCode:"KeyU"},{type:0,name:"c3",keyCode:"KeyI"},{type:1,name:"c#3",keyCode:"Digit6"},{type:0,name:"d3",keyCode:"KeyO"},{type:1,name:"d#3",keyCode:"Digit7"},{type:0,name:"e3",keyCode:"KeyP"},{type:0,name:"f3",keyCode:"BracketLeft"},{type:1,name:"f#3",keyCode:"Digit8"},{type:0,name:"g3",keyCode:"BracketRight"},{type:1,name:"g#3",keyCode:"Digit9"},{type:0,name:"a3",keyCode:"Backslash"},{type:1,name:"a#3",keyCode:"Digit0"},{type:0,name:"b3",keyCode:"Backspace"}],Iu="14.7.77",zc=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Hc=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),No=(n,e)=>({startTime:e,type:"setValue",value:n}),Nu=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Pu=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),ls=n=>n.type==="exponentialRampToValue",oi=n=>n.type==="linearRampToValue",fn=n=>ls(n)||oi(n),Ca=n=>n.type==="setValue",Kt=n=>n.type==="setValueCurve",ai=(n,e,t,s)=>{const r=n[e];return r===void 0?s:fn(r)||Ca(r)?r.value:Kt(r)?r.values[r.values.length-1]:Pu(t,ai(n,e-1,r.startTime,s),r)},Gc=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:fn(t)?[t.endTime,t.value]:Ca(t)?[t.startTime,t.value]:Kt(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ai(n,e-1,t.startTime,r)],Po=n=>n.type==="cancelAndHold",Ro=n=>n.type==="cancelScheduledValues",cn=n=>Po(n)||Ro(n)?n.cancelTime:ls(n)||oi(n)?n.endTime:n.startTime,Kc=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,Jc=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),Wp=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},zp=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return Wp(s,r)},$r=n=>n.type==="setTarget";class Hp{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=cn(e);if(Po(e)||Ro(e)){const s=this._automationEvents.findIndex(i=>Ro(e)&&Kt(i)?i.startTime+i.duration>=t:cn(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Po(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&fn(r)){if($r(i))throw new Error("The internal list is malformed.");const o=Kt(i)?i.startTime+i.duration:cn(i),a=Kt(i)?i.values[i.values.length-1]:i.value,c=ls(r)?Kc(t,o,a,r):Jc(t,o,a,r),l=ls(r)?zc(c,t,this._currenTime):Hc(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&$r(i)&&this._automationEvents.push(No(this.getValue(t),t)),i!==void 0&&Kt(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=Nu(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>cn(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Kt(r)&&cn(r)+r.duration>t)return!1;const i=ls(e)?zc(e.value,e.endTime,this._currenTime):oi(e)?Hc(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(Kt(e)&&t+e.duration>cn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>cn(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];$r(r)&&s.unshift(No(ai(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>cn(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&$r(i)&&(s===void 0||!fn(s)||s.insertTime>e))return Pu(e,ai(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Ca(i)&&(s===void 0||!fn(s)))return i.value;if(i!==void 0&&Kt(i)&&(s===void 0||!fn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?zp(e,i):i.values[i.values.length-1];if(i!==void 0&&fn(i)&&(s===void 0||!fn(s)))return i.value;if(s!==void 0&&ls(s)){const[o,a]=Gc(this._automationEvents,r,i,s,this._defaultValue);return Kc(e,o,a,s)}if(s!==void 0&&oi(s)){const[o,a]=Gc(this._automationEvents,r,i,s,this._defaultValue);return Jc(e,o,a,s)}return this._defaultValue}}const Gp=n=>({cancelTime:n,type:"cancelAndHold"}),Kp=n=>({cancelTime:n,type:"cancelScheduledValues"}),Jp=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),Yp=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),Zp=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),Xp=()=>new DOMException("","AbortError"),Qp=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},em=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},tm=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},ws=new WeakSet,Ru=new WeakMap,Sa=new WeakMap,Du=new WeakMap,ka=new WeakMap,Li=new WeakMap,Mu=new WeakMap,Do=new WeakMap,Mo=new WeakMap,Fo=new WeakMap,Fu={construct(){return Fu}},nm=n=>{try{const e=new Proxy(n,Fu);new e}catch{return!1}return!0},Yc=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Zc=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(Yc);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Yc)}return[t.join(";"),s]},Xc=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Qc=n=>{if(!nm(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},sm=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{const y=u.get(p);if(y!==void 0&&y.has(m))return Promise.resolve();const k=l.get(p);if(k!==void 0){const _=k.get(m);if(_!==void 0)return _}const O=i(p),E=O.audioWorklet===void 0?r(m).then(([_,A])=>{const[C,w]=Zc(_,A),R=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${w}
})})(window,'_AWGS')`;return t(R)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;s(O.currentTime,O.sampleRate,()=>_(class{},void 0,(A,C)=>{if(A.trim()==="")throw e();const w=Mo.get(O);if(w!==void 0){if(w.has(A))throw e();Qc(C),Xc(C.parameterDescriptors),w.set(A,C)}else Qc(C),Xc(C.parameterDescriptors),Mo.set(O,new Map([[A,C]]))},O.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(n(h,h))]).then(([[_,A],C])=>{const w=f+1;f=w;const[R,I]=Zc(_,A),V=`${R};((AudioWorkletProcessor,registerProcessor)=>{${I}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${w}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([V],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL(W);return O.audioWorklet.addModule(U,g).then(()=>{if(a(O))return O;const q=o(O);return q.audioWorklet.addModule(U,g).then(()=>q)}).then(q=>{if(c===null)throw new SyntaxError;try{new c(q,`__sac${w}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return k===void 0?l.set(p,new Map([[m,E]])):k.set(m,E),E.then(()=>{const _=u.get(p);_===void 0?u.set(p,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(p);_!==void 0&&_.delete(m)}),E}},It=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},$i=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},ju=(n,e,t,s)=>{const r=It(n,e),i=$i(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Tr=n=>It(Mu,n),bs=n=>{if(ws.has(n))throw new Error("The AudioNode is already stored.");ws.add(n),Tr(n).forEach(e=>e(!0))},Lu=n=>"port"in n,Cr=n=>{if(!ws.has(n))throw new Error("The AudioNode is not stored.");ws.delete(n),Tr(n).forEach(e=>e(!1))},jo=(n,e)=>{!Lu(n)&&e.every(t=>t.size===0)&&Cr(n)},rm=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,m,g,y,k)=>{const{activeInputs:O,passiveInputs:E}=i(m),{outputs:_}=i(p),A=a(p),C=w=>{const R=c(m),I=c(p);if(w){const D=ju(E,p,g,y);n(O,p,D,!1),!k&&!h(p)&&t(I,R,g,y),d(m)&&bs(m)}else{const D=s(O,p,g,y);e(E,y,D,!1),!k&&!h(p)&&r(I,R,g,y);const S=o(m);if(S===0)u(m)&&jo(m,O);else{const $=f.get(m);$!==void 0&&clearTimeout($),f.set(m,setTimeout(()=>{u(m)&&jo(m,O)},S*1e3))}}};return l(_,[m,g,y],w=>w[0]===m&&w[1]===g&&w[2]===y,!0)?(A.add(C),u(p)?n(O,p,[g,y,C],!0):e(E,y,[p,g,C],!0),!0):!1}},im=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},om=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},am=n=>(e,t)=>{n(e).add(t)},cm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},lm=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...cm,...c},h=s(l,u),d=i(l)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},ze=(n,e)=>n.context===e,um=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ze(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ci=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Bt=()=>new DOMException("","IndexSizeError"),Aa=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Bt():s}})(n.getChannelData)},hm={numberOfChannels:1},dm=(n,e,t,s,r,i,o,a)=>{let c=null;return class $u{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...hm,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(o(p),Aa(p)):e(ci,()=>ci(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===$u.prototype||n.has(u)}}},nt=-34028234663852886e22,Ke=-nt,Zt=n=>ws.has(n),fm={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},pm=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...fm,...u},f=r(h,d),p=o(h),m=p?e():null;super(l,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Ke,nt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){bs(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Zt(this)&&Cr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},mm=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=ze(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},gm=n=>"playbackRate"in n,_m=n=>"frequency"in n&&"gain"in n,ym=n=>"offset"in n,vm=n=>!("frequency"in n)&&"gain"in n,wm=n=>"detune"in n&&"frequency"in n,bm=n=>"pan"in n,Je=n=>It(Ru,n),Sr=n=>It(Du,n),Lo=(n,e)=>{const{activeInputs:t}=Je(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||Lo(i,[...e,n])}));const s=gm(n)?[n.playbackRate]:Lu(n)?Array.from(n.parameters.values()):_m(n)?[n.Q,n.detune,n.frequency,n.gain]:ym(n)?[n.offset]:vm(n)?[n.gain]:wm(n)?[n.detune,n.frequency]:bm(n)?[n.pan]:[];for(const r of s){const i=Sr(r);i!==void 0&&i.activeInputs.forEach(([o])=>Lo(o,e))}Zt(n)&&Cr(n)},Vu=n=>{Lo(n.destination,[])},Tm=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),Cm=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(h===null)throw s();if(!Tm(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Vu(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},Sm=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),p=d?e(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},km=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},Am=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),A=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(l);let w=!1,R=[0,0,-1,0,1,0],I=[0,0,0];const D=()=>{if(w)return;w=!0;const W=s(l,256,9,0);W.onaudioprocess=({inputBuffer:U})=>{const q=[i(U,_,0),i(U,_,1),i(U,_,2),i(U,_,3),i(U,_,4),i(U,_,5)];q.some((K,ee)=>K!==R[ee])&&(u.setOrientation(...q),R=q);const H=[i(U,_,6),i(U,_,7),i(U,_,8)];H.some((K,ee)=>K!==I[ee])&&(u.setPosition(...H),I=H)},A.connect(W)},S=W=>U=>{U!==R[W]&&(R[W]=U,u.setOrientation(...R))},$=W=>U=>{U!==I[W]&&(I[W]=U,u.setPosition(...I))},V=(W,U,q)=>{const H=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});H.connect(A,0,W),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return U}});const K=n({context:c},C,H.offset,Ke,nt);return a(K,"value",ee=>()=>ee.call(K),ee=>Z=>{try{ee.call(K,Z)}catch(re){if(re.code!==9)throw re}D(),C&&q(Z)}),K.cancelAndHoldAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.cancelAndHoldAtTime),K.cancelScheduledValues=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.cancelScheduledValues),K.exponentialRampToValueAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.exponentialRampToValueAtTime),K.linearRampToValueAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.linearRampToValueAtTime),K.setTargetAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.setTargetAtTime),K.setValueAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.setValueAtTime),K.setValueCurveAtTime=(ee=>C?()=>{throw r()}:(...Z)=>{const re=ee.apply(K,Z);return D(),re})(K.setValueCurveAtTime),K};return{forwardX:V(0,0,S(0)),forwardY:V(1,0,S(1)),forwardZ:V(2,-1,S(2)),positionX:V(6,0,$(0)),positionY:V(7,0,$(1)),positionZ:V(8,0,$(2)),upX:V(3,0,S(3)),upY:V(4,1,S(4)),upZ:V(5,0,S(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:y,upX:k,upY:O,upZ:E}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return y},get upX(){return k},get upY(){return O},get upZ(){return E}}},li=n=>"context"in n,kr=n=>li(n[0]),Zn=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},el=(n,e,[t,s],r)=>{Zn(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},tl=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):Zn(i,[t,s],o=>o[0]===t,r)},Is=n=>"inputs"in n,ui=(n,e,t,s)=>{if(Is(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},Uu=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},xm=(n,e,t)=>$i(n,s=>s[0]===e&&s[1]===t),qu=(n,e)=>{if(!Tr(n).delete(e))throw new Error("Missing the expected event listener.")},Bu=(n,e,t)=>{const s=It(n,e),r=$i(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},hi=(n,e,t,s)=>{Is(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},be=n=>It(Sa,n),rr=n=>It(ka,n),Wn=n=>Do.has(n),Xr=n=>!ws.has(n),nl=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),lo=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},di=n=>"context"in n,Em=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=di(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{di(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},Om=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Sr(e),{outputs:o}=Je(n),a=Tr(n),c=l=>{const u=be(n),h=rr(e);if(l){const d=Bu(i,n,t);el(r,n,d,!1),!s&&!Wn(n)&&u.connect(h,t)}else{const d=xm(r,n,t);tl(i,d,!1),!s&&!Wn(n)&&u.disconnect(h,t)}};return Zn(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),Zt(n)?el(r,n,[t,c],!0):tl(i,[n,t,c],!0),!0):!1},Im=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Je(e),o=Uu(r[s],n,t);return o===null?[ju(i,n,t,s)[2],!1]:[o[2],!0]},Nm=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Sr(e),i=Uu(s,n,t);return i===null?[Bu(r,n,t)[1],!1]:[i[2],!0]},xa=(n,e,t,s,r)=>{const[i,o]=Im(n,t,s,r);if(i!==null&&(qu(n,i),o&&!e&&!Wn(n)&&hi(be(n),be(t),s,r)),Zt(t)){const{activeInputs:a}=Je(t);jo(t,a)}},Ea=(n,e,t,s)=>{const[r,i]=Nm(n,t,s);r!==null&&(qu(n,r),i&&!e&&!Wn(n)&&be(n).disconnect(rr(t),s))},Pm=(n,e)=>{const t=Je(n),s=[];for(const r of t.outputs)kr(r)?xa(n,e,...r):Ea(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},Rm=(n,e,t)=>{const s=Je(n),r=[];for(const i of s.outputs)i[1]===t&&(kr(i)?xa(n,e,...i):Ea(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},Dm=(n,e,t,s,r)=>{const i=Je(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(kr(o)?xa(n,e,...o):Ea(n,e,...o),i.outputs.delete(o),o[0]))},Mm=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>class extends l{constructor(y,k,O,E){super(O),this._context=y,this._nativeAudioNode=O;const _=u(y);h(_)&&t(nl,()=>nl(_,m))!==!0&&Em(O),Sa.set(this,O),Mu.set(this,new Set),y.state!=="closed"&&k&&bs(this),n(this,E,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,k=0,O=0){if(k<0||k>=this._nativeAudioNode.numberOfOutputs)throw r();const E=u(this._context),_=p(E);if(d(y)||f(y))throw i();if(li(y)){const w=be(y);try{const I=ui(this._nativeAudioNode,w,k,O),D=Xr(this);(_||D)&&this._nativeAudioNode.disconnect(...I),this.context.state!=="closed"&&!D&&Xr(y)&&bs(y)}catch(I){throw I.code===12?i():I}if(e(this,y,k,O,_)){const I=c([this],y);lo(I,s(_))}return y}const A=rr(y);if(A.name==="playbackRate"&&A.maxValue===1024)throw o();try{this._nativeAudioNode.connect(A,k),(_||Xr(this))&&this._nativeAudioNode.disconnect(A,k)}catch(w){throw w.code===12?i():w}if(Om(this,y,k,_)){const w=c([this],y);lo(w,s(_))}}disconnect(y,k,O){let E;const _=u(this._context),A=p(_);if(y===void 0)E=Pm(this,A);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw r();E=Rm(this,A,y)}else{if(k!==void 0&&(k<0||k>=this.numberOfOutputs)||li(y)&&O!==void 0&&(O<0||O>=y.numberOfInputs))throw r();if(E=Dm(this,A,y,k,O),E.length===0)throw i()}for(const C of E){const w=c([this],C);lo(w,a)}}},Fm=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g=null,y=null)=>{const k=new Hp(m.defaultValue),O=p?s(k):null,E={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return y===null?m.minValue:y},get value(){return m.value},set value(_){m.value=_,E.setValueAtTime(_,f.context.currentTime)},cancelAndHoldAtTime(_){if(typeof m.cancelAndHoldAtTime=="function")O===null&&k.flush(f.context.currentTime),k.add(r(_)),m.cancelAndHoldAtTime(_);else{const A=Array.from(k).pop();O===null&&k.flush(f.context.currentTime),k.add(r(_));const C=Array.from(k).pop();m.cancelScheduledValues(_),A!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?m.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?m.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&m.setValueCurveAtTime(C.values,C.startTime,C.duration))}return E},cancelScheduledValues(_){return O===null&&k.flush(f.context.currentTime),k.add(i(_)),m.cancelScheduledValues(_),E},exponentialRampToValueAtTime(_,A){if(_===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;return O===null&&k.flush(f.context.currentTime),k.add(o(_,A)),m.exponentialRampToValueAtTime(_,A),E},linearRampToValueAtTime(_,A){return O===null&&k.flush(f.context.currentTime),k.add(a(_,A)),m.linearRampToValueAtTime(_,A),E},setTargetAtTime(_,A,C){return O===null&&k.flush(f.context.currentTime),k.add(c(_,A,C)),m.setTargetAtTime(_,A,C),E},setValueAtTime(_,A){return O===null&&k.flush(f.context.currentTime),k.add(l(_,A)),m.setValueAtTime(_,A),E},setValueCurveAtTime(_,A,C){const w=_ instanceof Float32Array?_:new Float32Array(_);if(h!==null&&h.name==="webkitAudioContext"){const R=A+C,I=f.context.sampleRate,D=Math.ceil(A*I),S=Math.floor(R*I),$=S-D,V=new Float32Array($);for(let U=0;U<$;U+=1){const q=(w.length-1)/C*((D+U)/I-A),H=Math.floor(q),K=Math.ceil(q);V[U]=H===K?w[H]:(1-(q-H))*w[H]+(1-(K-q))*w[K]}O===null&&k.flush(f.context.currentTime),k.add(u(V,A,C)),m.setValueCurveAtTime(V,A,C);const W=S/I;W<R&&d(E,V[V.length-1],W),d(E,w[w.length-1],R)}else O===null&&k.flush(f.context.currentTime),k.add(u(w,A,C)),m.setValueCurveAtTime(w,A,C);return E}};return t.set(E,m),e.set(E,f),n(E,O),E},jm=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Wu{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Lm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},$m=(n,e,t,s,r,i,o,a,c,l,u,h,d,f)=>class extends e{constructor(m,g,y){var k;const O=a(m),E=c(O),_=u({...Lm,...y});d(_);const A=Mo.get(O),C=A==null?void 0:A.get(g),w=E||O.state!=="closed"?O:(k=o(O))!==null&&k!==void 0?k:O,R=r(w,E?null:m.baseLatency,l,g,C,_),I=E?s(g,_,C):null;super(m,!0,R,I);const D=[];R.parameters.forEach(($,V)=>{const W=t(this,E,$);D.push([V,W])}),this._nativeAudioWorkletNode=R,this._onprocessorerror=null,this._parameters=new Wu(D),E&&n(O,this);const{activeInputs:S}=i(this);h(R,S)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===g?m:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function fi(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const zu=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},pi=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Vm=(n,e)=>{const t=It(Fo,n),s=be(e);return It(t,s)},Um=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,y)=>g+y,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Je(n),d=await Vm(t,n),f=pi(s.numberOfInputs,s.channelCount),p=pi(s.numberOfOutputs,r),m=Array.from(n.parameters.keys()).reduce((g,y)=>({...g,[y]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&e!==null)for(let y=0;y<s.numberOfInputs;y+=1)for(let k=0;k<s.channelCount;k+=1)fi(e,f[y],k,k,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:y},k)=>{fi(e,m,y,c+k,g)});for(let y=0;y<s.numberOfInputs;y+=1)for(let k=0;k<r[y];k+=1)p[y][k].byteLength===0&&(p[y][k]=new Float32Array(128));try{const y=f.map((O,E)=>h.activeInputs[E].size===0?[]:O),k=o(g/t.sampleRate,t.sampleRate,()=>d.process(y,p,m));if(u!==null)for(let O=0,E=0;O<s.numberOfOutputs;O+=1){for(let _=0;_<r[O];_+=1)zu(u,p[O],_,E+_,g);E+=r[O]}if(!k)break}catch(y){n.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},qm=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>(g,y,k)=>{const O=new WeakMap;let E=null;const _=async(A,C)=>{let w=u(A),R=null;const I=ze(w,C),D=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const S=D.reduce((U,q)=>U+q,0),$=r(C,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),V=[];for(let U=0;U<A.numberOfOutputs;U+=1)V.push(s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[U]}));const W=o(C,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});W.connect=e.bind(null,V),W.disconnect=c.bind(null,V),R=[$,V,W]}else I||(w=new h(C,g));if(O.set(C,R===null?w:R[2]),R!==null){if(E===null){if(k===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const q=A.channelCount*A.numberOfInputs,H=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length,K=q+H;E=Um(A,K===0?null:await(async()=>{const Z=new d(K,Math.ceil(A.context.length/128)*128,C.sampleRate),re=[],qe=[];for(let he=0;he<y.numberOfInputs;he+=1)re.push(o(Z,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),qe.push(r(Z,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const He=await Promise.all(Array.from(A.parameters.values()).map(async he=>{const Ne=i(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he.value});return await f(Z,he,Ne.offset),Ne})),ie=s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+H)});for(let he=0;he<y.numberOfInputs;he+=1){re[he].connect(qe[he]);for(let Ne=0;Ne<y.channelCount;Ne+=1)qe[he].connect(ie,Ne,he*y.channelCount+Ne)}for(const[he,Ne]of He.entries())Ne.connect(ie,0,q+he),Ne.start(0);return ie.connect(Z.destination),await Promise.all(re.map(he=>p(A,Z,he))),m(Z)})(),C,y,D,k,l)}const S=await E,$=t(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[V,W,U]=R;S!==null&&($.buffer=S,$.start(0)),$.connect(V);for(let q=0,H=0;q<A.numberOfOutputs;q+=1){const K=W[q];for(let ee=0;ee<D[q];ee+=1)V.connect(K,H+ee,ee);H+=D[q]}return U}if(I)for(const[S,$]of A.parameters.entries())await n(C,$,w.parameters.get(S));else for(const[S,$]of A.parameters.entries())await f(C,$,w.parameters.get(S));return await p(A,C,w),w};return{render(A,C){a(C,A);const w=O.get(C);return w!==void 0?Promise.resolve(w):_(A,C)}}},Bm=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m,g,y,k,O)=>class extends p{constructor(_,A){super(_,A),this._nativeContext=_,this._audioWorklet=n===void 0?void 0:{addModule:(C,w)=>n(this,C,w)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,A,C){return new t({length:A,numberOfChannels:_,sampleRate:C})}createBufferSource(){return new s(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new u(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,A){return new f(this,{feedback:A,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(_,A,C={disableNormalization:!1}){return new y(this,{...C,imag:A,real:_})}createStereoPanner(){return new k(this)}createWaveShaper(){return new O(this)}decodeAudioData(_,A,C){return l(this._nativeContext,_).then(w=>(typeof A=="function"&&A(w),w),w=>{throw typeof C=="function"&&C(w),w})}},Wm={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},zm=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...Wm,...u},f=r(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._Q=e(this,p,f.Q,Ke,nt),this._detune=e(this,p,f.detune,1200*Math.log2(Ke),-1200*Math.log2(Ke)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Ke),nt),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},Hm=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ze(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Gm=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},Km={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Jm=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...Km,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},Ym=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ze(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Zm={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Xm=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...Zm,...c}),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},Qm=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ze(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},eg=n=>(e,t,s)=>n(t,e,s),tg=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return di(t)?i.connect(t,0,r):i.connect(t,0)},ng=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},sg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},rg=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...sg,...l},d=s(u,h),f=i(u),p=f?t():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Ke,nt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){bs(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Zt(this)&&Cr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},ig=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=ze(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},og=n=>e=>(n[0]=e,n[0]),ag={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},cg=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...ag,...c},h=t(l,u),f=r(l)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},lg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ze(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),Is(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ug=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},hg=()=>new DOMException("","DataCloneError"),sl=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}finally{r()}})},dg=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=t();return Promise.reject(p)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(sl(d).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await sl(d)}catch{}},y=k=>{m(k),g()};try{f.decodeAudioData(d,k=>{typeof k.copyFromChannel!="function"&&(l(k),Aa(k)),n.add(k),g().then(()=>p(k))},k=>{y(k===null?s():k)})}catch(k){y(k)}})},fg=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=t(c);for(const m of p)if(kr(m)){const g=s(m[0]);n(f,g,m[1],m[2])}else{const g=r(m[0]);f.connect(g,m[1])}}}else e.set(c,u-l)},pg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},mg=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...pg,...l},d=s(u,h),f=i(u),p=f?t(h.maxDelayTime):null;super(c,!1,d,p),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},gg=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=ze(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},_g=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),yg=n=>(e,t)=>{n(e).delete(t)},vg=n=>"delayTime"in n,wg=(n,e,t)=>function s(r,i){const o=li(i)?i:t(n,i);if(vg(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Vr=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},bg=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Vr(n,e,t).disconnect():di(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Vr(n,e,s).disconnect(t,0):Vr(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Vr(n,e,s).disconnect(t,0),Tg={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Cg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...Tg,...u},f=s(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Sg=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ze(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},kg=()=>new DOMException("","EncodingError"),Ag=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),xg=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},Eg=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Og=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},Ig={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ng=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...Ig,...c},h=s(l,u),d=i(l),f=d?t():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,Ke,nt)}get gain(){return this._gain}},Pg=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ze(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Rg=(n,e)=>t=>e(n,t),Dg=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Mg=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},Fg=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},jg=n=>e=>n.get(e),je=()=>new DOMException("","InvalidStateError"),Lg=n=>e=>{const t=n.get(e);if(t===void 0)throw je();return t},$g=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},Vg=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Vi=()=>new DOMException("","InvalidAccessError"),Ug=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw Vi();return e.call(n,t,s,r)})(n.getFrequencyResponse)},qg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Bg=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...qg,...c},d=e(l,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f),Ug(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Hu=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=t[0]*l[f];for(let m=1;m<r;m+=1){const g=d-m&c-1;p+=t[m]*i[g],p-=n[m]*o[g]}for(let m=r;m<s;m+=1)p+=t[m]*i[d-m&c-1];for(let m=r;m<e;m+=1)p-=n[m]*o[d-m&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},Wg=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),g=d.getChannelData(p);u.fill(0),h.fill(0),Hu(r,o,i,a,c,u,h,0,l,m,g)}return d},zg=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=e(u);const p=ze(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const y=await r(g);return Wg(y,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},Hg=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const d of h)if(kr(d)){const f=s(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},Gg=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},Kg=(n,e)=>t=>n.has(t)||e(t),Jg=(n,e)=>t=>n.has(t)||e(t),Yg=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},Zg=n=>e=>n!==null&&e instanceof n,Xg=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Qg=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,e_=(n,e)=>t=>n(t)||e(t),t_=n=>e=>n!==null&&e instanceof n,n_=n=>n!==null&&n.isSecureContext,s_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},r_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},i_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...r_,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},o_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},a_=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},c_=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Li.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ir=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},l_=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Se=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},De=(n,e)=>{Se(n,e,"channelCount"),Se(n,e,"channelCountMode"),Se(n,e,"channelInterpretation")},rl=n=>typeof n.getFloatTimeDomainData=="function",u_=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},h_=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(De(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Se(r,s,"fftSize"),Se(r,s,"maxDecibels"),Se(r,s,"minDecibels"),Se(r,s,"smoothingTimeConstant"),n(rl,()=>rl(r))||u_(r),r},d_=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ke=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},f_=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw je();e.call(n,s,r,i),t=!0}})(n.start)},Oa=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Ia=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},p_=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return De(f,d),ke(f,d,"playbackRate"),Se(f,d,"buffer"),Se(f,d,"loop"),Se(f,d,"loopEnd"),Se(f,d,"loopStart"),e(t,()=>t(h))||f_(f),e(s,()=>s(h))||c(f),e(r,()=>r(h))||l(f,h),e(i,()=>i(h))||Oa(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||Ia(f),n(h,f),f},m_=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,g_=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},__=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,y_=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},v_=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const y=d.get(m[1]);y!==void 0?m[1]=y:(m[1]=k=>{k.type==="error"?(Object.defineProperties(k,{type:{value:"processorerror"}}),g(k)):g(new ErrorEvent(m[0],{...k}))},d.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return y_(u),e(i,o,l,u)},Gu=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),w_=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),b_=async(n,e)=>{const t=await w_(e);return new n(t)},T_=(n,e,t,s)=>{let r=Fo.get(n);r===void 0&&(r=new WeakMap,Fo.set(n,r));const i=b_(t,s);return r.set(e,i),i},C_=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some(T=>T<1))throw c();if(y.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const k=g.channelCount*g.numberOfInputs,O=y.reduce((T,x)=>T+x,0),E=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(k+E>6||O>6)throw c();const _=new MessageChannel,A=[],C=[];for(let T=0;T<g.numberOfInputs;T+=1)A.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),C.push(r(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const w=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:T,maxValue:x,minValue:F,name:L}of m.parameterDescriptors){const P=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[L]!==void 0?g.parameterData[L]:T===void 0?0:T});Object.defineProperties(P.offset,{defaultValue:{get:()=>T===void 0?0:T},maxValue:{get:()=>x===void 0?Ke:x},minValue:{get:()=>F===void 0?nt:F}}),w.push(P)}const R=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,k+E)}),I=Gu(p,f.sampleRate),D=a(f,I,k+E,Math.max(1,O)),S=r(f,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),$=[];for(let T=0;T<g.numberOfOutputs;T+=1)$.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[T]}));for(let T=0;T<g.numberOfInputs;T+=1){A[T].connect(C[T]);for(let x=0;x<g.channelCount;x+=1)C[T].connect(R,x,T*g.channelCount+x)}const V=new Wu(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:T},x)=>{const F=w[x];return F.connect(R,0,k+x),F.start(0),[T,F.offset]}));R.connect(D);let W=g.channelInterpretation,U=null;const q=g.numberOfOutputs===0?[D]:$,H={get bufferSize(){return I},get channelCount(){return g.channelCount},set channelCount(T){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(T){throw t()},get channelInterpretation(){return W},set channelInterpretation(T){for(const x of A)x.channelInterpretation=T;W=T},get context(){return D.context},get inputs(){return A},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(T){typeof U=="function"&&H.removeEventListener("processorerror",U),U=typeof T=="function"?T:null,typeof U=="function"&&H.addEventListener("processorerror",U)},get parameters(){return V},get port(){return _.port2},addEventListener(...T){return D.addEventListener(T[0],T[1],T[2])},connect:n.bind(null,q),disconnect:l.bind(null,q),dispatchEvent(...T){return D.dispatchEvent(T[0])},removeEventListener(...T){return D.removeEventListener(T[0],T[1],T[2])}},K=new Map;_.port1.addEventListener=(T=>(...x)=>{if(x[0]==="message"){const F=typeof x[1]=="function"?x[1]:typeof x[1]=="object"&&x[1]!==null&&typeof x[1].handleEvent=="function"?x[1].handleEvent:null;if(F!==null){const L=K.get(x[1]);L!==void 0?x[1]=L:(x[1]=P=>{u(f.currentTime,f.sampleRate,()=>F(P))},K.set(F,x[1]))}}return T.call(_.port1,x[0],x[1],x[2])})(_.port1.addEventListener),_.port1.removeEventListener=(T=>(...x)=>{if(x[0]==="message"){const F=K.get(x[1]);F!==void 0&&(K.delete(x[1]),x[1]=F)}return T.call(_.port1,x[0],x[1],x[2])})(_.port1.removeEventListener);let ee=null;Object.defineProperty(_.port1,"onmessage",{get:()=>ee,set:T=>{typeof ee=="function"&&_.port1.removeEventListener("message",ee),ee=typeof T=="function"?T:null,typeof ee=="function"&&(_.port1.addEventListener("message",ee),_.port1.start())}}),m.prototype.port=_.port1;let Z=null;T_(f,H,m,g).then(T=>Z=T);const qe=pi(g.numberOfInputs,g.channelCount),He=pi(g.numberOfOutputs,y),ie=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((T,{name:x})=>({...T,[x]:new Float32Array(128)}),{});let he=!0;const Ne=()=>{g.numberOfOutputs>0&&D.disconnect(S);for(let T=0,x=0;T<g.numberOfOutputs;T+=1){const F=$[T];for(let L=0;L<y[T];L+=1)S.disconnect(F,x+L,L);x+=y[T]}},Y=new Map;D.onaudioprocess=({inputBuffer:T,outputBuffer:x})=>{if(Z!==null){const F=h(H);for(let L=0;L<I;L+=128){for(let P=0;P<g.numberOfInputs;P+=1)for(let j=0;j<g.channelCount;j+=1)fi(T,qe[P],j,j,L);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:P},j)=>{fi(T,ie,P,k+j,L)});for(let P=0;P<g.numberOfInputs;P+=1)for(let j=0;j<y[P];j+=1)He[P][j].byteLength===0&&(He[P][j]=new Float32Array(128));try{const P=qe.map((M,G)=>{if(F[G].size>0)return Y.set(G,I/128),M;const J=Y.get(G);return J===void 0?[]:(M.every(Q=>Q.every(oe=>oe===0))&&(J===1?Y.delete(G):Y.set(G,J-1)),M)});he=u(f.currentTime+L/f.sampleRate,f.sampleRate,()=>Z.process(P,He,ie));for(let M=0,G=0;M<g.numberOfOutputs;M+=1){for(let z=0;z<y[M];z+=1)zu(x,He[M],z,G+z,L);G+=y[M]}}catch(P){he=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:P.colno,filename:P.filename,lineno:P.lineno,message:P.message}))}if(!he){for(let P=0;P<g.numberOfInputs;P+=1){A[P].disconnect(C[P]);for(let j=0;j<g.channelCount;j+=1)C[L].disconnect(R,j,P*g.channelCount+j)}if(m.parameterDescriptors!==void 0){const P=m.parameterDescriptors.length;for(let j=0;j<P;j+=1){const M=w[j];M.disconnect(R,0,k+j),M.stop()}}R.disconnect(D),D.onaudioprocess=null,Xe?Ne():v();break}}}};let Xe=!1;const yt=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Dt=()=>D.connect(yt).connect(f.destination),v=()=>{D.disconnect(yt),yt.disconnect()},b=()=>{if(he){v(),g.numberOfOutputs>0&&D.connect(S);for(let T=0,x=0;T<g.numberOfOutputs;T+=1){const F=$[T];for(let L=0;L<y[T];L+=1)S.connect(F,x+L,L);x+=y[T]}}Xe=!0},N=()=>{he&&(Dt(),Ne()),Xe=!1};return Dt(),d(H,b,N)},Ku=(n,e)=>{const t=n.createBiquadFilter();return De(t,e),ke(t,e,"Q"),ke(t,e,"detune"),ke(t,e,"frequency"),ke(t,e,"gain"),Se(t,e,"type"),t},S_=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),De(r,s),r},k_=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw je()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw je()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw je()}})},Ar=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return De(t,e),k_(t),t},A_=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return De(a,o),ke(a,o,"offset"),e(s,()=>s(i))||Oa(a),e(r,()=>r(i))||Ia(a),n(i,a),a},Ns=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),x_=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(Ns(h,l),d,f)},E_=(n,e)=>(t,s)=>{const r=t.createConvolver();if(De(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Se(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},Ju=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return De(t,e),ke(t,e,"delayTime"),t},O_=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(De(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return ke(s,t,"attack"),ke(s,t,"knee"),ke(s,t,"ratio"),ke(s,t,"release"),ke(s,t,"threshold"),s},it=(n,e)=>{const t=n.createGain();return De(t,e),ke(t,e,"gain"),t},I_=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return De(r,s),r};function N_(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function P_(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function il(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=P_(t,e),t[0]+=n[s];return t}const R_=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Gu(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(d[0]===0)throw e();if(m===0||m>20)throw s();if(f[0]===0)throw e();if(d[0]!==1){for(let w=0;w<m;w+=1)f[w]/=d[0];for(let w=1;w<p;w+=1)d[w]/=d[0]}const y=t(r,h,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=c;const k=32,O=[],E=[],_=[];for(let w=0;w<o;w+=1){O.push(0);const R=new Float32Array(k),I=new Float32Array(k);R.fill(0),I.fill(0),E.push(R),_.push(I)}y.onaudioprocess=w=>{const R=w.inputBuffer,I=w.outputBuffer,D=R.numberOfChannels;for(let S=0;S<D;S+=1){const $=R.getChannelData(S),V=I.getChannelData(S);O[S]=Hu(d,p,f,m,g,E[S],_[S],O[S],k,$,V)}};const A=r.sampleRate/2;return Ns({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(w){y.channelCount=w},get channelCountMode(){return y.channelCountMode},set channelCountMode(w){y.channelCountMode=w},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(w){y.channelInterpretation=w},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...w){return y.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return y.dispatchEvent(w[0])},getFrequencyResponse(w,R,I){if(w.length!==R.length||R.length!==I.length)throw n();const D=w.length;for(let S=0;S<D;S+=1){const $=-Math.PI*(w[S]/A),V=[Math.cos($),Math.sin($)],W=il(f,V),U=il(d,V),q=N_(W,U);R[S]=Math.sqrt(q[0]*q[0]+q[1]*q[1]),I[S]=Math.atan2(q[1],q[0])}},removeEventListener(...w){return y.removeEventListener(w[0],w[1],w[2])}},y)},D_=(n,e)=>n.createMediaElementSource(e.mediaElement),M_=(n,e)=>{const t=n.createMediaStreamDestination();return De(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},F_=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},j_=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},L_=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,$_=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return De(c,a),ke(c,a,"detune"),ke(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Se(c,a,"type"),e(t,()=>t(o))||Oa(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Ia(c),n(o,c),c},V_=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(De(s,t),ke(s,t,"orientationX"),ke(s,t,"orientationY"),ke(s,t,"orientationZ"),ke(s,t,"positionX"),ke(s,t,"positionY"),ke(s,t,"positionZ"),Se(s,t,"coneInnerAngle"),Se(s,t,"coneOuterAngle"),Se(s,t,"coneOuterGain"),Se(s,t,"distanceModel"),Se(s,t,"maxDistance"),Se(s,t,"panningModel"),Se(s,t,"refDistance"),Se(s,t,"rolloffFactor"),s)},U_=(n,e,t,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:y,orientationZ:k,panningModel:O,positionX:E,positionY:_,positionZ:A,refDistance:C,rolloffFactor:w,...R})=>{const I=u.createPanner();if(R.channelCount>2||R.channelCountMode==="max")throw o();De(I,R);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},S=t(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),$=s(u,{...R,gain:1}),V=s(u,{...D,gain:1}),W=s(u,{...D,gain:0}),U=s(u,{...D,gain:0}),q=s(u,{...D,gain:0}),H=s(u,{...D,gain:0}),K=s(u,{...D,gain:0}),ee=r(u,256,6,1),Z=i(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let re=[g,y,k],qe=[E,_,A];const He=new Float32Array(1);ee.onaudioprocess=({inputBuffer:Y})=>{const Xe=[c(Y,He,0),c(Y,He,1),c(Y,He,2)];Xe.some((Dt,v)=>Dt!==re[v])&&(I.setOrientation(...Xe),re=Xe);const yt=[c(Y,He,3),c(Y,He,4),c(Y,He,5)];yt.some((Dt,v)=>Dt!==qe[v])&&(I.setPosition(...yt),qe=yt)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0});const ie={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(Y){if(Y>2)throw o();$.channelCount=Y,I.channelCount=Y},get channelCountMode(){return I.channelCountMode},set channelCountMode(Y){if(Y==="max")throw o();$.channelCountMode=Y,I.channelCountMode=Y},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(Y){$.channelInterpretation=Y,I.channelInterpretation=Y},get coneInnerAngle(){return I.coneInnerAngle},set coneInnerAngle(Y){I.coneInnerAngle=Y},get coneOuterAngle(){return I.coneOuterAngle},set coneOuterAngle(Y){I.coneOuterAngle=Y},get coneOuterGain(){return I.coneOuterGain},set coneOuterGain(Y){if(Y<0||Y>1)throw e();I.coneOuterGain=Y},get context(){return I.context},get distanceModel(){return I.distanceModel},set distanceModel(Y){I.distanceModel=Y},get inputs(){return[$]},get maxDistance(){return I.maxDistance},set maxDistance(Y){if(Y<0)throw new RangeError;I.maxDistance=Y},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get orientationX(){return V.gain},get orientationY(){return W.gain},get orientationZ(){return U.gain},get panningModel(){return I.panningModel},set panningModel(Y){I.panningModel=Y},get positionX(){return q.gain},get positionY(){return H.gain},get positionZ(){return K.gain},get refDistance(){return I.refDistance},set refDistance(Y){if(Y<0)throw new RangeError;I.refDistance=Y},get rolloffFactor(){return I.rolloffFactor},set rolloffFactor(Y){if(Y<0)throw new RangeError;I.rolloffFactor=Y},addEventListener(...Y){return $.addEventListener(Y[0],Y[1],Y[2])},dispatchEvent(...Y){return $.dispatchEvent(Y[0])},removeEventListener(...Y){return $.removeEventListener(Y[0],Y[1],Y[2])}};h!==ie.coneInnerAngle&&(ie.coneInnerAngle=h),d!==ie.coneOuterAngle&&(ie.coneOuterAngle=d),f!==ie.coneOuterGain&&(ie.coneOuterGain=f),p!==ie.distanceModel&&(ie.distanceModel=p),m!==ie.maxDistance&&(ie.maxDistance=m),g!==ie.orientationX.value&&(ie.orientationX.value=g),y!==ie.orientationY.value&&(ie.orientationY.value=y),k!==ie.orientationZ.value&&(ie.orientationZ.value=k),O!==ie.panningModel&&(ie.panningModel=O),E!==ie.positionX.value&&(ie.positionX.value=E),_!==ie.positionY.value&&(ie.positionY.value=_),A!==ie.positionZ.value&&(ie.positionZ.value=A),C!==ie.refDistance&&(ie.refDistance=C),w!==ie.rolloffFactor&&(ie.rolloffFactor=w),(re[0]!==1||re[1]!==0||re[2]!==0)&&I.setOrientation(...re),(qe[0]!==0||qe[1]!==0||qe[2]!==0)&&I.setPosition(...qe);const he=()=>{$.connect(I),n($,Z,0,0),Z.connect(V).connect(S,0,0),Z.connect(W).connect(S,0,1),Z.connect(U).connect(S,0,2),Z.connect(q).connect(S,0,3),Z.connect(H).connect(S,0,4),Z.connect(K).connect(S,0,5),S.connect(ee).connect(u.destination)},Ne=()=>{$.disconnect(I),a($,Z,0,0),Z.disconnect(V),V.disconnect(S),Z.disconnect(W),W.disconnect(S),Z.disconnect(U),U.disconnect(S),Z.disconnect(q),q.disconnect(S),Z.disconnect(H),H.disconnect(S),Z.disconnect(K),K.disconnect(S),S.disconnect(ee),ee.disconnect(u.destination)};return l(Ns(ie,I),he,Ne)},q_=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},xr=(n,e,t,s)=>n.createScriptProcessor(e,t,s),B_=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return De(i,s),ke(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},W_=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,y)=>{const k=new Float32Array(16385),O=new Float32Array(16385);for(let R=0;R<16385;R+=1){const I=R/16384*c;k[R]=Math.cos(I),O[R]=Math.sin(I)}const E=t(p,{...l,gain:0}),_=s(p,{...u,curve:k}),A=s(p,{...u,curve:a}),C=t(p,{...l,gain:0}),w=s(p,{...u,curve:O});return{connectGraph(){m.connect(E),m.connect(A.inputs===void 0?A:A.inputs[0]),m.connect(C),A.connect(g),g.connect(_.inputs===void 0?_:_.inputs[0]),g.connect(w.inputs===void 0?w:w.inputs[0]),_.connect(E.gain),w.connect(C.gain),E.connect(y,0,0),C.connect(y,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(A.inputs===void 0?A:A.inputs[0]),m.disconnect(C),A.disconnect(g),g.disconnect(_.inputs===void 0?_:_.inputs[0]),g.disconnect(w.inputs===void 0?w:w.inputs[0]),_.disconnect(E.gain),w.disconnect(C.gain),E.disconnect(y,0,0),C.disconnect(y,0,1)}}},d=(p,m,g,y)=>{const k=new Float32Array(16385),O=new Float32Array(16385),E=new Float32Array(16385),_=new Float32Array(16385),A=Math.floor(16385/2);for(let q=0;q<16385;q+=1)if(q>A){const H=(q-A)/(16384-A)*c;k[q]=Math.cos(H),O[q]=Math.sin(H),E[q]=0,_[q]=1}else{const H=q/(16384-A)*c;k[q]=1,O[q]=0,E[q]=Math.cos(H),_[q]=Math.sin(H)}const C=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=t(p,{...l,gain:0}),R=s(p,{...u,curve:k}),I=t(p,{...l,gain:0}),D=s(p,{...u,curve:O}),S=s(p,{...u,curve:a}),$=t(p,{...l,gain:0}),V=s(p,{...u,curve:E}),W=t(p,{...l,gain:0}),U=s(p,{...u,curve:_});return{connectGraph(){m.connect(C),m.connect(S.inputs===void 0?S:S.inputs[0]),C.connect(w,0),C.connect(I,0),C.connect($,1),C.connect(W,1),S.connect(g),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(D.inputs===void 0?D:D.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),g.connect(U.inputs===void 0?U:U.inputs[0]),R.connect(w.gain),D.connect(I.gain),V.connect($.gain),U.connect(W.gain),w.connect(y,0,0),$.connect(y,0,0),I.connect(y,0,1),W.connect(y,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(S.inputs===void 0?S:S.inputs[0]),C.disconnect(w,0),C.disconnect(I,0),C.disconnect($,1),C.disconnect(W,1),S.disconnect(g),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(D.inputs===void 0?D:D.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),g.disconnect(U.inputs===void 0?U:U.inputs[0]),R.disconnect(w.gain),D.disconnect(I.gain),V.disconnect($.gain),U.disconnect(W.gain),w.disconnect(y,0,0),$.disconnect(y,0,0),I.disconnect(y,0,1),W.disconnect(y,0,1)}}},f=(p,m,g,y,k)=>{if(m===1)return h(p,g,y,k);if(m===2)return d(p,g,y,k);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:y,...k})=>{if(g==="max")throw r();const O=n(p,{...k,channelCount:1,channelCountMode:g,numberOfInputs:2}),E=t(p,{...k,channelCount:m,channelCountMode:g,gain:1}),_=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:A,disconnectGraph:C}=f(p,m,E,_,O);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const w={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(S){E.channelCount!==S&&(R&&C(),{connectGraph:A,disconnectGraph:C}=f(p,S,E,_,O),R&&A()),E.channelCount=S},get channelCountMode(){return E.channelCountMode},set channelCountMode(S){if(S==="clamped-max"||S==="max")throw r();E.channelCountMode=S},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(S){E.channelInterpretation=S},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return _.gain},addEventListener(...S){return E.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return E.dispatchEvent(S[0])},removeEventListener(...S){return E.removeEventListener(S[0],S[1],S[2])}};let R=!1;const I=()=>{A(),R=!0},D=()=>{C(),R=!1};return i(Ns(w,O),I,D)}},z_=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);De(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Se(l,{curve:u},"curve"),Se(l,c,"oversample");let h=null,d=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),d&&(s(g)&&h===null?h=n(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},H_=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();De(l,c),De(u,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1});let m=null,g=!1,y=null;const k={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,l.channelCount=_,f.channelCount=_,u.channelCount=_,p.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,l.channelCountMode=_,f.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,l.channelInterpretation=_,f.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_},get context(){return l.context},get curve(){return y},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)l.curve=_,u.curve=_;else{const A=_.length,C=new Float32Array(A+2-A%2),w=new Float32Array(A+2-A%2);C[0]=_[0],w[0]=-_[A-1];const R=Math.ceil((A+1)/2),I=(A+1)/2-1;for(let D=1;D<R;D+=1){const S=D/R*I,$=Math.floor(S),V=Math.ceil(S);C[D]=$===V?_[$]:(1-(S-$))*_[$]+(1-(V-S))*_[V],w[D]=$===V?-_[A-1-$]:-((1-(S-$))*_[A-1-$])-(1-(V-S))*_[A-1-V]}C[R]=A%2===1?_[R-1]:(_[R-2]+_[R-1])/2,l.curve=C,u.curve=w}y=_,g&&(s(y)&&m===null?m=n(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(k.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==k.oversample&&(k.oversample=a);const O=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(p).connect(f),g=!0,s(y)&&(m=n(i,h))},E=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(p),p.disconnect(f),g=!1,m!==null&&(m(),m=null)};return r(Ns(k,f),O,E)},Ze=()=>new DOMException("","NotSupportedError"),G_={numberOfChannels:1},K_=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...G_,...l},f=s(h,u,d);e(ir,()=>ir(f))||f.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Vu(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},J_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Y_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...J_,...l},d=t(u,h),f=i(u),p=f?s():null,m=c.sampleRate/2;super(c,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){bs(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Zt(this)&&Cr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Z_=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const f=ze(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},X_={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Q_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...X_,...l},d=t(u,h),f=i(u),p=f?s():null;super(c,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Ke,nt),this._orientationY=e(this,f,d.orientationY,Ke,nt),this._orientationZ=e(this,f,d.orientationZ,Ke,nt),this._positionX=e(this,f,d.positionX,Ke,nt),this._positionY=e(this,f,d.positionY,Ke,nt),this._positionZ=e(this,f,d.positionZ,Ke,nt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},ey=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let m=null,g=i(f);const y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},k={...y,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},O=ze(g,p);if("bufferSize"in g)m=s(p,{...y,gain:1});else if(!O){const E={...k,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,E)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new o(6,f.context.length,p.sampleRate),S=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});S.connect(D.destination),h=(async()=>{const $=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(V,W)=>{const U=t(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await a(D,V,U.offset),U}));for(let V=0;V<6;V+=1)$[V].connect(S,0,V),$[V].start(0);return l(D)})()}const E=await h,_=s(p,{...y,gain:1});await c(f,p,_);const A=[];for(let D=0;D<E.numberOfChannels;D+=1)A.push(E.getChannelData(D));let C=[A[0][0],A[1][0],A[2][0]],w=[A[3][0],A[4][0],A[5][0]],R=s(p,{...y,gain:1}),I=r(p,{...k,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:w[0],positionY:w[1],positionZ:w[2]});_.connect(R).connect(I.inputs[0]),I.connect(m);for(let D=128;D<E.length;D+=128){const S=[A[0][D],A[1][D],A[2][D]],$=[A[3][D],A[4][D],A[5][D]];if(S.some((V,W)=>V!==C[W])||$.some((V,W)=>V!==w[W])){C=S,w=$;const V=D/p.sampleRate;R.gain.setValueAtTime(0,V),R=s(p,{...y,gain:0}),I=r(p,{...k,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:w[0],positionY:w[1],positionZ:w[2]}),R.gain.setValueAtTime(1,V),_.connect(R).connect(I.inputs[0]),I.connect(m)}}return m}return O?(await n(p,f.orientationX,g.orientationX),await n(p,f.orientationY,g.orientationY),await n(p,f.orientationZ,g.orientationZ),await n(p,f.positionX,g.positionX),await n(p,f.positionY,g.positionY),await n(p,f.positionZ,g.positionZ)):(await a(p,f.orientationX,g.orientationX),await a(p,f.orientationY,g.orientationY),await a(p,f.orientationZ,g.orientationZ),await a(p,f.positionX,g.positionX),await a(p,f.positionY,g.positionY),await a(p,f.positionZ,g.positionZ)),Is(g)?await c(f,p,g.inputs[0]):await c(f,p,g),g};return{render(f,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},ty={disableNormalization:!1},ny=(n,e,t,s)=>class Yu{constructor(i,o){const a=e(i),c=s({...ty,...o}),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Yu.prototype||t.has(i)}},sy=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),ry=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),f=s.context.destination;!t(l)&&(s!==f||!t(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},iy=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},oy=(n,e,t,s)=>r=>n(ir,()=>ir(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),ay=n=>(e,t)=>{n.set(e,t)},cy=n=>(e,t)=>n.set(e,t),ly=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Aa(u)):e(i,()=>i(u))||a(u),n.add(u),u)),uy={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},hy=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...uy,...c},h=t(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},dy=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ze(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),Is(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},fy=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},py=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},my=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},gy=()=>new DOMException("","UnknownError"),_y={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},yy=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={..._y,...l},d=t(u,h),p=i(u)?s():null;super(c,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},vy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ze(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),Is(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},wy=()=>typeof window>"u"?null:window,by=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},Ty=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},Cy=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},Sy=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Zu=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Xu=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Er=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},ky=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),Ay=n=>({...n,channelCount:n.numberOfOutputs}),xy=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Qu=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Qu(n,e,t+1e-7)}},Ey=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Oy=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Iy=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Na=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},eh=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Pa=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Ny=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Py=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},th=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ns(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Ps=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},Ry=Qp(Zn),Dy=im(Zn),My=_g($i),nh=new WeakMap,Fy=Mg(nh),Nt=Gm(new Map,new WeakMap),Ut=wy(),sh=h_(Nt,Bt),Ra=Dg(Je),Ue=ry(Je,Ra,Wn),jy=um(sh,be,Ue),we=Lg(Li),tn=L_(Ut),pe=t_(tn),rh=new WeakMap,ih=xg(Ps),Or=m_(Ut),Da=Zg(Or),Ma=Xg(Ut),oh=Qg(Ut),or=__(Ut),Ie=Mm(em(Ru),rm(Ry,Dy,ui,My,hi,Je,Fy,Tr,be,Zn,Zt,Wn,Xr),Nt,Hg(Do,hi,Je,be,rr,Zt),Bt,Vi,Ze,fg(ui,Do,Je,be,rr,we,Zt,pe),wg(rh,Je,It),ih,we,Da,Ma,oh,pe,or),Ly=lm(Ie,jy,Bt,sh,we,pe),Fa=new WeakSet,ol=d_(Ut),ah=og(new Uint32Array(1)),ja=by(ah,Bt),La=Ty(ah),$y=dm(Fa,Nt,Ze,ol,tn,fy(ol),ja,La),Ui=om(it),ch=iy(Ra,Sr,Wn),Wt=eg(ch),Rs=p_(Ui,Nt,Ey,Oy,Iy,Na,eh,Pa,Py,Cy(Er),th),zt=sy(Fg(Sr),ch),Vy=mm(Wt,Rs,be,zt,Ue),Pt=Fm(tm(Du),rh,ka,jm,Gp,Kp,Jp,Yp,Zp,No,Nu,Or,Qu),Uy=pm(Ie,Vy,Pt,je,Rs,we,pe,Ps),qy=Sm(Ie,km,Bt,je,g_(it,Er),we,pe,Ue),By=Hm(Wt,Ku,be,zt,Ue),Xn=cy(nh),Wy=zm(Ie,Pt,By,Vi,Ku,we,pe,Xn),kn=l_(Zn,Ma),zy=Sy(je,kn),An=S_(Or,zy),Hy=Ym(An,be,Ue),Gy=Jm(Ie,Hy,An,we,pe),Ky=Qm(Ar,be,Ue),Jy=Xm(Ie,Ky,Ar,we,pe,Ay),Yy=x_(Ui,Rs,it,kn),Ds=A_(Ui,Nt,Yy,Na,Pa),Zy=ig(Wt,Ds,be,zt,Ue),Xy=rg(Ie,Pt,Zy,Ds,we,pe,Ps),lh=E_(Ze,Er),Qy=lg(lh,be,Ue),ev=cg(Ie,Qy,lh,we,pe,Xn),tv=gg(Wt,Ju,be,zt,Ue),nv=mg(Ie,Pt,tv,Ju,we,pe,Xn),uh=O_(Ze),sv=Sg(Wt,uh,be,zt,Ue),rv=Cg(Ie,Pt,sv,uh,Ze,we,pe,Xn),iv=Pg(Wt,it,be,zt,Ue),ov=Ng(Ie,Pt,iv,it,we,pe),av=R_(Vi,je,xr,Ze),qi=oy(Nt,it,xr,my(it,tn)),cv=zg(Rs,be,tn,Ue,qi),lv=I_(av),uv=Bg(Ie,lv,cv,we,pe,Xn),hv=Am(Pt,An,Ds,xr,Ze,Zu,pe,Er),hh=new WeakMap,dv=c_(qy,hv,ih,pe,hh,Ps),dh=$_(Ui,Nt,Na,eh,Pa,th),fv=Z_(Wt,dh,be,zt,Ue),pv=Y_(Ie,Pt,dh,fv,we,pe,Ps),fh=ng(Rs),mv=H_(fh,je,it,Xu,kn),Bi=z_(fh,je,mv,Xu,kn,Or,Er),gv=U_(ui,je,An,it,xr,Bi,Ze,hi,Zu,kn),ph=V_(gv),_v=ey(Wt,An,Ds,it,ph,be,tn,zt,Ue,qi),yv=Q_(Ie,Pt,ph,_v,we,pe,Xn),vv=q_(Bt),wv=ny(vv,we,new WeakSet,xy),bv=W_(An,Ar,it,Bi,Ze,kn),mh=B_(bv,Ze),Tv=dy(Wt,mh,be,zt,Ue),Cv=hy(Ie,Pt,mh,Tv,we,pe),Sv=vy(Bi,be,Ue),kv=yy(Ie,je,Bi,Sv,we,pe,Xn),gh=n_(Ut),$a=Eg(Ut),_h=new WeakMap,Av=$g(_h,tn),xv=gh?sm(Nt,Ze,Ag(Ut),$a,Og(Xp),we,Av,pe,or,new WeakMap,new WeakMap,py(or,tn),Ut):void 0,Ev=e_(Da,pe),Ov=dg(Fa,Nt,hg,kg,new WeakSet,we,Ev,ci,ir,ja,La),yh=Bm(xv,Ly,$y,Uy,Wy,Gy,Jy,Xy,ev,Ov,nv,rv,ov,uv,dv,pv,yv,wv,Cv,kv),Iv=s_(Ie,D_,we,pe),Nv=i_(Ie,M_,we,pe),Pv=o_(Ie,F_,we,pe),Rv=j_(je,pe),Dv=a_(Ie,Rv,we),Mv=Cm(yh,je,Ze,gy,Iv,Nv,Pv,Dv,Or),Va=Vg(hh),Fv=am(Va),vh=tg(Bt),jv=yg(Va),wh=bg(Bt),bh=new WeakMap,Lv=Rg(bh,It),$v=C_(vh,Bt,je,An,Ar,Ds,it,xr,Ze,wh,$a,Lv,kn),Vv=v_(je,$v,it,Ze,kn),Uv=qm(Wt,vh,Rs,An,Ar,Ds,it,jv,wh,$a,be,or,tn,zt,Ue,qi),qv=jg(_h),Bv=ay(bh),al=gh?$m(Fv,Ie,Pt,Uv,Vv,Je,qv,we,pe,or,ky,Bv,Ny,Ps):void 0,Wv=ug(Ze,tn),zv=ly(Fa,Nt,Ra,Va,qi,ci,ja,La),Hv=K_(yh,Nt,je,Wv,zv),Gv=Gg(Li,Da),Kv=Kg(Sa,Ma),Jv=Jg(ka,oh),Yv=Yg(Li,pe);function ne(n,e){if(!n)throw new Error(e)}function Cn(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Th(n){!n.isOffline&&n.state!=="running"&&Sh('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ch=console;function Zv(...n){Ch.log(...n)}function Sh(...n){Ch.warn(...n)}function gt(n){return typeof n>"u"}function ce(n){return!gt(n)}function Xv(n){return typeof n=="function"}function zn(n){return typeof n=="number"}function qn(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Qv(n){return typeof n=="boolean"}function Ot(n){return Array.isArray(n)}function qt(n){return typeof n=="string"}function Ur(n){return qt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ew(n){return new Mv(n)}function tw(n,e,t){return new Hv(n,e,t)}const Bn=typeof self=="object"?self:null,nw=Bn&&(Bn.hasOwnProperty("AudioContext")||Bn.hasOwnProperty("webkitAudioContext"));function sw(n,e,t){return ne(ce(al),"This node only works in a secure context (https or localhost)"),new al(n,e,t)}function Rt(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function Re(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}class rw{constructor(e,t,s){this._callback=e,this._type=t,this._updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Hn(n){return Jv(n)}function wn(n){return Kv(n)}function Qr(n){return Yv(n)}function cs(n){return Gv(n)}function kh(n){return n instanceof AudioBuffer}function iw(n,e){return n==="value"||Hn(e)||wn(e)||kh(e)}function fs(n,...e){if(!e.length)return n;const t=e.shift();if(qn(n)&&qn(t))for(const s in t)iw(s,t[s])?n[s]=t[s]:qn(t[s])?(n[s]||Object.assign(n,{[s]:{}}),fs(n[s],t[s])):Object.assign(n,{[s]:t[s]});return fs(n,...e)}function ow(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function B(n,e,t=[],s){const r={},i=Array.from(e);if(qn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(fs(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&qn(i[0]))fs(r,i[0]);else for(let o=0;o<t.length;o++)ce(i[o])&&(r[t[o]]=i[o]);return fs(n,r)}function aw(n){return n.constructor.getDefaults()}function ps(n,e){return gt(n)?e:n}function cl(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class nn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Bn&&this.toString()===Bn.TONE_DEBUG_CLASS)&&Zv(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}nn.version=Iu;const Ua=1e-6;function mi(n,e){return n>e+Ua}function $o(n,e){return mi(n,e)||bt(n,e)}function Ah(n,e){return n+Ua<e}function bt(n,e){return Math.abs(n-e)<Ua}function cw(n,e,t){return Math.max(Math.min(n,t),e)}class Ht extends nn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=B(Ht.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ne(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ne($o(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(bt(this._timeline[t].time,e)){for(let s=t;s>=0&&bt(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&$o(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(bt(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(bt(u[t],e))o=l;else break}return o}else{if(Ah(a[t],e)&&mi(c[t],e))return o;mi(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&bt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&bt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const xh=[];function Wi(n){xh.push(n)}function lw(n){xh.forEach(e=>e(n))}const Eh=[];function zi(n){Eh.push(n)}function uw(n){Eh.forEach(e=>e(n))}class Ir extends nn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{gt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(gt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(gt(t))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Ir.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Oh extends Ir{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Nr extends Oh{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ht,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=B(Nr.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=ew({latencyHint:e.latencyHint}),this._ticker=new rw(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(lw(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ne(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ne(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ne(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ne(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ne(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ne(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ne(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return sw(this.rawContext,e,t)}addAudioWorkletModule(e,t){return Re(this,void 0,void 0,function*(){ne(ce(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return Re(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,qt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return cs(this._context)?this._context.resume():Promise.resolve()}close(){return Re(this,void 0,void 0,function*(){cs(this._context)&&(yield this._context.close()),this._initialized&&uw(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class hw extends Oh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return Re(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ae(n,e){Ot(e)?e.forEach(t=>Ae(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Ih(n,e){Ot(e)?e.forEach(t=>Ih(n,t)):Object.defineProperty(n,e,{writable:!0})}const ge=()=>{};class ve extends nn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ge;const e=B(ve.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&kh(e.url)||e.url instanceof ve?this.set(e.url):qt(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:ge,onload:ge,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ft().sampleRate}set(e){return e instanceof ve?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Re(this,void 0,void 0,function*(){const t=ve.load(e).then(s=>{this.set(s),this.onload(this)});ve.downloads.push(t);try{yield t}finally{const s=ve.downloads.indexOf(t);ve.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Ot(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=ft(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(zn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(zn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ne(s<r,"The start time must be less than the end time");const i=r-s,o=ft().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ve(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ve().fromArray(e)}static fromUrl(e){return Re(this,void 0,void 0,function*(){return yield new ve().load(e)})}static load(e){return Re(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const a=t[1].split("|");let c=a[0];for(const l of a)if(ve.supportsType(l)){c=l;break}e=e.replace(t[0],c)}const s=ve.baseUrl===""||ve.baseUrl.endsWith("/")?ve.baseUrl:ve.baseUrl+"/",r=yield fetch(s+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const i=yield r.arrayBuffer();return yield ft().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Re(this,void 0,void 0,function*(){for(yield Promise.resolve();ve.downloads.length;)yield ve.downloads[0]})}}ve.baseUrl="";ve.downloads=[];class qa extends Nr{constructor(){super({clockSource:"offline",context:Qr(arguments[0])?arguments[0]:tw(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Qr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Qr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Re(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Re(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new ve(t)})}close(){return Promise.resolve()}}const Nh=new hw;let Ks=Nh;function ft(){return Ks===Nh&&nw&&dw(new Nr),Ks}function dw(n){cs(n)?Ks=new Nr(n):Qr(n)?Ks=new qa(n):Ks=n}if(Bn&&!Bn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Iu} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function fw(n){return Math.pow(10,n/20)}function pw(n){return 20*(Math.log(n)/Math.LN10)}function Ph(n){return Math.pow(2,n/12)}let Hi=440;function mw(){return Hi}function gw(n){Hi=n}function Vo(n){return Math.round(Rh(n))}function Rh(n){return 69+12*Math.log2(n/Hi)}function _w(n){return Hi*Math.pow(2,(n-69)/12)}class Ba extends nn{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ba&&this.fromType(this._val),gt(this._val))return this._noArg();if(qt(this._val)&&gt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(qn(this._val)){let e=0;for(const t in this._val)if(ce(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(ce(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return qt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class kt extends Ba{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new kt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new kt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new kt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Vo(this.toFrequency())}_now(){return this.context.now()}}class pt extends kt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return mw()}static set A4(e){gw(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:pt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=yw[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:pt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new pt(this.context,this.valueOf()*Ph(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Vo(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/pt.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),vw[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return _w(e)}static ftom(e){return Vo(e)}}const yw={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},vw=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Js extends kt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class rt extends nn{constructor(){super();const e=B(rt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ft()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new kt(this.context,e).toSeconds()}toFrequency(e){return new pt(this.context,e).toFrequency()}toTicks(e){return new Js(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{gt(e[s])&&delete t[s]}),t}get(){const e=aw(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];ce(s)&&ce(s.value)&&ce(s.setValueAtTime)?e[t]=s.value:s instanceof rt?e[t]=s._getPartialProperties(e[t]):Ot(s)||zn(s)||qt(s)||Qv(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ce(this[t])&&(this[t]&&ce(this[t].value)&&ce(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof rt?this[t].set(e[t]):this[t]=e[t])}),this}}class Wa extends Ht{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Cn(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Ce extends rt{constructor(){super(B(Ce.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=B(Ce.getDefaults(),arguments,["param","units","convert"]);for(ne(ce(e.param)&&(Hn(e.param)||e.param instanceof Ce),"param must be an AudioParam");!Hn(e.param);)e.param=e.param._param;this._swappable=ce(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ht(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ce(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(rt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ce(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ce(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ce(this.maxValue)&&ce(this.minValue)&&Cn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?fw(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?pw(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return ne(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return ne(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=bt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return ne(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);ne(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),ne(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ne(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));ne(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&bt(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ne(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class ae extends rt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ce(this.input)?Hn(this.input)||this.input instanceof Ce?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ce(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ce(e)&&(e instanceof ae||wn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ne(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Ms(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Sh("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return ww(this,e,t,s),this}chain(...e){return Uo(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ce(this.input)&&(this.input instanceof ae?this.input.dispose():wn(this.input)&&this.input.disconnect()),ce(this.output)&&(this.output instanceof ae?this.output.dispose():wn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Uo(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof ae?t.connect(s):wn(t)&&Ms(t,s),s),e)}function Ms(n,e,t=0,s=0){for(ne(ce(n),"Cannot connect from undefined node"),ne(ce(e),"Cannot connect to undefined node"),(e instanceof ae||wn(e))&&ne(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ne(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ae||e instanceof Ce;)ce(e.input)&&(e=e.input);for(;n instanceof ae;)ce(n.output)&&(n=n.output);Hn(e)?n.connect(e,t):n.connect(e,t,s)}function ww(n,e,t=0,s=0){if(ce(e))for(;e instanceof ae;)e=e.input;for(;!wn(n);)ce(n.output)&&(n=n.output);Hn(e)?n.disconnect(e,t):wn(e)?n.disconnect(e,t,s):n.disconnect()}class Ye extends ae{constructor(){super(B(Ye.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=B(Ye.getDefaults(),arguments,["gain","units"]);this.gain=new Ce({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ae(this,"gain")}static getDefaults(){return Object.assign(ae.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ts extends ae{constructor(e){super(e),this.onended=ge,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ye({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ae.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ge})}_startGain(e,t=1){ne(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ne(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ge&&(this.onended(this),this.onended=ge,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ne(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class gi extends Ts{constructor(){super(B(gi.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=B(gi.getDefaults(),arguments,["offset"]);Ms(this._source,this._gainNode),this.offset=new Ce({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ts.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Me extends ae{constructor(){super(B(Me.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=B(Me.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new gi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ae.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return za(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function za(n,e,t,s){(e instanceof Ce||Hn(e)||e instanceof Me&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Me&&(e.overridden=!0)),Ms(n,e,t,s)}class _i extends Ce{constructor(){super(B(_i.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ht(1/0),this._multiplier=1;const e=B(_i.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ce.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(gt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class yi extends Me{constructor(){super(B(yi.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=B(yi.getDefaults(),arguments,["value"]);this.input=this._param=new _i({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Me.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class vi extends rt{constructor(){super(B(vi.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Wa,this._tickOffset=new Ht;const e=B(vi.getDefaults(),arguments,["frequency"]);this.frequency=new yi({context:this.context,units:e.units,value:e.frequency}),Ae(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ce(t)&&this.setTicksAtTime(t,s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,t+this.sampleTime,a=>{let c=i.time;const l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(o=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let r=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=bt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ar extends rt{constructor(){super(B(ar.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ge,this._lastUpdate=0,this._state=new Wa("stopped"),this._boundLoop=this._loop.bind(this);const e=B(ar.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new vi({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ae(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rt.getDefaults(),{callback:ge,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Th(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ir.mixin(ar);class Ha extends nn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=B(Ha.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ge,onload:ge,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ne(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=ge,r=ge){return qt(t)?this._buffers.set(e.toString(),new ve(this.baseUrl+t,s,r)):this._buffers.set(e.toString(),new ve(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Yt extends Js{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class bw extends rt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ht,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Wi(n=>{n.draw=new bw({context:n})});zi(n=>{n.draw.dispose()});class Tw extends nn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ne(ce(e.time),"Events must have a time property"),ne(ce(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Cw(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Cw{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Gn extends ae{constructor(){super(B(Gn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=B(Gn.getDefaults(),arguments,["volume"]);this.input=this.output=new Ye({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ae(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class wi extends ae{constructor(){super(B(wi.getDefaults(),arguments)),this.name="Destination",this.input=new Gn({context:this.context}),this.output=new Ye({context:this.context}),this.volume=this.input.volume;const e=B(wi.getDefaults(),arguments);Uo(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Uo(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Wi(n=>{n.destination=new wi({context:n})});zi(n=>{n.destination.dispose()});class Sw extends nn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ht({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Sn{constructor(e,t){this.id=Sn._eventId++;const s=Object.assign(Sn.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:ge,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Sn._eventId=0;class Ga extends Sn{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Ga.getDefaults(),t);this.duration=new Yt(e.context,s.duration).valueOf(),this._interval=new Yt(e.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Sn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Yt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Yt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Yt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class cr extends rt{constructor(){super(B(cr.getDefaults(),arguments)),this.name="Transport",this._loop=new Sw(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ht,this._repeatedEvents=new Tw,this._syncedSignals=[],this._swingAmount=0;const e=B(cr.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new ar({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ae(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(rt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Yt(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,s=>s.invoke(e))}schedule(e,t){const s=new Sn(this,{callback:e,time:new Js(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new Ga(this,{callback:e,duration:new kt(this.context,r).toTicks(),interval:new kt(this.context,t).toTicks(),time:new Js(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Sn(this,{callback:e,once:!0,time:new Js(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Yt(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let s;return ce(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Ot(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new kt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new kt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Yt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Yt(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const s=new Ye(t);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ih(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ir.mixin(cr);Wi(n=>{n.transport=new cr({context:n})});zi(n=>{n.transport.dispose()});class ut extends ae{constructor(e){super(e),this.input=void 0,this._state=new Wa("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ge,this._syncedStop=ge,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Gn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ae(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,onstop:ge,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=gt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ne(mi(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(ps(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Th(this.context),this._start(r,t,s);return this}stop(e){let t=gt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ce(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ge,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class lr extends Ts{constructor(){super(B(lr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=B(lr.getDefaults(),arguments,["url","onload"]);Ms(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ce({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ve(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ts.getDefaults(),{url:new ve,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){ne(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=ps(t,this.loopStart):t=ps(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;$o(o,a)&&(o=(o-c)%l+c),bt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ah(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ce(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Qn(n,e){return Re(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new qa(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class bi extends Ts{constructor(){super(B(bi.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=B(bi.getDefaults(),arguments,["frequency","type"]);Ms(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ce({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ce({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ae(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ts.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ee extends ut{constructor(){super(B(Ee.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=B(Ee.getDefaults(),arguments,["frequency","type"]);this.frequency=new Me({context:this.context,units:"frequency",value:e.frequency}),Ae(this,"frequency"),this.detune=new Me({context:this.context,units:"cents",value:e.detune}),Ae(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ut.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new bi({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ee._periodicWaveCache.find(t=>t.phase===this._phase&&ow(t.partials,this._partials));{const e=Ee._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(ce(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ee._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ee._periodicWaveCache.length>100&&Ee._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Cn(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return cw(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ee._periodicWaveCache=[];class Gi extends ae{constructor(){super(Object.assign(B(Gi.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return za(this,e,t,s),this}}class ur extends Gi{constructor(){super(Object.assign(B(ur.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=B(ur.getDefaults(),arguments,["mapping","length"]);Ot(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Xv(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Me.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));ne(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kw extends Gi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ur({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Kn extends Me{constructor(){super(Object.assign(B(Kn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=B(Kn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ye({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Me.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class hr extends ut{constructor(){super(B(hr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new kw({context:this.context}),this._modulationNode=new Ye({context:this.context});const e=B(hr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ee({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ee({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Kn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ae(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class dr extends ut{constructor(){super(B(dr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ye({context:this.context,gain:0});const e=B(dr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ee({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Me({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ee({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Kn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Kn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ae(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Cs extends ut{constructor(){super(B(Cs.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ye({context:this.context,gain:0}),this._thresh=new ur({context:this.context,mapping:t=>t<=0?-1:1});const e=B(Cs.getDefaults(),arguments,["frequency","width"]);this.width=new Me({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ee({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ae(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ut.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class fr extends ut{constructor(){super(B(fr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=B(fr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Me({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Me({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ae(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Cn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Ee({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ge});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class pr extends ut{constructor(){super(B(pr.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Kn({context:this.context,value:2});const e=B(pr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Cs({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ee({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ae(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ut.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ll={am:hr,fat:fr,fm:dr,oscillator:Ee,pulse:Cs,pwm:pr};class mr extends ut{constructor(){super(B(mr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=B(mr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Me({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Me({context:this.context,units:"cents",value:e.detune}),Ae(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ee.getDefaults(),dr.getDefaults(),hr.getDefaults(),fr.getDefaults(),Cs.getDefaults(),pr.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=ll[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof ll[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&zn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&zn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&qt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Re(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Dh(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Cn(i,n,e),t.set(this,i)}})}}function sn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Cn(this.toSeconds(i),n,e),t.set(this,i)}})}}class gr extends ut{constructor(){super(B(gr.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=B(gr.getDefaults(),arguments,["url","onload"]);this._buffer=new ve({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ut.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1,reverse:!1})}load(e){return Re(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ge){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=ps(t,this._loopStart):t=ps(t,0);const r=this.toSeconds(t),i=s;s=ps(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new lr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&gt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){this._stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Cn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Cn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Rt([sn(0)],gr.prototype,"fadeIn",void 0);Rt([sn(0)],gr.prototype,"fadeOut",void 0);class Qt extends ae{constructor(){super(B(Qt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Me({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=B(Qt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ae.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(qt(e))return e;{let s;for(s in qr)if(qr[s][t]===e)return s;return e}}_setCurve(e,t,s){if(qt(s)&&Reflect.has(qr,s)){const r=qr[s];qn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Ot(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){ne(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(ne(Ot(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return za(this,e,t,s),this}asArray(e=1024){return Re(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new qa(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Rt([sn(0)],Qt.prototype,"attack",void 0);Rt([sn(0)],Qt.prototype,"decay",void 0);Rt([Dh(0,1)],Qt.prototype,"sustain",void 0);Rt([sn(0)],Qt.prototype,"release",void 0);const qr=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class Jn extends ae{constructor(){super(B(Jn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=B(Jn.getDefaults(),arguments);this._volume=this.output=new Gn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ae(this,"volume")}static getDefaults(){return Object.assign(ae.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Yn extends Jn{constructor(){super(B(Yn.getDefaults(),arguments));const e=B(Yn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Jn.getDefaults(),{detune:0,onsilence:ge,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof pt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Rt([sn(0)],Yn.prototype,"portamento",void 0);class Ka extends Qt{constructor(){super(B(Ka.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ye({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class _r extends Yn{constructor(){super(B(_r.getDefaults(),arguments)),this.name="Synth";const e=B(_r.getDefaults(),arguments);this.oscillator=new mr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ka(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ae(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Yn.getDefaults(),{envelope:Object.assign(cl(Qt.getDefaults(),Object.keys(ae.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(cl(mr.getDefaults(),[...Object.keys(ut.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class yr extends _r{constructor(){super(B(yr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=B(yr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ae(this,["oscillator","envelope"])}static getDefaults(){return fs(Yn.getDefaults(),_r.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof pt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Rt([Dh(0)],yr.prototype,"octaves",void 0);Rt([sn(0)],yr.prototype,"pitchDecay",void 0);const Mh=new Set;function Ja(n){Mh.add(n)}function Fh(n,e){const t=`registerProcessor("${n}", ${e})`;Mh.add(t)}const Aw=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Ja(Aw);const xw=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Ja(xw);const Ew=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Ja(Ew);const Ow="feedback-comb-filter",Iw=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Fh(Ow,Iw);class Ss extends Jn{constructor(){super(B(Ss.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=B(Ss.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(ne(Ur(s)||zn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ur(s)){const i=new pt(this.context,s).toMidi();t[i]=e.urls[s]}else zn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Ha({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Jn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ge,onerror:ge,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=Rh(new pt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=Ph(c+a),d=new lr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,s),Ot(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new pt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Ot(t)?(ne(Ot(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(ne(Ur(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ur(e)){const r=new pt(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Rt([sn(0)],Ss.prototype,"attack",void 0);Rt([sn(0)],Ss.prototype,"release",void 0);class Ti extends ae{constructor(){super(Object.assign(B(Ti.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=B(Ti.getDefaults(),arguments,["pan"]);this.pan=new Ce({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ae(this,"pan")}static getDefaults(){return Object.assign(ae.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Nw="bit-crusher",Pw=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Fh(Nw,Pw);class xe extends ae{constructor(){super(B(xe.getDefaults(),arguments,["solo"])),this.name="Solo";const e=B(xe.getDefaults(),arguments,["solo"]);this.input=this.output=new Ye({context:this.context}),xe._allSolos.has(this.context)||xe._allSolos.set(this.context,new Set),xe._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ae.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),xe._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){xe._soloed.has(this.context)||xe._soloed.set(this.context,new Set),xe._soloed.get(this.context).add(this)}_removeSolo(){xe._soloed.has(this.context)&&xe._soloed.get(this.context).delete(this)}_isSoloed(){return xe._soloed.has(this.context)&&xe._soloed.get(this.context).has(this)}_noSolos(){return!xe._soloed.has(this.context)||xe._soloed.has(this.context)&&xe._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),xe._allSolos.get(this.context).delete(this),this._removeSolo(),this}}xe._allSolos=new Map;xe._soloed=new Map;class Ci extends ae{constructor(){super(B(Ci.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=B(Ci.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ti({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Gn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ae(this,["pan","volume"])}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class jn extends ae{constructor(){super(B(jn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=B(jn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new xe({solo:e.solo,context:this.context}),this._panVol=this.output=new Ci({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ae(this,["pan","volume"])}static getDefaults(){return Object.assign(ae.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return jn.buses.has(e)||jn.buses.set(e,new Ye({context:this.context})),jn.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new Ye({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}jn.buses=new Map;class Rw extends ae{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ce({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ce({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ce({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ce({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ce({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ce({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ce({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ce({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ce({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ae.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Wi(n=>{n.listener=new Rw({context:n})});zi(n=>{n.listener.dispose()});function Bs(){return ft().now()}ft().transport;ft().destination;ft().destination;ft().listener;ft().draw;ft();const qo=new Ss({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination(),Dw={class:"keys"},Mw=["data-key","onMousedown","onMouseup","onMouseleave"],Fw=br({__name:"ThePiano",props:{isRecording:{type:Boolean}},emits:["update:record"],setup(n,{emit:e}){const t=n,s={z:"c2",s:"c#2",x:"d2",d:"d#2",c:"e2",v:"f2",g:"f#2",b:"g2",h:"g#2",n:"a2",j:"a#2",m:"b2",q:"c3",2:"c#3",w:"d3",3:"d#3",e:"e3",r:"f3",5:"f#3",t:"g3",6:"g#3",y:"a3",7:"a#3",u:"b3"},r=ct(new Set),i=ct([]);document.addEventListener("keydown",c=>{if(!(c.key in s))return;const l=s[c.key];l&&!r.value.has(l)&&o(l)}),document.addEventListener("keyup",c=>{if(!(c.key in s))return;const l=s[c.key];l&&r.value.has(l)&&a(l)});function o(c){if(r.value.add(c),qo.triggerAttack(c),!t.isRecording)return;const l=i.value.length!==0,u=l?i.value[0].timeStamp:0;i.value.push({id:`${c}-${Date.now()}`,name:c,duration:Bs(),timeStamp:Bs(),startTime:l?Bs()-u:u})}function a(c){if(qo.triggerRelease(c),r.value.delete(c),!t.isRecording)return;const l=i.value.slice().reverse().find(h=>h.name===c),u=i.value.find(h=>h.id===(l==null?void 0:l.id));!u||(u.duration=Bs()-u.duration)}return zs(()=>t.isRecording,c=>{c?i.value=[]:e("update:record",i.value)}),(c,l)=>(Et(),vn("div",Dw,[(Et(!0),vn(dt,null,du(la(Bp),(u,h)=>(Et(),vn("div",{key:h,class:wr([u.type===0?"keys__white-key":"keys__black-key",r.value.has(u.name)?u.type===0?"keys__white-key--active":"keys__black-key--active":""]),"data-key":u.name,onMousedown:d=>o(u.name),onMouseup:d=>a(u.name),onMouseleave:d=>a(u.name)},null,42,Mw))),128))]))}});const Ki=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},jw=Ki(Fw,[["__scopeId","data-v-63eb715b"]]),Lw="modulepreload",$w=function(n){return"/pengUIn/"+n},ul={},ks=function(e,t,s){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=$w(i),i in ul)return;ul[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Lw,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Vw=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(()=>Promise.resolve().then(()=>Fs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ya extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Uw extends Ya{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qw extends Ya{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bw extends Ya{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bo;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Bo||(Bo={}));var Ww=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class zw{constructor(e,{headers:t={},customFetch:s,region:r=Bo.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Vw(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Ww(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:l}).catch(p=>{throw new Uw(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new qw(u);if(!u.ok)throw new Bw(u);let d=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="text/event-stream"?f=u:d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var _t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hw(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var st={},Za={},Ji={},Pr={},Yi={},Zi={},Gw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},As=Gw();const Kw=As.fetch,jh=As.fetch.bind(As),Lh=As.Headers,Jw=As.Request,Yw=As.Response,Fs=Object.freeze(Object.defineProperty({__proto__:null,fetch:Kw,default:jh,Headers:Lh,Request:Jw,Response:Yw},Symbol.toStringTag,{value:"Module"})),Zw=Hw(Fs);var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});class Xw extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Xi.default=Xw;var $h=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zi,"__esModule",{value:!0});const Qw=$h(Zw),e0=$h(Xi);class t0{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Qw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,h=null,d=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{l=JSON.parse(m),Array.isArray(l)&&i.status===404&&(u=[],l=null,d=200,f="OK")}catch{i.status===404&&m===""?(d=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&((c=l==null?void 0:l.details)===null||c===void 0?void 0:c.includes("0 rows"))&&(l=null,d=200,f="OK"),l&&this.shouldThrowOnError)throw new e0.default(l)}return{error:l,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}Zi.default=t0;var n0=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yi,"__esModule",{value:!0});const s0=n0(Zi);class r0 extends s0.default{select(e){let t=!1;const s=(e!=null?e:"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}Yi.default=r0;var i0=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pr,"__esModule",{value:!0});const o0=i0(Yi);class a0 extends o0.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}Pr.default=a0;var c0=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ji,"__esModule",{value:!0});const Vs=c0(Pr);class l0{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Vs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Vs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Vs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Vs.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}Ji.default=l0;var Qi={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.version=void 0;eo.version="0.0.0-automated";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DEFAULT_HEADERS=void 0;const u0=eo;Qi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${u0.version}`};var Vh=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Za,"__esModule",{value:!0});const h0=Vh(Ji),d0=Vh(Pr),f0=Qi;class Xa{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},f0.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new h0.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xa(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",c=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new d0.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}Za.default=Xa;var js=_t&&_t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(st,"__esModule",{value:!0});st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const Uh=js(Za);st.PostgrestClient=Uh.default;const qh=js(Ji);st.PostgrestQueryBuilder=qh.default;const Bh=js(Pr);st.PostgrestFilterBuilder=Bh.default;const Wh=js(Yi);st.PostgrestTransformBuilder=Wh.default;const zh=js(Zi);st.PostgrestBuilder=zh.default;const Hh=js(Xi);st.PostgrestError=Hh.default;var p0=st.default={PostgrestClient:Uh.default,PostgrestQueryBuilder:qh.default,PostgrestFilterBuilder:Bh.default,PostgrestTransformBuilder:Wh.default,PostgrestBuilder:zh.default,PostgrestError:Hh.default};const{PostgrestClient:m0,PostgrestQueryBuilder:LT,PostgrestFilterBuilder:$T,PostgrestTransformBuilder:VT,PostgrestBuilder:UT,PostgrestError:qT}=p0,g0="2.11.2",_0={"X-Client-Info":`realtime-js/${g0}`},y0="1.0.0",Gh=1e4,v0=1e3;var ms;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ms||(ms={}));var at;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(at||(at={}));var wt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(wt||(wt={}));var Wo;(function(n){n.websocket="websocket"})(Wo||(Wo={}));var Ln;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ln||(Ln={}));class w0{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const c=s.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Kh{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ye;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ye||(ye={}));const hl=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=b0(o,n,e,r),i),{})},b0=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?Jh(i,o):zo(o)},Jh=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return k0(e,t)}switch(n){case ye.bool:return T0(e);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return C0(e);case ye.json:case ye.jsonb:return S0(e);case ye.timestamp:return A0(e);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return zo(e);default:return zo(e)}},zo=n=>n,T0=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},C0=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},S0=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},k0=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Jh(e,a))}return n},A0=n=>typeof n=="string"?n.replace(" ","T"):n,Yh=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class uo{constructor(e,t,s={},r=Gh){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dl;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(dl||(dl={}));class Ys{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ys.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=Ys.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ys.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const d=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=u.filter(g=>f.indexOf(g.presence_ref)<0),m=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[l]=p),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}s(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,r(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fl;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(fl||(fl={}));var pl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(pl||(pl={}));var Jt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Jt||(Jt={}));class Qa{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new uo(this,wt.join,this.params,this.timeout),this.rejoinTimer=new Kh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Ys(this),this.broadcastEndpointURL=Yh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Jt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Jt.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Jt.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let m=0;m<f;m++){const g=d[m],{filter:{event:y,schema:k,table:O,filter:E}}=g,_=u&&u[m];if(_&&_.event===y&&_.schema===k&&_.table===O&&_.filter===E)p.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),e==null||e(Jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Jt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=l.body)===null||r===void 0?void 0:r.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=at.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const r=new uo(this,wt.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new uo(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=wt;if(s&&[a,c,l,u].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var p,m,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(m=f.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,m,g,y,k,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((m=t.ids)===null||m===void 0?void 0:m.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const E=(k=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return E==="*"||E===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:m,table:g,commit_timestamp:y,type:k,errors:O}=p;d=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:y,eventType:k,new:{},old:{},errors:O}),this._getPayloadRecords(p))}f.callback(d,s)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Qa.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(wt.close,{},e)}_onError(e){this._on(wt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=hl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=hl(e.columns,e.old_record)),t}}const x0=()=>{},E0=typeof WebSocket<"u",O0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I0{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=_0,this.params={},this.timeout=Gh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=x0,this.conn=null,this.sendBuffer=[],this.serializer=new w0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ks(()=>Promise.resolve().then(()=>Fs),void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Wo.websocket}`,this.httpEndpoint=Yh(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(E0){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new N0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ks(()=>import("./browser.278a5880.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:y0}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return Ln.Connecting;case ms.open:return Ln.Open;case ms.closing:return Ln.Closing;default:return Ln.Closed}}isConnected(){return this.connectionState()===Ln.Open}channel(e,t={config:{}}){const s=new Qa(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(wt.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(v0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(wt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([O0],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class N0{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ms.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class ec extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Fe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class P0 extends ec{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ho extends ec{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var R0=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const Zh=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(()=>Promise.resolve().then(()=>Fs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},D0=()=>R0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ks(()=>Promise.resolve().then(()=>Fs),void 0)).Response:Response}),Go=n=>{if(Array.isArray(n))return n.map(t=>Go(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Go(s)}),e};var es=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const ho=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),M0=(n,e,t)=>es(void 0,void 0,void 0,function*(){const s=yield D0();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new P0(ho(r),n.status||500))}).catch(r=>{e(new Ho(ho(r),r))}):e(new Ho(ho(n),n))}),F0=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function Rr(n,e,t,s,r,i){return es(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,F0(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>M0(c,a,s))})})}function Si(n,e,t,s){return es(this,void 0,void 0,function*(){return Rr(n,"GET",e,t,s)})}function pn(n,e,t,s,r){return es(this,void 0,void 0,function*(){return Rr(n,"POST",e,s,r,t)})}function j0(n,e,t,s,r){return es(this,void 0,void 0,function*(){return Rr(n,"PUT",e,s,r,t)})}function L0(n,e,t,s){return es(this,void 0,void 0,function*(){return Rr(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Xh(n,e,t,s,r){return es(this,void 0,void 0,function*(){return Rr(n,"DELETE",e,s,r,t)})}var Qe=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const $0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ml={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class V0{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Zh(r)}uploadOrUpdate(e,t,s,r){return Qe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ml),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(Fe(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Qe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:ml.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),d=yield h.json();return h.ok?{data:{path:i,fullPath:d.Key},error:null}:{data:null,error:d}}catch(c){if(Fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Qe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield pn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ec("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}update(e,t,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Qe(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield pn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Qe(this,void 0,void 0,function*(){try{const r=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}download(e,t){return Qe(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Si(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}info(e){return Qe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Si(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Go(s),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}exists(e){return Qe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield L0(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Fe(s)&&s instanceof Ho){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${l}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}list(e,t,s){return Qe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},$0),t),{prefix:e||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const U0="2.7.1",q0={"X-Client-Info":`storage-js/${U0}`};var rs=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class B0{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},q0),t),this.fetch=Zh(s)}listBuckets(){return rs(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Fe(e))return{data:null,error:e};throw e}})}getBucket(e){return rs(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return rs(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return rs(this,void 0,void 0,function*(){try{return{data:yield j0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return rs(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rs(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}}class W0 extends B0{constructor(e,t={},s){super(e,t,s)}from(e){return new V0(this.url,this.headers,e,this.fetch)}}const z0="2.47.10";let Ws="";typeof Deno<"u"?Ws="deno":typeof document<"u"?Ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ws="react-native":Ws="node";const H0={"X-Client-Info":`supabase-js-${Ws}/${z0}`},G0={headers:H0},K0={schema:"public"},J0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y0={};var Z0=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const X0=n=>{let e;return n?e=n:typeof fetch>"u"?e=jh:e=fetch,(...t)=>e(...t)},Q0=()=>typeof Headers>"u"?Lh:Headers,eb=(n,e,t)=>{const s=X0(t),r=Q0();return(i,o)=>Z0(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let l=new r(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:l}))})};var tb=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};function nb(n){return n.replace(/\/$/,"")}function sb(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:c,global:l}=e,u={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i),accessToken:()=>tb(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}const Qh="2.67.3",rb="http://localhost:9999",ib="supabase.auth.token",ob={"X-Client-Info":`gotrue-js/${Qh}`},gl=10,Ko="X-Supabase-Api-Version",ed={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function ab(n){return Math.round(Date.now()/1e3)+n}function cb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Lt=()=>typeof window<"u"&&typeof document<"u",Nn={tested:!1,writable:!1},Zs=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nn.tested)return Nn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Nn.tested=!0,Nn.writable=!0}catch{Nn.tested=!0,Nn.writable=!1}return Nn.writable};function lb(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const td=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(()=>Promise.resolve().then(()=>Fs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},ub=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",nd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Br=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Wr=async(n,e)=>{await n.removeItem(e)};function hb(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,c,l,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),s=o<<2|a>>4,r=(a&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class to{constructor(){this.promise=new to.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}to.promiseConstructor=Promise;function _l(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(hb(s))}async function db(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function fb(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function pb(n){return("0"+n.toString(16)).substr(-2)}function mb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,pb).join("")}async function gb(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function _b(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yb(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await gb(n);return _b(t)}async function is(n,e,t=!1){const s=mb();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await nd(n,`${e}-code-verifier`,r);const i=await yb(s);return[i,s===i?"plain":"s256"]}const vb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wb(n){const e=n.headers.get(Ko);if(!e||!e.match(vb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class tc extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function te(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class bb extends tc{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Tb(n){return te(n)&&n.name==="AuthApiError"}class sd extends tc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ts extends tc{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class ln extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cb(n){return te(n)&&n.name==="AuthSessionMissingError"}class fo extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zr extends ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hr extends ts{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sb(n){return te(n)&&n.name==="AuthImplicitGrantRedirectError"}class yl extends ts{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jo extends ts{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function po(n){return te(n)&&n.name==="AuthRetryableFetchError"}class vl extends ts{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var kb=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Rn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ab=[502,503,504];async function wl(n){var e;if(!ub(n))throw new Jo(Rn(n),0);if(Ab.includes(n.status))throw new Jo(Rn(n),n.status);let t;try{t=await n.json()}catch(i){throw new sd(Rn(i),i)}let s;const r=wb(n);if(r&&r.getTime()>=ed["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new vl(Rn(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ln}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new vl(Rn(t),n.status,t.weak_password.reasons);throw new bb(Rn(t),n.status||500,s)}const xb=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function le(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[Ko]||(i[Ko]=ed["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Eb(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Eb(n,e,t,s,r,i){const o=xb(e,s,r,i);let a;try{a=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Jo(Rn(c),0)}if(a.ok||await wl(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await wl(c)}}function un(n){var e;let t=null;Pb(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=ab(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function bl(n){const e=un(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function mn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ob(n){return{data:n,error:null}}function Ib(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=kb(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Nb(n){return n}function Pb(n){return n.access_token&&n.refresh_token&&n.expires_in}var Rb=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class Db{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=td(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Rb(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ib,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(te(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mn})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Nb});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);l[`${g}Page`]=m}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(te(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mn})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:mn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:mn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}}const Mb={getItem:n=>Zs()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{!Zs()||globalThis.localStorage.setItem(n,e)},removeItem:n=>{!Zs()||globalThis.localStorage.removeItem(n)}};function Tl(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Fb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const os={debug:!!(globalThis&&Zs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jb extends rd{}async function Lb(n,e,t){os.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),os.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){os.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{os.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw os.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new jb(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(os.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Fb();const $b={url:rb,storageKey:ib,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ob,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Us=30*1e3,Cl=3;async function Sl(n,e,t){return await t()}class vr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vr.nextInstanceID,vr.nextInstanceID+=1,this.instanceID>0&&Lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},$b),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Db({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=td(r.fetch),this.lock=r.lock||Sl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Lt()&&((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0?void 0:t.locks)?this.lock=Lb:this.lock=Sl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Zs()?this.storage=Mb:(this.memoryStorage={},this.storage=Tl(this.memoryStorage)):(this.memoryStorage={},this.storage=Tl(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=lb(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Lt()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Sb(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return te(t)?{error:t}:{error:new sd("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:un}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await is(this.storage,this.storageKey)),i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:un})}else if("phone"in e){const{phone:u,password:h,options:d}=e;i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:un})}else throw new zr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bl})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bl})}else throw new zr("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new fo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Br(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t!=null?t:"").split("/");try{const{data:i,error:o}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:un});if(await Wr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r!=null?r:null}),error:o})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:un}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await is(this.storage,this.storageKey));const{error:h}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new zr("You must provide either an email or phone number.")}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:un});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await is(this.storage,this.storageKey)),await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ob})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ln;const{error:r}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await le(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await le(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zr("You must provide either an email or phone number and a type")}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mn}):await this._useSession(async t=>{var s,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ln}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:mn})})}catch(t){if(te(t))return Cb(t)&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new ln;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await is(this.storage,this.storageKey));const{data:l,error:u}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:mn});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return _l(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ln;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=_l(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(te(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ln;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Lt())throw new Hr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new yl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yl("No code detected.");const{data:k,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new Hr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const f=d-u;f*1e3<=Us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:m,error:g}=await this._getUser(i);if(g)throw g;const y={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(s){if(te(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Br(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Tb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=cb(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await is(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Lt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(te(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await fb(async r=>(r>0&&await db(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:un})),(r,i)=>{const o=200*Math.pow(2,r);return i&&po(i)&&Date.now()+o-s<Us})}catch(s){if(this._debug(t,"error",s),te(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Lt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Br(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+gl;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${gl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),po(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new to;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ln;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),te(i)){const o={session:null,error:i};return po(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nd(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Wr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lt()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Us}ms, refresh threshold is ${Cl} ticks`),r<=Cl&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await is(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await le(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&((r=c==null?void 0:c.totp)===null||r===void 0?void 0:r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}vr.nextInstanceID=0;const Vb=vr;class Ub extends Vb{constructor(e){super(e)}}var qb=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class Bb{constructor(e,t,s){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=nb(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:K0,realtime:Y0,auth:Object.assign(Object.assign({},J0),{storageKey:c}),global:G0},u=sb(s!=null?s:{},l);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=eb(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new m0(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new zw(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new W0(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return qb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,lock:a,debug:c},l,u){var h;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ub({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(e){return new I0(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wb=(n,e,t)=>new Bb(n,e,t),zb="https://xwajagoyuqwubxjydant.supabase.co",Hb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3YWphZ295dXF3dWJ4anlkYW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxNzQ1NDYsImV4cCI6MjA1MTc1MDU0Nn0.d7vcjZnoHqK-7m16QHUjSoruQv0TVqqJoLs6zcELfKU",kl=Wb(zb,Hb),Gb=Up("recordStore",()=>{const n=ct(new Map);async function e(){const{data:s,error:r}=await kl.from("records").select("*");r?console.error("Error fetching messages:",r):(console.log({data:s}),s.forEach(({id:i,...o})=>n.value.set(i,{title:o.title,description:o.description,record:o.record,createTime:o.create_time})))}async function t(s,r){const{data:i,error:o}=await kl.from("records").insert([{title:s.title,description:s.description,record:r}]).select();o?console.error("Error saving record:",o):(n.value.set(i[0].id,{title:i[0].title,description:i[0].description,record:i[0].record,createTime:i[0].create_time}),console.log("Record saved successfully:",i[0]))}return{records:n,getAllRecords:e,saveRecord:t}}),Kb=br({__name:"TheSticker",props:{title:null,description:null},emits:["update:play"],setup(n,{emit:e}){return(t,s)=>(Et(),vn("div",{class:"sticker",onClick:s[0]||(s[0]=r=>e("update:play"))},oc(n.title)+" - "+oc(n.description),1))}});const Jb=Ki(Kb,[["__scopeId","data-v-0f46185e"]]),nc=n=>(su("data-v-3469d247"),n=n(),ru(),n),Yb=["onClick"],Zb={class:"dialog"},Xb=nc(()=>tt("h3",{style:{"margin-bottom":"0.5rem","text-align":"center"}}," \u{1F427} \u5B8C\u7F8E\uFF01 ",-1)),Qb=nc(()=>tt("label",{for:"title"},"Title:",-1)),eT=nc(()=>tt("label",{for:"description"},"Description:",-1)),tT=br({__name:"TheDialog",emits:["submit"],setup(n,{expose:e,emit:t}){const s=ct(!1),r=ct(""),i=ct("");e({open:()=>{s.value=!0}});const a=()=>{s.value=!1,c()},c=()=>{r.value="",i.value=""},l=()=>{const u={title:r.value,description:i.value};t("submit",u),a()};return(u,h)=>(Et(),ya(Ta,{name:"fade"},{default:da(()=>[s.value?(Et(),vn("div",{key:0,class:"dialog-overlay",onClick:Ip(a,["self"])},[tt("div",Zb,[Xb,Qb,vc(tt("input",{"onUpdate:modelValue":h[0]||(h[0]=d=>r.value=d),id:"title",type:"text",placeholder:"Enter title",onKeydown:h[1]||(h[1]=d=>d.stopPropagation())},null,544),[[qc,r.value]]),eT,vc(tt("textarea",{"onUpdate:modelValue":h[2]||(h[2]=d=>i.value=d),id:"description",placeholder:"Enter description",onKeydown:h[3]||(h[3]=d=>d.stopPropagation())},null,544),[[qc,i.value]]),tt("div",{class:"button-group"},[tt("button",{onClick:l,class:"submit-btn"},"Submit"),tt("button",{onClick:a,class:"cancel-btn"},"Cancel")])])],8,Yb)):Kf("",!0)]),_:1}))}});const nT=Ki(tT,[["__scopeId","data-v-3469d247"]]),sT=n=>(su("data-v-b2e88f74"),n=n(),ru(),n),rT={style:{margin:"auto"}},iT={class:"penguin"},oT=sT(()=>tt("h2",null,"Enter information",-1)),aT=br({__name:"MainStage",setup(n){const e=ct(!1),t=Gb(),s=ba(()=>t.records),r=ct(),i=ct(),o=ct(0);fa(()=>{t.getAllRecords()});function a(){e.value?l():c()}function c(){e.value=!0,o.value=0}function l(){if(e.value=!1,!i.value)return;const p=window.getComputedStyle(i.value),m=new DOMMatrix(p.transform);o.value=m.m42,i.value.style.transform=`translateY(${o.value}px)`,requestAnimationFrame(()=>{!i.value||(i.value.style.transform="translateY(0)")})}function u(p){var m;r.value=p,(m=d.value)==null||m.open()}function h(p){const m=p==null?void 0:p.record;if(!!m)for(const g of m)qo.triggerAttackRelease(g.name,g.duration,Bs()+g.startTime)}const d=ct();async function f(p){!r.value||r.value.length<=2||await t.saveRecord(p,r.value)}return(p,m)=>(Et(),vn("div",rT,[(Et(!0),vn(dt,null,du(la(s),([g,y])=>(Et(),vn("div",{key:g},[We(Jb,{title:y.title,description:y.description,"onUpdate:play":k=>h(y)},null,8,["title","description","onUpdate:play"])]))),128)),tt("div",iT,[tt("img",{ref_key:"penguin",ref:i,class:wr(e.value?"penguin-jump":""),src:qp,alt:"pengUIn",draggable:"false",onClick:a},null,2)]),We(jw,{"is-recording":e.value,"onUpdate:record":m[0]||(m[0]=g=>u(g))},null,8,["is-recording"]),We(nT,{style:{"z-index":"12"},ref_key:"dialog",ref:d,onSubmit:f},{default:da(()=>[oT]),_:1},512)]))}});const cT=Ki(aT,[["__scopeId","data-v-b2e88f74"]]),lT=br({__name:"App",setup(n){return(e,t)=>(Et(),ya(cT))}});const id=Rp(lT);id.use(Fp());id.mount("#app");
