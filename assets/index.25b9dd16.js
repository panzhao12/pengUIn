(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xa(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const pe={},bs=[],Rt=()=>{},qd=()=>!1,Hi=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Oa=n=>n.startsWith("onUpdate:"),Me=Object.assign,Ea=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Bd=Object.prototype.hasOwnProperty,de=(n,e)=>Bd.call(n,e),X=Array.isArray,Ts=n=>zi(n)==="[object Map]",Wl=n=>zi(n)==="[object Set]",te=n=>typeof n=="function",Ne=n=>typeof n=="string",Dn=n=>typeof n=="symbol",Ce=n=>n!==null&&typeof n=="object",Hl=n=>(Ce(n)||te(n))&&te(n.then)&&te(n.catch),zl=Object.prototype.toString,zi=n=>zl.call(n),Wd=n=>zi(n).slice(8,-1),Gl=n=>zi(n)==="[object Object]",Ia=n=>Ne(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Qs=xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gi=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Hd=/-(\w)/g,In=Gi(n=>n.replace(Hd,(e,t)=>t?t.toUpperCase():"")),zd=/\B([A-Z])/g,os=Gi(n=>n.replace(zd,"-$1").toLowerCase()),Kl=Gi(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ao=Gi(n=>n?`on${Kl(n)}`:""),An=(n,e)=>!Object.is(n,e),di=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Jl=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},Go=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Gd=n=>{const e=Ne(n)?Number(n):NaN;return isNaN(e)?n:e};let kc;const Mr=()=>kc||(kc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ki(n){if(X(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=Ne(s)?Zd(s):Ki(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Ne(n)||Ce(n))return n}const Kd=/;(?![^(]*\))/g,Jd=/:([^]+)/,Yd=/\/\*[^]*?\*\//g;function Zd(n){const e={};return n.replace(Yd,"").split(Kd).forEach(t=>{if(t){const s=t.split(Jd);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Fr(n){let e="";if(Ne(n))e=n;else if(X(n))for(let t=0;t<n.length;t++){const s=Fr(n[t]);s&&(e+=s+" ")}else if(Ce(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Xd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qd=xa(Xd);function Yl(n){return!!n||n===""}const Zl=n=>!!(n&&n.__v_isRef===!0),Ko=n=>Ne(n)?n:n==null?"":X(n)||Ce(n)&&(n.toString===zl||!te(n.toString))?Zl(n)?Ko(n.value):JSON.stringify(n,Xl,2):String(n),Xl=(n,e)=>Zl(e)?Xl(n,e.value):Ts(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[xo(s,i)+" =>"]=r,t),{})}:Wl(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>xo(t))}:Dn(e)?xo(e):Ce(e)&&!X(e)&&!Gl(e)?String(e):e,xo=(n,e="")=>{var t;return Dn(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ze;class Ql{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ze,!e&&Ze&&(this.index=(Ze.scopes||(Ze.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Ze;try{return Ze=this,e()}finally{Ze=t}}}on(){Ze=this}off(){Ze=this.parent}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function eu(n){return new Ql(n)}function tu(){return Ze}function ef(n,e=!1){Ze&&Ze.cleanups.push(n)}let we;const Oo=new WeakSet;class nu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ze&&Ze.active&&Ze.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Oo.has(this)&&(Oo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ru(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ac(this),iu(this);const e=we,t=Pt;we=this,Pt=!0;try{return this.fn()}finally{ou(this),we=e,Pt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Pa(e);this.deps=this.depsTail=void 0,Ac(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Oo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Jo(this)&&this.run()}get dirty(){return Jo(this)}}let su=0,er,tr;function ru(n,e=!1){if(n.flags|=8,e){n.next=tr,tr=n;return}n.next=er,er=n}function Na(){su++}function Ra(){if(--su>0)return;if(tr){let e=tr;for(tr=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;er;){let e=er;for(er=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function iu(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ou(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),Pa(s),tf(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Jo(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(au(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function au(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===hr))return;n.globalVersion=hr;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Jo(n)){n.flags&=-3;return}const t=we,s=Pt;we=n,Pt=!0;try{iu(n);const r=n.fn(n._value);(e.version===0||An(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{we=t,Pt=s,ou(n),n.flags&=-3}}function Pa(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Pa(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function tf(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Pt=!0;const cu=[];function Mn(){cu.push(Pt),Pt=!1}function Fn(){const n=cu.pop();Pt=n===void 0?!0:n}function Ac(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=we;we=void 0;try{e()}finally{we=t}}}let hr=0;class nf{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ji{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!we||!Pt||we===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==we)t=this.activeLink=new nf(we,this),we.deps?(t.prevDep=we.depsTail,we.depsTail.nextDep=t,we.depsTail=t):we.deps=we.depsTail=t,lu(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=we.depsTail,t.nextDep=void 0,we.depsTail.nextDep=t,we.depsTail=t,we.deps===t&&(we.deps=s)}return t}trigger(e){this.version++,hr++,this.notify(e)}notify(e){Na();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Ra()}}}function lu(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)lu(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const vi=new WeakMap,Jn=Symbol(""),Yo=Symbol(""),dr=Symbol("");function He(n,e,t){if(Pt&&we){let s=vi.get(n);s||vi.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new Ji),r.map=s,r.key=t),r.track()}}function on(n,e,t,s,r,i){const o=vi.get(n);if(!o){hr++;return}const a=c=>{c&&c.trigger()};if(Na(),e==="clear")o.forEach(a);else{const c=X(n),l=c&&Ia(t);if(c&&t==="length"){const u=Number(s);o.forEach((h,d)=>{(d==="length"||d===dr||!Dn(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),l&&a(o.get(dr)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Jn)),Ts(n)&&a(o.get(Yo)));break;case"delete":c||(a(o.get(Jn)),Ts(n)&&a(o.get(Yo)));break;case"set":Ts(n)&&a(o.get(Jn));break}}Ra()}function sf(n,e){const t=vi.get(n);return t&&t.get(e)}function ds(n){const e=ue(n);return e===n?e:(He(e,"iterate",dr),kt(n)?e:e.map(ze))}function Yi(n){return He(n=ue(n),"iterate",dr),n}const rf={__proto__:null,[Symbol.iterator](){return Eo(this,Symbol.iterator,ze)},concat(...n){return ds(this).concat(...n.map(e=>X(e)?ds(e):e))},entries(){return Eo(this,"entries",n=>(n[1]=ze(n[1]),n))},every(n,e){return en(this,"every",n,e,void 0,arguments)},filter(n,e){return en(this,"filter",n,e,t=>t.map(ze),arguments)},find(n,e){return en(this,"find",n,e,ze,arguments)},findIndex(n,e){return en(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return en(this,"findLast",n,e,ze,arguments)},findLastIndex(n,e){return en(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return en(this,"forEach",n,e,void 0,arguments)},includes(...n){return Io(this,"includes",n)},indexOf(...n){return Io(this,"indexOf",n)},join(n){return ds(this).join(n)},lastIndexOf(...n){return Io(this,"lastIndexOf",n)},map(n,e){return en(this,"map",n,e,void 0,arguments)},pop(){return zs(this,"pop")},push(...n){return zs(this,"push",n)},reduce(n,...e){return xc(this,"reduce",n,e)},reduceRight(n,...e){return xc(this,"reduceRight",n,e)},shift(){return zs(this,"shift")},some(n,e){return en(this,"some",n,e,void 0,arguments)},splice(...n){return zs(this,"splice",n)},toReversed(){return ds(this).toReversed()},toSorted(n){return ds(this).toSorted(n)},toSpliced(...n){return ds(this).toSpliced(...n)},unshift(...n){return zs(this,"unshift",n)},values(){return Eo(this,"values",ze)}};function Eo(n,e,t){const s=Yi(n),r=s[e]();return s!==n&&!kt(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=t(i.value)),i}),r}const of=Array.prototype;function en(n,e,t,s,r,i){const o=Yi(n),a=o!==n&&!kt(n),c=o[e];if(c!==of[e]){const h=c.apply(n,i);return a?ze(h):h}let l=t;o!==n&&(a?l=function(h,d){return t.call(this,ze(h),d,n)}:t.length>2&&(l=function(h,d){return t.call(this,h,d,n)}));const u=c.call(o,l,s);return a&&r?r(u):u}function xc(n,e,t,s){const r=Yi(n);let i=t;return r!==n&&(kt(n)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,n)}):i=function(o,a,c){return t.call(this,o,ze(a),c,n)}),r[e](i,...s)}function Io(n,e,t){const s=ue(n);He(s,"iterate",dr);const r=s[e](...t);return(r===-1||r===!1)&&Fa(t[0])?(t[0]=ue(t[0]),s[e](...t)):r}function zs(n,e,t=[]){Mn(),Na();const s=ue(n)[e].apply(n,t);return Ra(),Fn(),s}const af=xa("__proto__,__v_isRef,__isVue"),uu=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Dn));function cf(n){Dn(n)||(n=String(n));const e=ue(this);return He(e,"has",n),e.hasOwnProperty(n)}class hu{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?vf:mu:i?pu:fu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=X(e);if(!r){let c;if(o&&(c=rf[t]))return c;if(t==="hasOwnProperty")return cf}const a=Reflect.get(e,t,xe(e)?e:s);return(Dn(t)?uu.has(t):af(t))||(r||He(e,"get",t),i)?a:xe(a)?o&&Ia(t)?a:a.value:Ce(a)?r?gu(a):Zi(a):a}}class du extends hu{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const c=Xn(i);if(!kt(s)&&!Xn(s)&&(i=ue(i),s=ue(s)),!X(e)&&xe(i)&&!xe(s))return c?!1:(i.value=s,!0)}const o=X(e)&&Ia(t)?Number(t)<e.length:de(e,t),a=Reflect.set(e,t,s,xe(e)?e:r);return e===ue(r)&&(o?An(s,i)&&on(e,"set",t,s):on(e,"add",t,s)),a}deleteProperty(e,t){const s=de(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&on(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Dn(t)||!uu.has(t))&&He(e,"has",t),s}ownKeys(e){return He(e,"iterate",X(e)?"length":Jn),Reflect.ownKeys(e)}}class lf extends hu{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const uf=new du,hf=new lf,df=new du(!0);const Zo=n=>n,ei=n=>Reflect.getPrototypeOf(n);function ff(n,e,t){return function(...s){const r=this.__v_raw,i=ue(r),o=Ts(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=t?Zo:e?Xo:ze;return!e&&He(i,"iterate",c?Yo:Jn),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ti(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function pf(n,e){const t={get(r){const i=this.__v_raw,o=ue(i),a=ue(r);n||(An(r,a)&&He(o,"get",r),He(o,"get",a));const{has:c}=ei(o),l=e?Zo:n?Xo:ze;if(c.call(o,r))return l(i.get(r));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&He(ue(r),"iterate",Jn),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=ue(i),a=ue(r);return n||(An(r,a)&&He(o,"has",r),He(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=ue(a),l=e?Zo:n?Xo:ze;return!n&&He(c,"iterate",Jn),a.forEach((u,h)=>r.call(i,l(u),l(h),o))}};return Me(t,n?{add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear")}:{add(r){!e&&!kt(r)&&!Xn(r)&&(r=ue(r));const i=ue(this);return ei(i).has.call(i,r)||(i.add(r),on(i,"add",r,r)),this},set(r,i){!e&&!kt(i)&&!Xn(i)&&(i=ue(i));const o=ue(this),{has:a,get:c}=ei(o);let l=a.call(o,r);l||(r=ue(r),l=a.call(o,r));const u=c.call(o,r);return o.set(r,i),l?An(i,u)&&on(o,"set",r,i):on(o,"add",r,i),this},delete(r){const i=ue(this),{has:o,get:a}=ei(i);let c=o.call(i,r);c||(r=ue(r),c=o.call(i,r)),a&&a.call(i,r);const l=i.delete(r);return c&&on(i,"delete",r,void 0),l},clear(){const r=ue(this),i=r.size!==0,o=r.clear();return i&&on(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=ff(r,n,e)}),t}function Da(n,e){const t=pf(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(de(t,r)&&r in s?t:s,r,i)}const mf={get:Da(!1,!1)},gf={get:Da(!1,!0)},_f={get:Da(!0,!1)};const fu=new WeakMap,pu=new WeakMap,mu=new WeakMap,vf=new WeakMap;function yf(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wf(n){return n.__v_skip||!Object.isExtensible(n)?0:yf(Wd(n))}function Zi(n){return Xn(n)?n:Ma(n,!1,uf,mf,fu)}function bf(n){return Ma(n,!1,df,gf,pu)}function gu(n){return Ma(n,!0,hf,_f,mu)}function Ma(n,e,t,s,r){if(!Ce(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=wf(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function xn(n){return Xn(n)?xn(n.__v_raw):!!(n&&n.__v_isReactive)}function Xn(n){return!!(n&&n.__v_isReadonly)}function kt(n){return!!(n&&n.__v_isShallow)}function Fa(n){return n?!!n.__v_raw:!1}function ue(n){const e=n&&n.__v_raw;return e?ue(e):n}function fr(n){return!de(n,"__v_skip")&&Object.isExtensible(n)&&Jl(n,"__v_skip",!0),n}const ze=n=>Ce(n)?Zi(n):n,Xo=n=>Ce(n)?gu(n):n;function xe(n){return n?n.__v_isRef===!0:!1}function et(n){return _u(n,!1)}function Tf(n){return _u(n,!0)}function _u(n,e){return xe(n)?n:new Cf(n,e)}class Cf{constructor(e,t){this.dep=new Ji,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ue(e),this._value=t?e:ze(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||kt(e)||Xn(e);e=s?e:ue(e),An(e,t)&&(this._rawValue=e,this._value=s?e:ze(e),this.dep.trigger())}}function jr(n){return xe(n)?n.value:n}function Fe(n){return te(n)?n():jr(n)}const Sf={get:(n,e,t)=>e==="__v_raw"?n:jr(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return xe(r)&&!xe(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function vu(n){return xn(n)?n:new Proxy(n,Sf)}class kf{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Ji,{get:s,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=s,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Af(n){return new kf(n)}function yu(n){const e=X(n)?new Array(n.length):{};for(const t in n)e[t]=Of(n,t);return e}class xf{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return sf(ue(this._object),this._key)}}function Of(n,e,t){const s=n[e];return xe(s)?s:new xf(n,e,t)}class Ef{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ji(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&we!==this)return ru(this,!0),!0}get value(){const e=this.dep.track();return au(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function If(n,e,t=!1){let s,r;return te(n)?s=n:(s=n.get,r=n.set),new Ef(s,r,t)}const ni={},yi=new WeakMap;let Wn;function Nf(n,e=!1,t=Wn){if(t){let s=yi.get(t);s||yi.set(t,s=[]),s.push(n)}}function Rf(n,e,t=pe){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=t,l=A=>r?A:kt(A)||r===!1||r===0?an(A,1):an(A);let u,h,d,f,p=!1,m=!1;if(xe(n)?(h=()=>n.value,p=kt(n)):xn(n)?(h=()=>l(n),p=!0):X(n)?(m=!0,p=n.some(A=>xn(A)||kt(A)),h=()=>n.map(A=>{if(xe(A))return A.value;if(xn(A))return l(A);if(te(A))return c?c(A,2):A()})):te(n)?e?h=c?()=>c(n,2):n:h=()=>{if(d){Mn();try{d()}finally{Fn()}}const A=Wn;Wn=u;try{return c?c(n,3,[f]):n(f)}finally{Wn=A}}:h=Rt,e&&r){const A=h,_=r===!0?1/0:r;h=()=>an(A(),_)}const g=tu(),v=()=>{u.stop(),g&&g.active&&Ea(g.effects,u)};if(i&&e){const A=e;e=(..._)=>{A(..._),v()}}let S=m?new Array(n.length).fill(ni):ni;const I=A=>{if(!(!(u.flags&1)||!u.dirty&&!A))if(e){const _=u.run();if(r||p||(m?_.some((x,w)=>An(x,S[w])):An(_,S))){d&&d();const x=Wn;Wn=u;try{const w=[_,S===ni?void 0:m&&S[0]===ni?[]:S,f];c?c(e,3,w):e(...w),S=_}finally{Wn=x}}}else u.run()};return a&&a(I),u=new nu(h),u.scheduler=o?()=>o(I,!1):I,f=A=>Nf(A,!1,u),d=u.onStop=()=>{const A=yi.get(u);if(A){if(c)c(A,4);else for(const _ of A)_();yi.delete(u)}},e?s?I(!0):S=u.run():o?o(I.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function an(n,e=1/0,t){if(e<=0||!Ce(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,xe(n))an(n.value,e,t);else if(X(n))for(let s=0;s<n.length;s++)an(n[s],e,t);else if(Wl(n)||Ts(n))n.forEach(s=>{an(s,e,t)});else if(Gl(n)){for(const s in n)an(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&an(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lr(n,e,t,s){try{return s?n(...s):n()}catch(r){Xi(r,e,t)}}function Mt(n,e,t,s){if(te(n)){const r=Lr(n,e,t,s);return r&&Hl(r)&&r.catch(i=>{Xi(i,e,t)}),r}if(X(n)){const r=[];for(let i=0;i<n.length;i++)r.push(Mt(n[i],e,t,s));return r}}function Xi(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||pe;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,c,l)===!1)return}a=a.parent}if(i){Mn(),Lr(i,null,10,[n,c,l]),Fn();return}}Pf(n,t,r,s,o)}function Pf(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const Xe=[];let zt=-1;const Cs=[];let yn=null,_s=0;const wu=Promise.resolve();let wi=null;function bu(n){const e=wi||wu;return n?e.then(this?n.bind(this):n):e}function Df(n){let e=zt+1,t=Xe.length;for(;e<t;){const s=e+t>>>1,r=Xe[s],i=pr(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function ja(n){if(!(n.flags&1)){const e=pr(n),t=Xe[Xe.length-1];!t||!(n.flags&2)&&e>=pr(t)?Xe.push(n):Xe.splice(Df(e),0,n),n.flags|=1,Tu()}}function Tu(){wi||(wi=wu.then(Su))}function Mf(n){X(n)?Cs.push(...n):yn&&n.id===-1?yn.splice(_s+1,0,n):n.flags&1||(Cs.push(n),n.flags|=1),Tu()}function Oc(n,e,t=zt+1){for(;t<Xe.length;t++){const s=Xe[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Xe.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Cu(n){if(Cs.length){const e=[...new Set(Cs)].sort((t,s)=>pr(t)-pr(s));if(Cs.length=0,yn){yn.push(...e);return}for(yn=e,_s=0;_s<yn.length;_s++){const t=yn[_s];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}yn=null,_s=0}}const pr=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Su(n){const e=Rt;try{for(zt=0;zt<Xe.length;zt++){const t=Xe[zt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Lr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zt<Xe.length;zt++){const t=Xe[zt];t&&(t.flags&=-2)}zt=-1,Xe.length=0,Cu(),wi=null,(Xe.length||Cs.length)&&Su()}}let _t=null,ku=null;function bi(n){const e=_t;return _t=n,ku=n&&n.type.__scopeId||null,e}function La(n,e=_t,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Lc(-1);const i=bi(e);let o;try{o=n(...r)}finally{bi(i),s._d&&Lc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ec(n,e){if(_t===null)return n;const t=io(_t),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=pe]=e[r];i&&(te(i)&&(i={mounted:i,updated:i}),i.deep&&an(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function $n(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Mn(),Mt(c,t,8,[n.el,a,n,e]),Fn())}}const Ff=Symbol("_vte"),Au=n=>n.__isTeleport,wn=Symbol("_leaveCb"),si=Symbol("_enterCb");function jf(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $a(()=>{n.isMounted=!0}),Mu(()=>{n.isUnmounting=!0}),n}const wt=[Function,Array],xu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wt,onEnter:wt,onAfterEnter:wt,onEnterCancelled:wt,onBeforeLeave:wt,onLeave:wt,onAfterLeave:wt,onLeaveCancelled:wt,onBeforeAppear:wt,onAppear:wt,onAfterAppear:wt,onAppearCancelled:wt},Ou=n=>{const e=n.subTree;return e.component?Ou(e.component):e},Lf={name:"BaseTransition",props:xu,setup(n,{slots:e}){const t=ro(),s=jf();return()=>{const r=e.default&&Nu(e.default(),!0);if(!r||!r.length)return;const i=Eu(r),o=ue(n),{mode:a}=o;if(s.isLeaving)return No(i);const c=Ic(i);if(!c)return No(i);let l=Qo(c,o,s,t,h=>l=h);c.type!==lt&&mr(c,l);let u=t.subTree&&Ic(t.subTree);if(u&&u.type!==lt&&!zn(c,u)&&Ou(t).type!==lt){let h=Qo(u,o,s,t);if(mr(u,h),a==="out-in"&&c.type!==lt)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete h.afterLeave,u=void 0},No(i);a==="in-out"&&c.type!==lt?h.delayLeave=(d,f,p)=>{const m=Iu(s,u);m[String(u.key)]=u,d[wn]=()=>{f(),d[wn]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Eu(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==lt){e=t;break}}return e}const $f=Lf;function Iu(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Qo(n,e,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:S,onAppearCancelled:I}=e,A=String(n.key),_=Iu(t,n),x=(O,N)=>{O&&Mt(O,s,9,N)},w=(O,N)=>{const R=N[1];x(O,N),X(O)?O.every(k=>k.length<=1)&&R():O.length<=1&&R()},C={mode:o,persisted:a,beforeEnter(O){let N=c;if(!t.isMounted)if(i)N=g||c;else return;O[wn]&&O[wn](!0);const R=_[A];R&&zn(n,R)&&R.el[wn]&&R.el[wn](),x(N,[O])},enter(O){let N=l,R=u,k=h;if(!t.isMounted)if(i)N=v||l,R=S||u,k=I||h;else return;let L=!1;const $=O[si]=H=>{L||(L=!0,H?x(k,[O]):x(R,[O]),C.delayedLeave&&C.delayedLeave(),O[si]=void 0)};N?w(N,[O,$]):$()},leave(O,N){const R=String(n.key);if(O[si]&&O[si](!0),t.isUnmounting)return N();x(d,[O]);let k=!1;const L=O[wn]=$=>{k||(k=!0,N(),$?x(m,[O]):x(p,[O]),O[wn]=void 0,_[R]===n&&delete _[R])};_[R]=n,f?w(f,[O,L]):L()},clone(O){const N=Qo(O,e,t,s,r);return r&&r(N),N}};return C}function No(n){if(Qi(n))return n=Nn(n),n.children=null,n}function Ic(n){if(!Qi(n))return Au(n.type)&&n.children?Eu(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&te(t.default))return t.default()}}function mr(n,e){n.shapeFlag&6&&n.component?(n.transition=e,mr(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Nu(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===bt?(o.patchFlag&128&&r++,s=s.concat(Nu(o.children,e,a))):(e||o.type!==lt)&&s.push(a!=null?Nn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function $r(n,e){return te(n)?(()=>Me({name:n.name},e,{setup:n}))():n}function Ru(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Pu(n){const e=ro(),t=Tf(null);if(e){const r=e.refs===pe?e.refs={}:e.refs;Object.defineProperty(r,n,{enumerable:!0,get:()=>t.value,set:i=>t.value=i})}return t}function Ti(n,e,t,s,r=!1){if(X(n)){n.forEach((p,m)=>Ti(p,e&&(X(e)?e[m]:e),t,s,r));return}if(nr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ti(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?io(s.component):s.el,o=r?null:i,{i:a,r:c}=n,l=e&&e.r,u=a.refs===pe?a.refs={}:a.refs,h=a.setupState,d=ue(h),f=h===pe?()=>!1:p=>de(d,p);if(l!=null&&l!==c&&(Ne(l)?(u[l]=null,f(l)&&(h[l]=null)):xe(l)&&(l.value=null)),te(c))Lr(c,a,12,[o,u]);else{const p=Ne(c),m=xe(c);if(p||m){const g=()=>{if(n.f){const v=p?f(c)?h[c]:u[c]:c.value;r?X(v)&&Ea(v,i):X(v)?v.includes(i)||v.push(i):p?(u[c]=[i],f(c)&&(h[c]=u[c])):(c.value=[i],n.k&&(u[n.k]=c.value))}else p?(u[c]=o,f(c)&&(h[c]=o)):m&&(c.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,mt(g,t)):g()}}}Mr().requestIdleCallback;Mr().cancelIdleCallback;const nr=n=>!!n.type.__asyncLoader,Qi=n=>n.type.__isKeepAlive;function Vf(n,e){Du(n,"a",e)}function Uf(n,e){Du(n,"da",e)}function Du(n,e,t=Ge){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(eo(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Qi(r.parent.vnode)&&qf(s,e,t,r),r=r.parent}}function qf(n,e,t,s){const r=eo(e,n,s,!0);Va(()=>{Ea(s[e],r)},t)}function eo(n,e,t=Ge,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Mn();const a=Vr(t),c=Mt(e,t,n,o);return a(),Fn(),c});return s?r.unshift(i):r.push(i),i}}const hn=n=>(e,t=Ge)=>{(!_r||n==="sp")&&eo(n,(...s)=>e(...s),t)},Bf=hn("bm"),$a=hn("m"),Wf=hn("bu"),Hf=hn("u"),Mu=hn("bum"),Va=hn("um"),zf=hn("sp"),Gf=hn("rtg"),Kf=hn("rtc");function Jf(n,e=Ge){eo("ec",n,e)}const Yf=Symbol.for("v-ndc");function Fu(n,e,t,s){let r;const i=t&&t[s],o=X(n);if(o||Ne(n)){const a=o&&xn(n);let c=!1;a&&(c=!kt(n),n=Yi(n)),r=new Array(n.length);for(let l=0,u=n.length;l<u;l++)r[l]=e(c?ze(n[l]):n[l],l,void 0,i&&i[l])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i&&i[a])}else if(Ce(n))if(n[Symbol.iterator])r=Array.from(n,(a,c)=>e(a,c,void 0,i&&i[c]));else{const a=Object.keys(n);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=e(n[u],u,c,i&&i[c])}}else r=[];return t&&(t[s]=r),r}const ea=n=>n?nh(n)?io(n):ea(n.parent):null,sr=Me(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>ea(n.parent),$root:n=>ea(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Ua(n),$forceUpdate:n=>n.f||(n.f=()=>{ja(n.update)}),$nextTick:n=>n.n||(n.n=bu.bind(n.proxy)),$watch:n=>yp.bind(n)}),Ro=(n,e)=>n!==pe&&!n.__isScriptSetup&&de(n,e),Zf={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Ro(s,e))return o[e]=1,s[e];if(r!==pe&&de(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&de(l,e))return o[e]=3,i[e];if(t!==pe&&de(t,e))return o[e]=4,t[e];ta&&(o[e]=0)}}const u=sr[e];let h,d;if(u)return e==="$attrs"&&He(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==pe&&de(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,de(d,e))return d[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Ro(r,e)?(r[e]=t,!0):s!==pe&&de(s,e)?(s[e]=t,!0):de(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==pe&&de(n,o)||Ro(e,o)||(a=i[0])&&de(a,o)||de(s,o)||de(sr,o)||de(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:de(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Nc(n){return X(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let ta=!0;function Xf(n){const e=Ua(n),t=n.proxy,s=n.ctx;ta=!1,e.beforeCreate&&Rc(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:S,destroyed:I,unmounted:A,render:_,renderTracked:x,renderTriggered:w,errorCaptured:C,serverPrefetch:O,expose:N,inheritAttrs:R,components:k,directives:L,filters:$}=e;if(l&&Qf(l,s,null),o)for(const q in o){const z=o[q];te(z)&&(s[q]=z.bind(t))}if(r){const q=r.call(t,t);Ce(q)&&(n.data=Zi(q))}if(ta=!0,i)for(const q in i){const z=i[q],G=te(z)?z.bind(t,t):te(z.get)?z.get.bind(t,t):Rt,ee=!te(z)&&te(z.set)?z.set.bind(t):Rt,Z=Es({get:G,set:ee});Object.defineProperty(s,q,{enumerable:!0,configurable:!0,get:()=>Z.value,set:re=>Z.value=re})}if(a)for(const q in a)ju(a[q],s,t,q);if(c){const q=te(c)?c.call(t):c;Reflect.ownKeys(q).forEach(z=>{ip(z,q[z])})}u&&Rc(u,n,"c");function U(q,z){X(z)?z.forEach(G=>q(G.bind(t))):z&&q(z.bind(t))}if(U(Bf,h),U($a,d),U(Wf,f),U(Hf,p),U(Vf,m),U(Uf,g),U(Jf,C),U(Kf,x),U(Gf,w),U(Mu,S),U(Va,A),U(zf,O),X(N))if(N.length){const q=n.exposed||(n.exposed={});N.forEach(z=>{Object.defineProperty(q,z,{get:()=>t[z],set:G=>t[z]=G})})}else n.exposed||(n.exposed={});_&&n.render===Rt&&(n.render=_),R!=null&&(n.inheritAttrs=R),k&&(n.components=k),L&&(n.directives=L),O&&Ru(n)}function Qf(n,e,t=Rt){X(n)&&(n=na(n));for(const s in n){const r=n[s];let i;Ce(r)?"default"in r?i=rr(r.from||s,r.default,!0):i=rr(r.from||s):i=rr(r),xe(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Rc(n,e,t){Mt(X(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function ju(n,e,t,s){let r=s.includes(".")?Zu(t,s):()=>t[s];if(Ne(n)){const i=e[n];te(i)&&ks(r,i)}else if(te(n))ks(r,n.bind(t));else if(Ce(n))if(X(n))n.forEach(i=>ju(i,e,t,s));else{const i=te(n.handler)?n.handler.bind(t):e[n.handler];te(i)&&ks(r,i,n)}}function Ua(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(l=>Ci(c,l,o,!0)),Ci(c,e,o)),Ce(e)&&i.set(e,c),c}function Ci(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Ci(n,i,t,!0),r&&r.forEach(o=>Ci(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=ep[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const ep={data:Pc,props:Dc,emits:Dc,methods:Ys,computed:Ys,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:Ys,directives:Ys,watch:np,provide:Pc,inject:tp};function Pc(n,e){return e?n?function(){return Me(te(n)?n.call(this,this):n,te(e)?e.call(this,this):e)}:e:n}function tp(n,e){return Ys(na(n),na(e))}function na(n){if(X(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ye(n,e){return n?[...new Set([].concat(n,e))]:e}function Ys(n,e){return n?Me(Object.create(null),n,e):e}function Dc(n,e){return n?X(n)&&X(e)?[...new Set([...n,...e])]:Me(Object.create(null),Nc(n),Nc(e!=null?e:{})):e}function np(n,e){if(!n)return e;if(!e)return n;const t=Me(Object.create(null),n);for(const s in e)t[s]=Ye(n[s],e[s]);return t}function Lu(){return{app:null,config:{isNativeTag:qd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sp=0;function rp(n,e){return function(s,r=null){te(s)||(s=Me({},s)),r!=null&&!Ce(r)&&(r=null);const i=Lu(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:sp++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:qp,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&te(u.install)?(o.add(u),u.install(l,...h)):te(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,d){if(!c){const f=l._ceVNode||tt(s,r);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),h&&e?e(f,u):n(f,u,d),c=!0,l._container=u,u.__vue_app__=l,io(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Mt(a,l._instance,16),n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Ss;Ss=l;try{return u()}finally{Ss=h}}};return l}}let Ss=null;function ip(n,e){if(Ge){let t=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===t&&(t=Ge.provides=Object.create(s)),t[n]=e}}function rr(n,e,t=!1){const s=Ge||_t;if(s||Ss){const r=Ss?Ss._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&te(e)?e.call(s&&s.proxy):e}}const $u={},Vu=()=>Object.create($u),Uu=n=>Object.getPrototypeOf(n)===$u;function op(n,e,t,s=!1){const r={},i=Vu();n.propsDefaults=Object.create(null),qu(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:bf(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function ap(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=ue(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(to(n.emitsOptions,d))continue;const f=e[d];if(c)if(de(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=In(d);r[p]=sa(c,a,p,f,n,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{qu(n,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!de(e,h)&&((u=os(h))===h||!de(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=sa(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!de(e,h)&&!0)&&(delete i[h],l=!0)}l&&on(n.attrs,"set","")}function qu(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(Qs(c))continue;const l=e[c];let u;r&&de(r,u=In(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:to(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=ue(t),l=a||pe;for(let u=0;u<i.length;u++){const h=i[u];t[h]=sa(r,c,h,l[h],n,!de(l,h))}}return o}function sa(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=de(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&te(c)){const{propsDefaults:l}=r;if(t in l)s=l[t];else{const u=Vr(r);s=l[t]=c.call(null,e),u()}}else s=c;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===os(t))&&(s=!0))}return s}const cp=new WeakMap;function Bu(n,e,t=!1){const s=t?cp:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!te(n)){const u=h=>{c=!0;const[d,f]=Bu(h,e,!0);Me(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return Ce(n)&&s.set(n,bs),bs;if(X(i))for(let u=0;u<i.length;u++){const h=In(i[u]);Mc(h)&&(o[h]=pe)}else if(i)for(const u in i){const h=In(u);if(Mc(h)){const d=i[u],f=o[h]=X(d)||te(d)?{type:d}:Me({},d),p=f.type;let m=!1,g=!0;if(X(p))for(let v=0;v<p.length;++v){const S=p[v],I=te(S)&&S.name;if(I==="Boolean"){m=!0;break}else I==="String"&&(g=!1)}else m=te(p)&&p.name==="Boolean";f[0]=m,f[1]=g,(m||de(f,"default"))&&a.push(h)}}const l=[o,a];return Ce(n)&&s.set(n,l),l}function Mc(n){return n[0]!=="$"&&!Qs(n)}const Wu=n=>n[0]==="_"||n==="$stable",qa=n=>X(n)?n.map(Gt):[Gt(n)],lp=(n,e,t)=>{if(e._n)return e;const s=La((...r)=>qa(e(...r)),t);return s._c=!1,s},Hu=(n,e,t)=>{const s=n._ctx;for(const r in n){if(Wu(r))continue;const i=n[r];if(te(i))e[r]=lp(r,i,s);else if(i!=null){const o=qa(i);e[r]=()=>o}}},zu=(n,e)=>{const t=qa(e);n.slots.default=()=>t},Gu=(n,e,t)=>{for(const s in e)(t||s!=="_")&&(n[s]=e[s])},up=(n,e,t)=>{const s=n.slots=Vu();if(n.vnode.shapeFlag&32){const r=e._;r?(Gu(s,e,t),t&&Jl(s,"_",r,!0)):Hu(e,s)}else e&&zu(n,e)},hp=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=pe;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:Gu(r,e,t):(i=!e.$stable,Hu(e,r)),o=e}else e&&(zu(n,e),o={default:1});if(i)for(const a in r)!Wu(a)&&o[a]==null&&delete r[a]};function dp(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Mr().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const mt=Ap;function fp(n){return pp(n)}function pp(n,e){dp();const t=Mr();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Rt,insertStaticContent:p}=n,m=(y,T,b,E=null,P=null,D=null,M=void 0,F=null,V=!!T.dynamicChildren)=>{if(y===T)return;y&&!zn(y,T)&&(E=Pe(y),re(y,P,D,!0),y=null),T.patchFlag===-2&&(V=!1,T.dynamicChildren=null);const{type:j,ref:Y,shapeFlag:B}=T;switch(j){case no:g(y,T,b,E);break;case lt:v(y,T,b,E);break;case Mo:y==null&&S(T,b,E,M);break;case bt:k(y,T,b,E,P,D,M,F,V);break;default:B&1?_(y,T,b,E,P,D,M,F,V):B&6?L(y,T,b,E,P,D,M,F,V):(B&64||B&128)&&j.process(y,T,b,E,P,D,M,F,V,it)}Y!=null&&P&&Ti(Y,y&&y.ref,D,T||y,!T)},g=(y,T,b,E)=>{if(y==null)s(T.el=a(T.children),b,E);else{const P=T.el=y.el;T.children!==y.children&&l(P,T.children)}},v=(y,T,b,E)=>{y==null?s(T.el=c(T.children||""),b,E):T.el=y.el},S=(y,T,b,E)=>{[y.el,y.anchor]=p(y.children,T,b,E,y.el,y.anchor)},I=({el:y,anchor:T},b,E)=>{let P;for(;y&&y!==T;)P=d(y),s(y,b,E),y=P;s(T,b,E)},A=({el:y,anchor:T})=>{let b;for(;y&&y!==T;)b=d(y),r(y),y=b;r(T)},_=(y,T,b,E,P,D,M,F,V)=>{T.type==="svg"?M="svg":T.type==="math"&&(M="mathml"),y==null?x(T,b,E,P,D,M,F,V):O(y,T,P,D,M,F,V)},x=(y,T,b,E,P,D,M,F)=>{let V,j;const{props:Y,shapeFlag:B,transition:J,dirs:Q}=y;if(V=y.el=o(y.type,D,Y&&Y.is,Y),B&8?u(V,y.children):B&16&&C(y.children,V,null,E,P,Po(y,D),M,F),Q&&$n(y,null,E,"created"),w(V,y,y.scopeId,M,E),Y){for(const _e in Y)_e!=="value"&&!Qs(_e)&&i(V,_e,null,Y[_e],D,E);"value"in Y&&i(V,"value",null,Y.value,D),(j=Y.onVnodeBeforeMount)&&Wt(j,E,y)}Q&&$n(y,null,E,"beforeMount");const le=mp(P,J);le&&J.beforeEnter(V),s(V,T,b),((j=Y&&Y.onVnodeMounted)||le||Q)&&mt(()=>{j&&Wt(j,E,y),le&&J.enter(V),Q&&$n(y,null,E,"mounted")},P)},w=(y,T,b,E,P)=>{if(b&&f(y,b),E)for(let D=0;D<E.length;D++)f(y,E[D]);if(P){let D=P.subTree;if(T===D||Qu(D.type)&&(D.ssContent===T||D.ssFallback===T)){const M=P.vnode;w(y,M,M.scopeId,M.slotScopeIds,P.parent)}}},C=(y,T,b,E,P,D,M,F,V=0)=>{for(let j=V;j<y.length;j++){const Y=y[j]=F?bn(y[j]):Gt(y[j]);m(null,Y,T,b,E,P,D,M,F)}},O=(y,T,b,E,P,D,M)=>{const F=T.el=y.el;let{patchFlag:V,dynamicChildren:j,dirs:Y}=T;V|=y.patchFlag&16;const B=y.props||pe,J=T.props||pe;let Q;if(b&&Vn(b,!1),(Q=J.onVnodeBeforeUpdate)&&Wt(Q,b,T,y),Y&&$n(T,y,b,"beforeUpdate"),b&&Vn(b,!0),(B.innerHTML&&J.innerHTML==null||B.textContent&&J.textContent==null)&&u(F,""),j?N(y.dynamicChildren,j,F,b,E,Po(T,P),D):M||z(y,T,F,null,b,E,Po(T,P),D,!1),V>0){if(V&16)R(F,B,J,b,P);else if(V&2&&B.class!==J.class&&i(F,"class",null,J.class,P),V&4&&i(F,"style",B.style,J.style,P),V&8){const le=T.dynamicProps;for(let _e=0;_e<le.length;_e++){const fe=le[_e],dt=B[fe],We=J[fe];(We!==dt||fe==="value")&&i(F,fe,dt,We,P,b)}}V&1&&y.children!==T.children&&u(F,T.children)}else!M&&j==null&&R(F,B,J,b,P);((Q=J.onVnodeUpdated)||Y)&&mt(()=>{Q&&Wt(Q,b,T,y),Y&&$n(T,y,b,"updated")},E)},N=(y,T,b,E,P,D,M)=>{for(let F=0;F<T.length;F++){const V=y[F],j=T[F],Y=V.el&&(V.type===bt||!zn(V,j)||V.shapeFlag&70)?h(V.el):b;m(V,j,Y,null,E,P,D,M,!0)}},R=(y,T,b,E,P)=>{if(T!==b){if(T!==pe)for(const D in T)!Qs(D)&&!(D in b)&&i(y,D,T[D],null,P,E);for(const D in b){if(Qs(D))continue;const M=b[D],F=T[D];M!==F&&D!=="value"&&i(y,D,F,M,P,E)}"value"in b&&i(y,"value",T.value,b.value,P)}},k=(y,T,b,E,P,D,M,F,V)=>{const j=T.el=y?y.el:a(""),Y=T.anchor=y?y.anchor:a("");let{patchFlag:B,dynamicChildren:J,slotScopeIds:Q}=T;Q&&(F=F?F.concat(Q):Q),y==null?(s(j,b,E),s(Y,b,E),C(T.children||[],b,Y,P,D,M,F,V)):B>0&&B&64&&J&&y.dynamicChildren?(N(y.dynamicChildren,J,b,P,D,M,F),(T.key!=null||P&&T===P.subTree)&&Ku(y,T,!0)):z(y,T,b,Y,P,D,M,F,V)},L=(y,T,b,E,P,D,M,F,V)=>{T.slotScopeIds=F,y==null?T.shapeFlag&512?P.ctx.activate(T,b,E,M,V):$(T,b,E,P,D,M,V):H(y,T,V)},$=(y,T,b,E,P,D,M)=>{const F=y.component=Mp(y,E,P);if(Qi(y)&&(F.ctx.renderer=it),Fp(F,!1,M),F.asyncDep){if(P&&P.registerDep(F,U,M),!y.el){const V=F.subTree=tt(lt);v(null,V,T,b)}}else U(F,y,T,b,P,D,M)},H=(y,T,b)=>{const E=T.component=y.component;if(Sp(y,T,b))if(E.asyncDep&&!E.asyncResolved){q(E,T,b);return}else E.next=T,E.update();else T.el=y.el,E.vnode=T},U=(y,T,b,E,P,D,M)=>{const F=()=>{if(y.isMounted){let{next:B,bu:J,u:Q,parent:le,vnode:_e}=y;{const ft=Ju(y);if(ft){B&&(B.el=_e.el,q(y,B,M)),ft.asyncDep.then(()=>{y.isUnmounted||F()});return}}let fe=B,dt;Vn(y,!1),B?(B.el=_e.el,q(y,B,M)):B=_e,J&&di(J),(dt=B.props&&B.props.onVnodeBeforeUpdate)&&Wt(dt,le,B,_e),Vn(y,!0);const We=Do(y),Ot=y.subTree;y.subTree=We,m(Ot,We,h(Ot.el),Pe(Ot),y,P,D),B.el=We.el,fe===null&&kp(y,We.el),Q&&mt(Q,P),(dt=B.props&&B.props.onVnodeUpdated)&&mt(()=>Wt(dt,le,B,_e),P)}else{let B;const{el:J,props:Q}=T,{bm:le,m:_e,parent:fe,root:dt,type:We}=y,Ot=nr(T);if(Vn(y,!1),le&&di(le),!Ot&&(B=Q&&Q.onVnodeBeforeMount)&&Wt(B,fe,T),Vn(y,!0),J&&qt){const ft=()=>{y.subTree=Do(y),qt(J,y.subTree,y,P,null)};Ot&&We.__asyncHydrate?We.__asyncHydrate(J,y,ft):ft()}else{dt.ce&&dt.ce._injectChildStyle(We);const ft=y.subTree=Do(y);m(null,ft,b,E,y,P,D),T.el=ft.el}if(_e&&mt(_e,P),!Ot&&(B=Q&&Q.onVnodeMounted)){const ft=T;mt(()=>Wt(B,fe,ft),P)}(T.shapeFlag&256||fe&&nr(fe.vnode)&&fe.vnode.shapeFlag&256)&&y.a&&mt(y.a,P),y.isMounted=!0,T=b=E=null}};y.scope.on();const V=y.effect=new nu(F);y.scope.off();const j=y.update=V.run.bind(V),Y=y.job=V.runIfDirty.bind(V);Y.i=y,Y.id=y.uid,V.scheduler=()=>ja(Y),Vn(y,!0),j()},q=(y,T,b)=>{T.component=y;const E=y.vnode.props;y.vnode=T,y.next=null,ap(y,T.props,E,b),hp(y,T.children,b),Mn(),Oc(y),Fn()},z=(y,T,b,E,P,D,M,F,V=!1)=>{const j=y&&y.children,Y=y?y.shapeFlag:0,B=T.children,{patchFlag:J,shapeFlag:Q}=T;if(J>0){if(J&128){ee(j,B,b,E,P,D,M,F,V);return}else if(J&256){G(j,B,b,E,P,D,M,F,V);return}}Q&8?(Y&16&&he(j,P,D),B!==j&&u(b,B)):Y&16?Q&16?ee(j,B,b,E,P,D,M,F,V):he(j,P,D,!0):(Y&8&&u(b,""),Q&16&&C(B,b,E,P,D,M,F,V))},G=(y,T,b,E,P,D,M,F,V)=>{y=y||bs,T=T||bs;const j=y.length,Y=T.length,B=Math.min(j,Y);let J;for(J=0;J<B;J++){const Q=T[J]=V?bn(T[J]):Gt(T[J]);m(y[J],Q,b,null,P,D,M,F,V)}j>Y?he(y,P,D,!0,!1,B):C(T,b,E,P,D,M,F,V,B)},ee=(y,T,b,E,P,D,M,F,V)=>{let j=0;const Y=T.length;let B=y.length-1,J=Y-1;for(;j<=B&&j<=J;){const Q=y[j],le=T[j]=V?bn(T[j]):Gt(T[j]);if(zn(Q,le))m(Q,le,b,null,P,D,M,F,V);else break;j++}for(;j<=B&&j<=J;){const Q=y[B],le=T[J]=V?bn(T[J]):Gt(T[J]);if(zn(Q,le))m(Q,le,b,null,P,D,M,F,V);else break;B--,J--}if(j>B){if(j<=J){const Q=J+1,le=Q<Y?T[Q].el:E;for(;j<=J;)m(null,T[j]=V?bn(T[j]):Gt(T[j]),b,le,P,D,M,F,V),j++}}else if(j>J)for(;j<=B;)re(y[j],P,D,!0),j++;else{const Q=j,le=j,_e=new Map;for(j=le;j<=J;j++){const pt=T[j]=V?bn(T[j]):Gt(T[j]);pt.key!=null&&_e.set(pt.key,j)}let fe,dt=0;const We=J-le+1;let Ot=!1,ft=0;const Hs=new Array(We);for(j=0;j<We;j++)Hs[j]=0;for(j=Q;j<=B;j++){const pt=y[j];if(dt>=We){re(pt,P,D,!0);continue}let Bt;if(pt.key!=null)Bt=_e.get(pt.key);else for(fe=le;fe<=J;fe++)if(Hs[fe-le]===0&&zn(pt,T[fe])){Bt=fe;break}Bt===void 0?re(pt,P,D,!0):(Hs[Bt-le]=j+1,Bt>=ft?ft=Bt:Ot=!0,m(pt,T[Bt],b,null,P,D,M,F,V),dt++)}const Cc=Ot?gp(Hs):bs;for(fe=Cc.length-1,j=We-1;j>=0;j--){const pt=le+j,Bt=T[pt],Sc=pt+1<Y?T[pt+1].el:E;Hs[j]===0?m(null,Bt,b,Sc,P,D,M,F,V):Ot&&(fe<0||j!==Cc[fe]?Z(Bt,b,Sc,2):fe--)}}},Z=(y,T,b,E,P=null)=>{const{el:D,type:M,transition:F,children:V,shapeFlag:j}=y;if(j&6){Z(y.component.subTree,T,b,E);return}if(j&128){y.suspense.move(T,b,E);return}if(j&64){M.move(y,T,b,it);return}if(M===bt){s(D,T,b);for(let B=0;B<V.length;B++)Z(V[B],T,b,E);s(y.anchor,T,b);return}if(M===Mo){I(y,T,b);return}if(E!==2&&j&1&&F)if(E===0)F.beforeEnter(D),s(D,T,b),mt(()=>F.enter(D),P);else{const{leave:B,delayLeave:J,afterLeave:Q}=F,le=()=>s(D,T,b),_e=()=>{B(D,()=>{le(),Q&&Q()})};J?J(D,le,_e):_e()}else s(D,T,b)},re=(y,T,b,E=!1,P=!1)=>{const{type:D,props:M,ref:F,children:V,dynamicChildren:j,shapeFlag:Y,patchFlag:B,dirs:J,cacheIndex:Q}=y;if(B===-2&&(P=!1),F!=null&&Ti(F,null,b,y,!0),Q!=null&&(T.renderCache[Q]=void 0),Y&256){T.ctx.deactivate(y);return}const le=Y&1&&J,_e=!nr(y);let fe;if(_e&&(fe=M&&M.onVnodeBeforeUnmount)&&Wt(fe,T,y),Y&6)ie(y.component,b,E);else{if(Y&128){y.suspense.unmount(b,E);return}le&&$n(y,null,T,"beforeUnmount"),Y&64?y.type.remove(y,T,b,it,E):j&&!j.hasOnce&&(D!==bt||B>0&&B&64)?he(j,T,b,!1,!0):(D===bt&&B&384||!P&&Y&16)&&he(V,T,b),E&&Be(y)}(_e&&(fe=M&&M.onVnodeUnmounted)||le)&&mt(()=>{fe&&Wt(fe,T,y),le&&$n(y,null,T,"unmounted")},b)},Be=y=>{const{type:T,el:b,anchor:E,transition:P}=y;if(T===bt){Je(b,E);return}if(T===Mo){A(y);return}const D=()=>{r(b),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(y.shapeFlag&1&&P&&!P.persisted){const{leave:M,delayLeave:F}=P,V=()=>M(b,D);F?F(y.el,D,V):V()}else D()},Je=(y,T)=>{let b;for(;y!==T;)b=d(y),r(y),y=b;r(T)},ie=(y,T,b)=>{const{bum:E,scope:P,job:D,subTree:M,um:F,m:V,a:j}=y;Fc(V),Fc(j),E&&di(E),P.stop(),D&&(D.flags|=8,re(M,y,T,b)),F&&mt(F,T),mt(()=>{y.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},he=(y,T,b,E=!1,P=!1,D=0)=>{for(let M=D;M<y.length;M++)re(y[M],T,b,E,P)},Pe=y=>{if(y.shapeFlag&6)return Pe(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const T=d(y.anchor||y.el),b=T&&T[Ff];return b?d(b):T};let K=!1;const Vt=(y,T,b)=>{y==null?T._vnode&&re(T._vnode,null,null,!0):m(T._vnode||null,y,T,null,null,null,b),T._vnode=y,K||(K=!0,Oc(),Cu(),K=!1)},it={p:m,um:re,m:Z,r:Be,mt:$,mc:C,pc:z,pbc:N,n:Pe,o:n};let Ut,qt;return e&&([Ut,qt]=e(it)),{render:Vt,hydrate:Ut,createApp:rp(Vt,Ut)}}function Po({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Vn({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function mp(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Ku(n,e,t=!1){const s=n.children,r=e.children;if(X(s)&&X(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=bn(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Ku(o,a)),a.type===no&&(a.el=o.el)}}function gp(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=t[t.length-1],n[r]<l){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<l?i=a+1:o=a;l<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Ju(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ju(e)}function Fc(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const _p=Symbol.for("v-scx"),vp=()=>rr(_p);function ks(n,e,t){return Yu(n,e,t)}function Yu(n,e,t=pe){const{immediate:s,deep:r,flush:i,once:o}=t,a=Me({},t),c=e&&s||!e&&i!=="post";let l;if(_r){if(i==="sync"){const f=vp();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=Rt,f.resume=Rt,f.pause=Rt,f}}const u=Ge;a.call=(f,p,m)=>Mt(f,u,p,m);let h=!1;i==="post"?a.scheduler=f=>{mt(f,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(f,p)=>{p?f():ja(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=Rf(n,e,a);return _r&&(l?l.push(d):c&&d()),d}function yp(n,e,t){const s=this.proxy,r=Ne(n)?n.includes(".")?Zu(s,n):()=>s[n]:n.bind(s,s);let i;te(e)?i=e:(i=e.handler,t=e);const o=Vr(this),a=Yu(r,i.bind(s),t);return o(),a}function Zu(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const wp=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${In(e)}Modifiers`]||n[`${os(e)}Modifiers`];function bp(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||pe;let r=t;const i=e.startsWith("update:"),o=i&&wp(s,e.slice(7));o&&(o.trim&&(r=t.map(u=>Ne(u)?u.trim():u)),o.number&&(r=t.map(Go)));let a,c=s[a=Ao(e)]||s[a=Ao(In(e))];!c&&i&&(c=s[a=Ao(os(e))]),c&&Mt(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Mt(l,n,6,r)}}function Xu(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!te(n)){const c=l=>{const u=Xu(l,e,!0);u&&(a=!0,Me(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Ce(n)&&s.set(n,null),null):(X(i)?i.forEach(c=>o[c]=null):Me(o,i),Ce(n)&&s.set(n,o),o)}function to(n,e){return!n||!Hi(e)?!1:(e=e.slice(2).replace(/Once$/,""),de(n,e[0].toLowerCase()+e.slice(1))||de(n,os(e))||de(n,e))}function Do(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=n,g=bi(n);let v,S;try{if(t.shapeFlag&4){const A=r||s,_=A;v=Gt(l.call(_,A,u,h,f,d,p)),S=a}else{const A=e;v=Gt(A.length>1?A(h,{attrs:a,slots:o,emit:c}):A(h,null)),S=e.props?a:Tp(a)}}catch(A){ir.length=0,Xi(A,n,1),v=tt(lt)}let I=v;if(S&&m!==!1){const A=Object.keys(S),{shapeFlag:_}=I;A.length&&_&7&&(i&&A.some(Oa)&&(S=Cp(S,i)),I=Nn(I,S,!1,!0))}return t.dirs&&(I=Nn(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&mr(I,t.transition),v=I,bi(g),v}const Tp=n=>{let e;for(const t in n)(t==="class"||t==="style"||Hi(t))&&((e||(e={}))[t]=n[t]);return e},Cp=(n,e)=>{const t={};for(const s in n)(!Oa(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function Sp(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?jc(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!to(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?jc(s,o,l):!0:!!o;return!1}function jc(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!to(t,i))return!0}return!1}function kp({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Qu=n=>n.__isSuspense;function Ap(n,e){e&&e.pendingBranch?X(n)?e.effects.push(...n):e.effects.push(n):Mf(n)}const bt=Symbol.for("v-fgt"),no=Symbol.for("v-txt"),lt=Symbol.for("v-cmt"),Mo=Symbol.for("v-stc"),ir=[];let vt=null;function Tt(n=!1){ir.push(vt=n?null:[])}function xp(){ir.pop(),vt=ir[ir.length-1]||null}let gr=1;function Lc(n,e=!1){gr+=n,n<0&&vt&&e&&(vt.hasOnce=!0)}function eh(n){return n.dynamicChildren=gr>0?vt||bs:null,xp(),gr>0&&vt&&vt.push(n),n}function On(n,e,t,s,r,i){return eh(Ue(n,e,t,s,r,i,!0))}function so(n,e,t,s,r){return eh(tt(n,e,t,s,r,!0))}function Si(n){return n?n.__v_isVNode===!0:!1}function zn(n,e){return n.type===e.type&&n.key===e.key}const th=({key:n})=>n!=null?n:null,fi=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ne(n)||xe(n)||te(n)?{i:_t,r:n,k:e,f:!!t}:n:null);function Ue(n,e=null,t=null,s=0,r=null,i=n===bt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&th(e),ref:e&&fi(e),scopeId:ku,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:_t};return a?(Ba(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Ne(t)?8:16),gr>0&&!o&&vt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&vt.push(c),c}const tt=Op;function Op(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Yf)&&(n=lt),Si(n)){const a=Nn(n,e,!0);return t&&Ba(a,t),gr>0&&!i&&vt&&(a.shapeFlag&6?vt[vt.indexOf(n)]=a:vt.push(a)),a.patchFlag=-2,a}if(Vp(n)&&(n=n.__vccOpts),e){e=Ep(e);let{class:a,style:c}=e;a&&!Ne(a)&&(e.class=Fr(a)),Ce(c)&&(Fa(c)&&!X(c)&&(c=Me({},c)),e.style=Ki(c))}const o=Ne(n)?1:Qu(n)?128:Au(n)?64:Ce(n)?4:te(n)?2:0;return Ue(n,e,t,s,r,o,i,!0)}function Ep(n){return n?Fa(n)||Uu(n)?Me({},n):n:null}function Nn(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=n,l=e?Rp(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&th(l),ref:e&&e.ref?t&&i?X(i)?i.concat(fi(e)):[i,fi(e)]:fi(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==bt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Nn(n.ssContent),ssFallback:n.ssFallback&&Nn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&mr(u,c.clone(u)),u}function Ip(n=" ",e=0){return tt(no,null,n,e)}function Np(n="",e=!1){return e?(Tt(),so(lt,null,n)):tt(lt,null,n)}function Gt(n){return n==null||typeof n=="boolean"?tt(lt):X(n)?tt(bt,null,n.slice()):Si(n)?bn(n):tt(no,null,String(n))}function bn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Nn(n)}function Ba(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(X(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Ba(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!Uu(e)?e._ctx=_t:r===3&&_t&&(_t.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else te(e)?(e={default:e,_ctx:_t},t=32):(e=String(e),s&64?(t=16,e=[Ip(e)]):t=8);n.children=e,n.shapeFlag|=t}function Rp(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Fr([e.class,s.class]));else if(r==="style")e.style=Ki([e.style,s.style]);else if(Hi(r)){const i=e[r],o=s[r];o&&i!==o&&!(X(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Wt(n,e,t,s=null){Mt(n,e,7,[t,s])}const Pp=Lu();let Dp=0;function Mp(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||Pp,i={uid:Dp++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ql(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bu(s,r),emitsOptions:Xu(s,r),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:s.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bp.bind(null,i),n.ce&&n.ce(i),i}let Ge=null;const ro=()=>Ge||_t;let ki,ra;{const n=Mr(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ki=e("__VUE_INSTANCE_SETTERS__",t=>Ge=t),ra=e("__VUE_SSR_SETTERS__",t=>_r=t)}const Vr=n=>{const e=Ge;return ki(n),n.scope.on(),()=>{n.scope.off(),ki(e)}},$c=()=>{Ge&&Ge.scope.off(),ki(null)};function nh(n){return n.vnode.shapeFlag&4}let _r=!1;function Fp(n,e=!1,t=!1){e&&ra(e);const{props:s,children:r}=n.vnode,i=nh(n);op(n,s,i,e),up(n,r,t);const o=i?jp(n,e):void 0;return e&&ra(!1),o}function jp(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Zf);const{setup:s}=t;if(s){Mn();const r=n.setupContext=s.length>1?$p(n):null,i=Vr(n),o=Lr(s,n,0,[n.props,r]),a=Hl(o);if(Fn(),i(),(a||n.sp)&&!nr(n)&&Ru(n),a){if(o.then($c,$c),e)return o.then(c=>{Vc(n,c,e)}).catch(c=>{Xi(c,n,0)});n.asyncDep=o}else Vc(n,o,e)}else sh(n,e)}function Vc(n,e,t){te(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ce(e)&&(n.setupState=vu(e)),sh(n,t)}let Uc;function sh(n,e,t){const s=n.type;if(!n.render){if(!e&&Uc&&!s.render){const r=s.template||Ua(n).template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Me(Me({isCustomElement:i,delimiters:a},o),c);s.render=Uc(r,l)}}n.render=s.render||Rt}{const r=Vr(n);Mn();try{Xf(n)}finally{Fn(),r()}}}const Lp={get(n,e){return He(n,"get",""),n[e]}};function $p(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Lp),slots:n.slots,emit:n.emit,expose:e}}function io(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(vu(fr(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in sr)return sr[t](n)},has(e,t){return t in e||t in sr}})):n.proxy}function Vp(n){return te(n)&&"__vccOpts"in n}const Es=(n,e)=>If(n,e,_r);function Up(n,e,t){const s=arguments.length;return s===2?Ce(e)&&!X(e)?Si(e)?tt(n,null,[e]):tt(n,e):tt(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Si(t)&&(t=[t]),tt(n,e,t))}const qp="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ia;const qc=typeof window<"u"&&window.trustedTypes;if(qc)try{ia=qc.createPolicy("vue",{createHTML:n=>n})}catch{}const rh=ia?n=>ia.createHTML(n):n=>n,Bp="http://www.w3.org/2000/svg",Wp="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Bc=nn&&nn.createElement("template"),Hp={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?nn.createElementNS(Bp,n):e==="mathml"?nn.createElementNS(Wp,n):t?nn.createElement(n,{is:t}):nn.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>nn.createTextNode(n),createComment:n=>nn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>nn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Bc.innerHTML=rh(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Bc.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},mn="transition",Gs="animation",vr=Symbol("_vtc"),ih={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zp=Me({},xu,ih),Gp=n=>(n.displayName="Transition",n.props=zp,n),Kp=Gp((n,{slots:e})=>Up($f,Jp(n),e)),Un=(n,e=[])=>{X(n)?n.forEach(t=>t(...e)):n&&n(...e)},Wc=n=>n?X(n)?n.some(e=>e.length>1):n.length>1:!1;function Jp(n){const e={};for(const k in n)k in ih||(e[k]=n[k]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=Yp(r),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:S,onEnterCancelled:I,onLeave:A,onLeaveCancelled:_,onBeforeAppear:x=v,onAppear:w=S,onAppearCancelled:C=I}=e,O=(k,L,$,H)=>{k._enterCancelled=H,qn(k,L?u:a),qn(k,L?l:o),$&&$()},N=(k,L)=>{k._isLeaving=!1,qn(k,h),qn(k,f),qn(k,d),L&&L()},R=k=>(L,$)=>{const H=k?w:S,U=()=>O(L,k,$);Un(H,[L,U]),Hc(()=>{qn(L,k?c:i),tn(L,k?u:a),Wc(H)||zc(L,s,m,U)})};return Me(e,{onBeforeEnter(k){Un(v,[k]),tn(k,i),tn(k,o)},onBeforeAppear(k){Un(x,[k]),tn(k,c),tn(k,l)},onEnter:R(!1),onAppear:R(!0),onLeave(k,L){k._isLeaving=!0;const $=()=>N(k,L);tn(k,h),k._enterCancelled?(tn(k,d),Jc()):(Jc(),tn(k,d)),Hc(()=>{!k._isLeaving||(qn(k,h),tn(k,f),Wc(A)||zc(k,s,g,$))}),Un(A,[k,$])},onEnterCancelled(k){O(k,!1,void 0,!0),Un(I,[k])},onAppearCancelled(k){O(k,!0,void 0,!0),Un(C,[k])},onLeaveCancelled(k){N(k),Un(_,[k])}})}function Yp(n){if(n==null)return null;if(Ce(n))return[Fo(n.enter),Fo(n.leave)];{const e=Fo(n);return[e,e]}}function Fo(n){return Gd(n)}function tn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[vr]||(n[vr]=new Set)).add(e)}function qn(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[vr];t&&(t.delete(e),t.size||(n[vr]=void 0))}function Hc(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Zp=0;function zc(n,e,t,s){const r=n._endId=++Zp,i=()=>{r===n._endId&&s()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=Xp(n,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,d),i()},d=f=>{f.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,d)}function Xp(n,e){const t=window.getComputedStyle(n),s=p=>(t[p]||"").split(", "),r=s(`${mn}Delay`),i=s(`${mn}Duration`),o=Gc(r,i),a=s(`${Gs}Delay`),c=s(`${Gs}Duration`),l=Gc(a,c);let u=null,h=0,d=0;e===mn?o>0&&(u=mn,h=o,d=i.length):e===Gs?l>0&&(u=Gs,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?mn:Gs:null,d=u?u===mn?i.length:c.length:0);const f=u===mn&&/\b(transform|all)(,|$)/.test(s(`${mn}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Gc(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Kc(t)+Kc(n[s])))}function Kc(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Jc(){return document.body.offsetHeight}function Qp(n,e,t){const s=n[vr];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Yc=Symbol("_vod"),em=Symbol("_vsh"),tm=Symbol(""),nm=/(^|;)\s*display\s*:/;function sm(n,e,t){const s=n.style,r=Ne(t);let i=!1;if(t&&!r){if(e)if(Ne(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&pi(s,a,"")}else for(const o in e)t[o]==null&&pi(s,o,"");for(const o in t)o==="display"&&(i=!0),pi(s,o,t[o])}else if(r){if(e!==t){const o=s[tm];o&&(t+=";"+o),s.cssText=t,i=nm.test(t)}}else e&&n.removeAttribute("style");Yc in n&&(n[Yc]=i?s.display:"",n[em]&&(s.display="none"))}const Zc=/\s*!important$/;function pi(n,e,t){if(X(t))t.forEach(s=>pi(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=rm(n,e);Zc.test(t)?n.setProperty(os(s),t.replace(Zc,""),"important"):n[s]=t}}const Xc=["Webkit","Moz","ms"],jo={};function rm(n,e){const t=jo[e];if(t)return t;let s=In(e);if(s!=="filter"&&s in n)return jo[e]=s;s=Kl(s);for(let r=0;r<Xc.length;r++){const i=Xc[r]+s;if(i in n)return jo[e]=i}return e}const Qc="http://www.w3.org/1999/xlink";function el(n,e,t,s,r,i=Qd(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Qc,e.slice(6,e.length)):n.setAttributeNS(Qc,e,t):t==null||i&&!Yl(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Dn(t)?String(t):t)}function tl(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?rh(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Yl(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function vs(n,e,t,s){n.addEventListener(e,t,s)}function im(n,e,t,s){n.removeEventListener(e,t,s)}const nl=Symbol("_vei");function om(n,e,t,s,r=null){const i=n[nl]||(n[nl]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=am(e);if(s){const l=i[e]=um(s,r);vs(n,a,l,c)}else o&&(im(n,a,o,c),i[e]=void 0)}}const sl=/(?:Once|Passive|Capture)$/;function am(n){let e;if(sl.test(n)){e={};let s;for(;s=n.match(sl);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):os(n.slice(2)),e]}let Lo=0;const cm=Promise.resolve(),lm=()=>Lo||(cm.then(()=>Lo=0),Lo=Date.now());function um(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Mt(hm(s,t.value),e,5,[s])};return t.value=n,t.attached=lm(),t}function hm(n,e){if(X(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const rl=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,dm=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?Qp(n,s,o):e==="style"?sm(n,t,s):Hi(e)?Oa(e)||om(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):fm(n,e,s,o))?(tl(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&el(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ne(s))?tl(n,In(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),el(n,e,s,o))};function fm(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&rl(e)&&te(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return rl(e)&&Ne(t)?!1:e in n}const il=n=>{const e=n.props["onUpdate:modelValue"]||!1;return X(e)?t=>di(e,t):e};function pm(n){n.target.composing=!0}function ol(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $o=Symbol("_assign"),al={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[$o]=il(r);const i=s||r.props&&r.props.type==="number";vs(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=Go(a)),n[$o](a)}),t&&vs(n,"change",()=>{n.value=n.value.trim()}),e||(vs(n,"compositionstart",pm),vs(n,"compositionend",ol),vs(n,"change",ol))},mounted(n,{value:e}){n.value=e==null?"":e},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[$o]=il(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?Go(n.value):n.value,c=e==null?"":e;a!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===c)||(n.value=c))}},mm=["ctrl","shift","alt","meta"],gm={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>mm.some(t=>n[`${t}Key`]&&!e.includes(t))},_m=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=gm[e[o]];if(a&&a(r,e))return}return n(r,...i)})},vm=Me({patchProp:dm},Hp);let cl;function ym(){return cl||(cl=fp(vm))}const wm=(...n)=>{const e=ym().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=Tm(s);if(!r)return;const i=e._component;!te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,bm(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function bm(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Tm(n){return Ne(n)?document.querySelector(n):n}var Cm=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let oh;const oo=n=>oh=n,ah=Symbol();function oa(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var or;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(or||(or={}));function Sm(){const n=eu(!0),e=n.run(()=>et({}));let t=[],s=[];const r=fr({install(i){oo(r),r._a=i,i.provide(ah,r),i.config.globalProperties.$pinia=r,s.forEach(o=>t.push(o)),s=[]},use(i){return!this._a&&!Cm?s.push(i):t.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const ch=()=>{};function ll(n,e,t,s=ch){n.push(e);const r=()=>{const i=n.indexOf(e);i>-1&&(n.splice(i,1),s())};return!t&&ro()&&Va(r),r}function fs(n,...e){n.slice().forEach(t=>{t(...e)})}function aa(n,e){n instanceof Map&&e instanceof Map&&e.forEach((t,s)=>n.set(s,t)),n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t],r=n[t];oa(r)&&oa(s)&&n.hasOwnProperty(t)&&!xe(s)&&!xn(s)?n[t]=aa(r,s):n[t]=s}return n}const km=Symbol();function Am(n){return!oa(n)||!n.hasOwnProperty(km)}const{assign:Tn}=Object;function xm(n){return!!(xe(n)&&n.effect)}function Om(n,e,t,s){const{state:r,actions:i,getters:o}=e,a=t.state.value[n];let c;function l(){a||(t.state.value[n]=r?r():{});const u=yu(t.state.value[n]);return Tn(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=fr(Es(()=>{oo(t);const f=t._s.get(n);return o[d].call(f,f)})),h),{}))}return c=lh(n,l,e,t,s,!0),c.$reset=function(){const h=r?r():{};this.$patch(d=>{Tn(d,h)})},c}function lh(n,e,t={},s,r,i){let o;const a=Tn({actions:{}},t),c={deep:!0};let l,u,h=fr([]),d=fr([]),f;const p=s.state.value[n];!i&&!p&&(s.state.value[n]={}),et({});let m;function g(w){let C;l=u=!1,typeof w=="function"?(w(s.state.value[n]),C={type:or.patchFunction,storeId:n,events:f}):(aa(s.state.value[n],w),C={type:or.patchObject,payload:w,storeId:n,events:f});const O=m=Symbol();bu().then(()=>{m===O&&(l=!0)}),u=!0,fs(h,C,s.state.value[n])}const v=ch;function S(){o.stop(),h=[],d=[],s._s.delete(n)}function I(w,C){return function(){oo(s);const O=Array.from(arguments),N=[],R=[];function k(H){N.push(H)}function L(H){R.push(H)}fs(d,{args:O,name:w,store:_,after:k,onError:L});let $;try{$=C.apply(this&&this.$id===n?this:_,O)}catch(H){throw fs(R,H),H}return $ instanceof Promise?$.then(H=>(fs(N,H),H)).catch(H=>(fs(R,H),Promise.reject(H))):(fs(N,$),$)}}const A={_p:s,$id:n,$onAction:ll.bind(null,d),$patch:g,$reset:v,$subscribe(w,C={}){const O=ll(h,w,C.detached,()=>N()),N=o.run(()=>ks(()=>s.state.value[n],R=>{(C.flush==="sync"?u:l)&&w({storeId:n,type:or.direct,events:f},R)},Tn({},c,C)));return O},$dispose:S},_=Zi(A);s._s.set(n,_);const x=s._e.run(()=>(o=eu(),o.run(()=>e())));for(const w in x){const C=x[w];if(xe(C)&&!xm(C)||xn(C))i||(p&&Am(C)&&(xe(C)?C.value=p[w]:aa(C,p[w])),s.state.value[n][w]=C);else if(typeof C=="function"){const O=I(w,C);x[w]=O,a.actions[w]=C}}return Tn(_,x),Tn(ue(_),x),Object.defineProperty(_,"$state",{get:()=>s.state.value[n],set:w=>{g(C=>{Tn(C,w)})}}),s._p.forEach(w=>{Tn(_,o.run(()=>w({store:_,app:s._a,pinia:s,options:a})))}),p&&i&&t.hydrate&&t.hydrate(_.$state,p),l=!0,u=!0,_}function Em(n,e,t){let s,r;const i=typeof e=="function";typeof n=="string"?(s=n,r=i?t:e):(r=n,s=n.id);function o(a,c){const l=ro();return a=a||l&&rr(ah),a&&oo(a),a=oh,a._s.has(s)||(i?lh(s,e,r,a):Om(s,r,a)),a._s.get(s)}return o.$id=s,o}const Im=[{type:0,name:"c2",keyCode:"KeyQ"},{type:1,name:"c#2",keyCode:"Digit1"},{type:0,name:"d2",keyCode:"KeyW"},{type:1,name:"d#2",keyCode:"Digit2"},{type:0,name:"e2",keyCode:"KeyE"},{type:0,name:"f2",keyCode:"KeyR"},{type:1,name:"f#2",keyCode:"Digit3"},{type:0,name:"g2",keyCode:"KeyT"},{type:1,name:"g#2",keyCode:"Digit4"},{type:0,name:"a2",keyCode:"KeyY"},{type:1,name:"a#2",keyCode:"Digit5"},{type:0,name:"b2",keyCode:"KeyU"},{type:0,name:"c3",keyCode:"KeyI"},{type:1,name:"c#3",keyCode:"Digit6"},{type:0,name:"d3",keyCode:"KeyO"},{type:1,name:"d#3",keyCode:"Digit7"},{type:0,name:"e3",keyCode:"KeyP"},{type:0,name:"f3",keyCode:"BracketLeft"},{type:1,name:"f#3",keyCode:"Digit8"},{type:0,name:"g3",keyCode:"BracketRight"},{type:1,name:"g#3",keyCode:"Digit9"},{type:0,name:"a3",keyCode:"Backslash"},{type:1,name:"a#3",keyCode:"Digit0"},{type:0,name:"b3",keyCode:"Backspace"}],uh="14.7.77",ul=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),hl=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),ca=(n,e)=>({startTime:e,type:"setValue",value:n}),hh=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),dh=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),ws=n=>n.type==="exponentialRampToValue",Ai=n=>n.type==="linearRampToValue",Cn=n=>ws(n)||Ai(n),Wa=n=>n.type==="setValue",sn=n=>n.type==="setValueCurve",xi=(n,e,t,s)=>{const r=n[e];return r===void 0?s:Cn(r)||Wa(r)?r.value:sn(r)?r.values[r.values.length-1]:dh(t,xi(n,e-1,r.startTime,s),r)},dl=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:Cn(t)?[t.endTime,t.value]:Wa(t)?[t.startTime,t.value]:sn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,xi(n,e-1,t.startTime,r)],la=n=>n.type==="cancelAndHold",ua=n=>n.type==="cancelScheduledValues",gn=n=>la(n)||ua(n)?n.cancelTime:ws(n)||Ai(n)?n.endTime:n.startTime,fl=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,pl=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),Nm=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},Rm=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return Nm(s,r)},ri=n=>n.type==="setTarget";class Pm{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=gn(e);if(la(e)||ua(e)){const s=this._automationEvents.findIndex(i=>ua(e)&&sn(i)?i.startTime+i.duration>=t:gn(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),la(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Cn(r)){if(ri(i))throw new Error("The internal list is malformed.");const o=sn(i)?i.startTime+i.duration:gn(i),a=sn(i)?i.values[i.values.length-1]:i.value,c=ws(r)?fl(t,o,a,r):pl(t,o,a,r),l=ws(r)?ul(c,t,this._currenTime):hl(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&ri(i)&&this._automationEvents.push(ca(this.getValue(t),t)),i!==void 0&&sn(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=hh(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>gn(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&sn(r)&&gn(r)+r.duration>t)return!1;const i=ws(e)?ul(e.value,e.endTime,this._currenTime):Ai(e)?hl(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(sn(e)&&t+e.duration>gn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>gn(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];ri(r)&&s.unshift(ca(xi(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>gn(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&ri(i)&&(s===void 0||!Cn(s)||s.insertTime>e))return dh(e,xi(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Wa(i)&&(s===void 0||!Cn(s)))return i.value;if(i!==void 0&&sn(i)&&(s===void 0||!Cn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Rm(e,i):i.values[i.values.length-1];if(i!==void 0&&Cn(i)&&(s===void 0||!Cn(s)))return i.value;if(s!==void 0&&ws(s)){const[o,a]=dl(this._automationEvents,r,i,s,this._defaultValue);return fl(e,o,a,s)}if(s!==void 0&&Ai(s)){const[o,a]=dl(this._automationEvents,r,i,s,this._defaultValue);return pl(e,o,a,s)}return this._defaultValue}}const Dm=n=>({cancelTime:n,type:"cancelAndHold"}),Mm=n=>({cancelTime:n,type:"cancelScheduledValues"}),Fm=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),jm=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),Lm=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),$m=()=>new DOMException("","AbortError"),Vm=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},Um=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},qm=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Is=new WeakSet,fh=new WeakMap,Ha=new WeakMap,ph=new WeakMap,za=new WeakMap,ao=new WeakMap,mh=new WeakMap,ha=new WeakMap,da=new WeakMap,fa=new WeakMap,gh={construct(){return gh}},Bm=n=>{try{const e=new Proxy(n,gh);new e}catch{return!1}return!0},ml=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,gl=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(ml);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(ml)}return[t.join(";"),s]},_l=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},vl=n=>{if(!Bm(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Wm=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{const v=u.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();const S=l.get(p);if(S!==void 0){const _=S.get(m);if(_!==void 0)return _}const I=i(p),A=I.audioWorklet===void 0?r(m).then(([_,x])=>{const[w,C]=gl(_,x),O=`${w};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;s(I.currentTime,I.sampleRate,()=>_(class{},void 0,(x,w)=>{if(x.trim()==="")throw e();const C=da.get(I);if(C!==void 0){if(C.has(x))throw e();vl(w),_l(w.parameterDescriptors),C.set(x,w)}else vl(w),_l(w.parameterDescriptors),da.set(I,new Map([[x,w]]))},I.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(n(h,h))]).then(([[_,x],w])=>{const C=f+1;f=C;const[O,N]=gl(_,x),$=`${O};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${w?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${w?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${w?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,H=new Blob([$],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL(H);return I.audioWorklet.addModule(U,g).then(()=>{if(a(I))return I;const q=o(I);return q.audioWorklet.addModule(U,g).then(()=>q)}).then(q=>{if(c===null)throw new SyntaxError;try{new c(q,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return S===void 0?l.set(p,new Map([[m,A]])):S.set(m,A),A.then(()=>{const _=u.get(p);_===void 0?u.set(p,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(p);_!==void 0&&_.delete(m)}),A}},Ft=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},co=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},_h=(n,e,t,s)=>{const r=Ft(n,e),i=co(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Ur=n=>Ft(mh,n),Ns=n=>{if(Is.has(n))throw new Error("The AudioNode is already stored.");Is.add(n),Ur(n).forEach(e=>e(!0))},vh=n=>"port"in n,qr=n=>{if(!Is.has(n))throw new Error("The AudioNode is not stored.");Is.delete(n),Ur(n).forEach(e=>e(!1))},pa=(n,e)=>{!vh(n)&&e.every(t=>t.size===0)&&qr(n)},Hm=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,m,g,v,S)=>{const{activeInputs:I,passiveInputs:A}=i(m),{outputs:_}=i(p),x=a(p),w=C=>{const O=c(m),N=c(p);if(C){const R=_h(A,p,g,v);n(I,p,R,!1),!S&&!h(p)&&t(N,O,g,v),d(m)&&Ns(m)}else{const R=s(I,p,g,v);e(A,v,R,!1),!S&&!h(p)&&r(N,O,g,v);const k=o(m);if(k===0)u(m)&&pa(m,I);else{const L=f.get(m);L!==void 0&&clearTimeout(L),f.set(m,setTimeout(()=>{u(m)&&pa(m,I)},k*1e3))}}};return l(_,[m,g,v],C=>C[0]===m&&C[1]===g&&C[2]===v,!0)?(x.add(w),u(p)?n(I,p,[g,v,w],!0):e(A,v,[p,g,w],!0),!0):!1}},zm=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},Gm=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},Km=n=>(e,t)=>{n(e).add(t)},Jm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ym=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...Jm,...c},h=s(l,u),d=i(l)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Ke=(n,e)=>n.context===e,Zm=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Ke(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Oi=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Yt=()=>new DOMException("","IndexSizeError"),Ga=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Yt():s}})(n.getChannelData)},Xm={numberOfChannels:1},Qm=(n,e,t,s,r,i,o,a)=>{let c=null;return class yh{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...Xm,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(o(p),Ga(p)):e(Oi,()=>Oi(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===yh.prototype||n.has(u)}}},at=-34028234663852886e22,Qe=-at,ln=n=>Is.has(n),eg={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},tg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...eg,...u},f=r(h,d),p=o(h),m=p?e():null;super(l,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Qe,at)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Ns(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),ln(this)&&qr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},ng=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=Ke(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},sg=n=>"playbackRate"in n,rg=n=>"frequency"in n&&"gain"in n,ig=n=>"offset"in n,og=n=>!("frequency"in n)&&"gain"in n,ag=n=>"detune"in n&&"frequency"in n,cg=n=>"pan"in n,nt=n=>Ft(fh,n),Br=n=>Ft(ph,n),ma=(n,e)=>{const{activeInputs:t}=nt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||ma(i,[...e,n])}));const s=sg(n)?[n.playbackRate]:vh(n)?Array.from(n.parameters.values()):rg(n)?[n.Q,n.detune,n.frequency,n.gain]:ig(n)?[n.offset]:og(n)?[n.gain]:ag(n)?[n.detune,n.frequency]:cg(n)?[n.pan]:[];for(const r of s){const i=Br(r);i!==void 0&&i.activeInputs.forEach(([o])=>ma(o,e))}ln(n)&&qr(n)},wh=n=>{ma(n.destination,[])},lg=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),ug=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(h===null)throw s();if(!lg(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wh(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},hg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),p=d?e(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},dg=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},fg=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),x=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),w=o(l);let C=!1,O=[0,0,-1,0,1,0],N=[0,0,0];const R=()=>{if(C)return;C=!0;const H=s(l,256,9,0);H.onaudioprocess=({inputBuffer:U})=>{const q=[i(U,_,0),i(U,_,1),i(U,_,2),i(U,_,3),i(U,_,4),i(U,_,5)];q.some((G,ee)=>G!==O[ee])&&(u.setOrientation(...q),O=q);const z=[i(U,_,6),i(U,_,7),i(U,_,8)];z.some((G,ee)=>G!==N[ee])&&(u.setPosition(...z),N=z)},x.connect(H)},k=H=>U=>{U!==O[H]&&(O[H]=U,u.setOrientation(...O))},L=H=>U=>{U!==N[H]&&(N[H]=U,u.setPosition(...N))},$=(H,U,q)=>{const z=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});z.connect(x,0,H),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return U}});const G=n({context:c},w,z.offset,Qe,at);return a(G,"value",ee=>()=>ee.call(G),ee=>Z=>{try{ee.call(G,Z)}catch(re){if(re.code!==9)throw re}R(),w&&q(Z)}),G.cancelAndHoldAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.cancelAndHoldAtTime),G.cancelScheduledValues=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.cancelScheduledValues),G.exponentialRampToValueAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.exponentialRampToValueAtTime),G.linearRampToValueAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.linearRampToValueAtTime),G.setTargetAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.setTargetAtTime),G.setValueAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.setValueAtTime),G.setValueCurveAtTime=(ee=>w?()=>{throw r()}:(...Z)=>{const re=ee.apply(G,Z);return R(),re})(G.setValueCurveAtTime),G};return{forwardX:$(0,0,k(0)),forwardY:$(1,0,k(1)),forwardZ:$(2,-1,k(2)),positionX:$(6,0,L(0)),positionY:$(7,0,L(1)),positionZ:$(8,0,L(2)),upX:$(3,0,k(3)),upY:$(4,1,k(4)),upZ:$(5,0,k(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:S,upY:I,upZ:A}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return S},get upY(){return I},get upZ(){return A}}},Ei=n=>"context"in n,Wr=n=>Ei(n[0]),as=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},yl=(n,e,[t,s],r)=>{as(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},wl=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):as(i,[t,s],o=>o[0]===t,r)},js=n=>"inputs"in n,Ii=(n,e,t,s)=>{if(js(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},bh=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},pg=(n,e,t)=>co(n,s=>s[0]===e&&s[1]===t),Th=(n,e)=>{if(!Ur(n).delete(e))throw new Error("Missing the expected event listener.")},Ch=(n,e,t)=>{const s=Ft(n,e),r=co(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},Ni=(n,e,t,s)=>{js(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Te=n=>Ft(Ha,n),yr=n=>Ft(za,n),Qn=n=>ha.has(n),mi=n=>!Is.has(n),bl=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),Vo=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},Ri=n=>"context"in n,mg=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=Ri(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{Ri(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},gg=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Br(e),{outputs:o}=nt(n),a=Ur(n),c=l=>{const u=Te(n),h=yr(e);if(l){const d=Ch(i,n,t);yl(r,n,d,!1),!s&&!Qn(n)&&u.connect(h,t)}else{const d=pg(r,n,t);wl(i,d,!1),!s&&!Qn(n)&&u.disconnect(h,t)}};return as(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),ln(n)?yl(r,n,[t,c],!0):wl(i,[n,t,c],!0),!0):!1},_g=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=nt(e),o=bh(r[s],n,t);return o===null?[_h(i,n,t,s)[2],!1]:[o[2],!0]},vg=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Br(e),i=bh(s,n,t);return i===null?[Ch(r,n,t)[1],!1]:[i[2],!0]},Ka=(n,e,t,s,r)=>{const[i,o]=_g(n,t,s,r);if(i!==null&&(Th(n,i),o&&!e&&!Qn(n)&&Ni(Te(n),Te(t),s,r)),ln(t)){const{activeInputs:a}=nt(t);pa(t,a)}},Ja=(n,e,t,s)=>{const[r,i]=vg(n,t,s);r!==null&&(Th(n,r),i&&!e&&!Qn(n)&&Te(n).disconnect(yr(t),s))},yg=(n,e)=>{const t=nt(n),s=[];for(const r of t.outputs)Wr(r)?Ka(n,e,...r):Ja(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},wg=(n,e,t)=>{const s=nt(n),r=[];for(const i of s.outputs)i[1]===t&&(Wr(i)?Ka(n,e,...i):Ja(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},bg=(n,e,t,s,r)=>{const i=nt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Wr(o)?Ka(n,e,...o):Ja(n,e,...o),i.outputs.delete(o),o[0]))},Tg=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>class extends l{constructor(v,S,I,A){super(I),this._context=v,this._nativeAudioNode=I;const _=u(v);h(_)&&t(bl,()=>bl(_,m))!==!0&&mg(I),Ha.set(this,I),mh.set(this,new Set),v.state!=="closed"&&S&&Ns(this),n(this,A,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,S=0,I=0){if(S<0||S>=this._nativeAudioNode.numberOfOutputs)throw r();const A=u(this._context),_=p(A);if(d(v)||f(v))throw i();if(Ei(v)){const C=Te(v);try{const N=Ii(this._nativeAudioNode,C,S,I),R=mi(this);(_||R)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!R&&mi(v)&&Ns(v)}catch(N){throw N.code===12?i():N}if(e(this,v,S,I,_)){const N=c([this],v);Vo(N,s(_))}return v}const x=yr(v);if(x.name==="playbackRate"&&x.maxValue===1024)throw o();try{this._nativeAudioNode.connect(x,S),(_||mi(this))&&this._nativeAudioNode.disconnect(x,S)}catch(C){throw C.code===12?i():C}if(gg(this,v,S,_)){const C=c([this],v);Vo(C,s(_))}}disconnect(v,S,I){let A;const _=u(this._context),x=p(_);if(v===void 0)A=yg(this,x);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();A=wg(this,x,v)}else{if(S!==void 0&&(S<0||S>=this.numberOfOutputs)||Ei(v)&&I!==void 0&&(I<0||I>=v.numberOfInputs))throw r();if(A=bg(this,x,v,S,I),A.length===0)throw i()}for(const w of A){const C=c([this],w);Vo(C,a)}}},Cg=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g=null,v=null)=>{const S=new Pm(m.defaultValue),I=p?s(S):null,A={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(_){m.value=_,A.setValueAtTime(_,f.context.currentTime)},cancelAndHoldAtTime(_){if(typeof m.cancelAndHoldAtTime=="function")I===null&&S.flush(f.context.currentTime),S.add(r(_)),m.cancelAndHoldAtTime(_);else{const x=Array.from(S).pop();I===null&&S.flush(f.context.currentTime),S.add(r(_));const w=Array.from(S).pop();m.cancelScheduledValues(_),x!==w&&w!==void 0&&(w.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(w.value,w.endTime):w.type==="linearRampToValue"?m.linearRampToValueAtTime(w.value,w.endTime):w.type==="setValue"?m.setValueAtTime(w.value,w.startTime):w.type==="setValueCurve"&&m.setValueCurveAtTime(w.values,w.startTime,w.duration))}return A},cancelScheduledValues(_){return I===null&&S.flush(f.context.currentTime),S.add(i(_)),m.cancelScheduledValues(_),A},exponentialRampToValueAtTime(_,x){if(_===0)throw new RangeError;if(!Number.isFinite(x)||x<0)throw new RangeError;return I===null&&S.flush(f.context.currentTime),S.add(o(_,x)),m.exponentialRampToValueAtTime(_,x),A},linearRampToValueAtTime(_,x){return I===null&&S.flush(f.context.currentTime),S.add(a(_,x)),m.linearRampToValueAtTime(_,x),A},setTargetAtTime(_,x,w){return I===null&&S.flush(f.context.currentTime),S.add(c(_,x,w)),m.setTargetAtTime(_,x,w),A},setValueAtTime(_,x){return I===null&&S.flush(f.context.currentTime),S.add(l(_,x)),m.setValueAtTime(_,x),A},setValueCurveAtTime(_,x,w){const C=_ instanceof Float32Array?_:new Float32Array(_);if(h!==null&&h.name==="webkitAudioContext"){const O=x+w,N=f.context.sampleRate,R=Math.ceil(x*N),k=Math.floor(O*N),L=k-R,$=new Float32Array(L);for(let U=0;U<L;U+=1){const q=(C.length-1)/w*((R+U)/N-x),z=Math.floor(q),G=Math.ceil(q);$[U]=z===G?C[z]:(1-(q-z))*C[z]+(1-(G-q))*C[G]}I===null&&S.flush(f.context.currentTime),S.add(u($,x,w)),m.setValueCurveAtTime($,x,w);const H=k/N;H<O&&d(A,$[$.length-1],H),d(A,C[C.length-1],O)}else I===null&&S.flush(f.context.currentTime),S.add(u(C,x,w)),m.setValueCurveAtTime(C,x,w);return A}};return t.set(A,m),e.set(A,f),n(A,I),A},Sg=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Sh{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const kg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Ag=(n,e,t,s,r,i,o,a,c,l,u,h,d,f)=>class extends e{constructor(m,g,v){var S;const I=a(m),A=c(I),_=u({...kg,...v});d(_);const x=da.get(I),w=x==null?void 0:x.get(g),C=A||I.state!=="closed"?I:(S=o(I))!==null&&S!==void 0?S:I,O=r(C,A?null:m.baseLatency,l,g,w,_),N=A?s(g,_,w):null;super(m,!0,O,N);const R=[];O.parameters.forEach((L,$)=>{const H=t(this,A,L);R.push([$,H])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new Sh(R),A&&n(I,this);const{activeInputs:k}=i(this);h(O,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pi(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const kh=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},Di=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},xg=(n,e)=>{const t=Ft(fa,n),s=Te(e);return Ft(t,s)},Og=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,v)=>g+v,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=nt(n),d=await xg(t,n),f=Di(s.numberOfInputs,s.channelCount),p=Di(s.numberOfOutputs,r),m=Array.from(n.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&e!==null)for(let v=0;v<s.numberOfInputs;v+=1)for(let S=0;S<s.channelCount;S+=1)Pi(e,f[v],S,S,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},S)=>{Pi(e,m,v,c+S,g)});for(let v=0;v<s.numberOfInputs;v+=1)for(let S=0;S<r[v];S+=1)p[v][S].byteLength===0&&(p[v][S]=new Float32Array(128));try{const v=f.map((I,A)=>h.activeInputs[A].size===0?[]:I),S=o(g/t.sampleRate,t.sampleRate,()=>d.process(v,p,m));if(u!==null)for(let I=0,A=0;I<s.numberOfOutputs;I+=1){for(let _=0;_<r[I];_+=1)kh(u,p[I],_,A+_,g);A+=r[I]}if(!S)break}catch(v){n.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},Eg=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>(g,v,S)=>{const I=new WeakMap;let A=null;const _=async(x,w)=>{let C=u(x),O=null;const N=Ke(C,w),R=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(h===null){const k=R.reduce((U,q)=>U+q,0),L=r(w,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),$=[];for(let U=0;U<x.numberOfOutputs;U+=1)$.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[U]}));const H=o(w,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});H.connect=e.bind(null,$),H.disconnect=c.bind(null,$),O=[L,$,H]}else N||(C=new h(w,g));if(I.set(w,O===null?C:O[2]),O!==null){if(A===null){if(S===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const q=x.channelCount*x.numberOfInputs,z=S.parameterDescriptors===void 0?0:S.parameterDescriptors.length,G=q+z;A=Og(x,G===0?null:await(async()=>{const Z=new d(G,Math.ceil(x.context.length/128)*128,w.sampleRate),re=[],Be=[];for(let he=0;he<v.numberOfInputs;he+=1)re.push(o(Z,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Be.push(r(Z,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Je=await Promise.all(Array.from(x.parameters.values()).map(async he=>{const Pe=i(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he.value});return await f(Z,he,Pe.offset),Pe})),ie=s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+z)});for(let he=0;he<v.numberOfInputs;he+=1){re[he].connect(Be[he]);for(let Pe=0;Pe<v.channelCount;Pe+=1)Be[he].connect(ie,Pe,he*v.channelCount+Pe)}for(const[he,Pe]of Je.entries())Pe.connect(ie,0,q+he),Pe.start(0);return ie.connect(Z.destination),await Promise.all(re.map(he=>p(x,Z,he))),m(Z)})(),w,v,R,S,l)}const k=await A,L=t(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[$,H,U]=O;k!==null&&(L.buffer=k,L.start(0)),L.connect($);for(let q=0,z=0;q<x.numberOfOutputs;q+=1){const G=H[q];for(let ee=0;ee<R[q];ee+=1)$.connect(G,z+ee,ee);z+=R[q]}return U}if(N)for(const[k,L]of x.parameters.entries())await n(w,L,C.parameters.get(k));else for(const[k,L]of x.parameters.entries())await f(w,L,C.parameters.get(k));return await p(x,w,C),C};return{render(x,w){a(w,x);const C=I.get(w);return C!==void 0?Promise.resolve(C):_(x,w)}}},Ig=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m,g,v,S,I)=>class extends p{constructor(_,x){super(_,x),this._nativeContext=_,this._audioWorklet=n===void 0?void 0:{addModule:(w,C)=>n(this,w,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,x,w){return new t({length:x,numberOfChannels:_,sampleRate:w})}createBufferSource(){return new s(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new u(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,x){return new f(this,{feedback:x,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(_,x,w={disableNormalization:!1}){return new v(this,{...w,imag:x,real:_})}createStereoPanner(){return new S(this)}createWaveShaper(){return new I(this)}decodeAudioData(_,x,w){return l(this._nativeContext,_).then(C=>(typeof x=="function"&&x(C),C),C=>{throw typeof w=="function"&&w(C),C})}},Ng={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Rg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...Ng,...u},f=r(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._Q=e(this,p,f.Q,Qe,at),this._detune=e(this,p,f.detune,1200*Math.log2(Qe),-1200*Math.log2(Qe)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Qe),at),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},Pg=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Ke(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Dg=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},Mg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Fg=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...Mg,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},jg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Ke(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Lg={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},$g=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...Lg,...c}),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},Vg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Ke(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Ug=n=>(e,t,s)=>n(t,e,s),qg=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return Ri(t)?i.connect(t,0,r):i.connect(t,0)},Bg=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},Wg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Hg=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...Wg,...l},d=s(u,h),f=i(u),p=f?t():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Qe,at),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Ns(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),ln(this)&&qr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},zg=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=Ke(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Gg=n=>e=>(n[0]=e,n[0]),Kg={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Jg=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...Kg,...c},h=t(l,u),f=r(l)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},Yg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Ke(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),js(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Zg=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},Xg=()=>new DOMException("","DataCloneError"),Tl=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}finally{r()}})},Qg=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=t();return Promise.reject(p)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(Tl(d).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await Tl(d)}catch{}},v=S=>{m(S),g()};try{f.decodeAudioData(d,S=>{typeof S.copyFromChannel!="function"&&(l(S),Ga(S)),n.add(S),g().then(()=>p(S))},S=>{v(S===null?s():S)})}catch(S){v(S)}})},e_=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=t(c);for(const m of p)if(Wr(m)){const g=s(m[0]);n(f,g,m[1],m[2])}else{const g=r(m[0]);f.connect(g,m[1])}}}else e.set(c,u-l)},t_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},n_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...t_,...l},d=s(u,h),f=i(u),p=f?t(h.maxDelayTime):null;super(c,!1,d,p),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},s_=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=Ke(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},r_=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),i_=n=>(e,t)=>{n(e).delete(t)},o_=n=>"delayTime"in n,a_=(n,e,t)=>function s(r,i){const o=Ei(i)?i:t(n,i);if(o_(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},ii=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},c_=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?ii(n,e,t).disconnect():Ri(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?ii(n,e,s).disconnect(t,0):ii(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):ii(n,e,s).disconnect(t,0),l_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},u_=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...l_,...u},f=s(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},h_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Ke(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},d_=()=>new DOMException("","EncodingError"),f_=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),p_=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},m_=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},g_=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},__={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},v_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...__,...c},h=s(l,u),d=i(l),f=d?t():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,Qe,at)}get gain(){return this._gain}},y_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Ke(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},w_=(n,e)=>t=>e(n,t),b_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},T_=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},C_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},S_=n=>e=>n.get(e),Ve=()=>new DOMException("","InvalidStateError"),k_=n=>e=>{const t=n.get(e);if(t===void 0)throw Ve();return t},A_=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},x_=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},lo=()=>new DOMException("","InvalidAccessError"),O_=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw lo();return e.call(n,t,s,r)})(n.getFrequencyResponse)},E_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},I_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...E_,...c},d=e(l,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f),O_(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Ah=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=t[0]*l[f];for(let m=1;m<r;m+=1){const g=d-m&c-1;p+=t[m]*i[g],p-=n[m]*o[g]}for(let m=r;m<s;m+=1)p+=t[m]*i[d-m&c-1];for(let m=r;m<e;m+=1)p-=n[m]*o[d-m&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},N_=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),g=d.getChannelData(p);u.fill(0),h.fill(0),Ah(r,o,i,a,c,u,h,0,l,m,g)}return d},R_=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=e(u);const p=Ke(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const v=await r(g);return N_(v,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},P_=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const d of h)if(Wr(d)){const f=s(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},D_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},M_=(n,e)=>t=>n.has(t)||e(t),F_=(n,e)=>t=>n.has(t)||e(t),j_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},L_=n=>e=>n!==null&&e instanceof n,$_=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,V_=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,U_=(n,e)=>t=>n(t)||e(t),q_=n=>e=>n!==null&&e instanceof n,B_=n=>n!==null&&n.isSecureContext,W_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},H_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},z_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...H_,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},G_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},K_=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},J_=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,ao.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},wr=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Y_=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},ke=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},je=(n,e)=>{ke(n,e,"channelCount"),ke(n,e,"channelCountMode"),ke(n,e,"channelInterpretation")},Cl=n=>typeof n.getFloatTimeDomainData=="function",Z_=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},X_=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(je(r,s),!(s.maxDecibels>s.minDecibels))throw e();return ke(r,s,"fftSize"),ke(r,s,"maxDecibels"),ke(r,s,"minDecibels"),ke(r,s,"smoothingTimeConstant"),n(Cl,()=>Cl(r))||Z_(r),r},Q_=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ae=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},e0=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw Ve();e.call(n,s,r,i),t=!0}})(n.start)},Ya=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Za=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},t0=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return je(f,d),Ae(f,d,"playbackRate"),ke(f,d,"buffer"),ke(f,d,"loop"),ke(f,d,"loopEnd"),ke(f,d,"loopStart"),e(t,()=>t(h))||e0(f),e(s,()=>s(h))||c(f),e(r,()=>r(h))||l(f,h),e(i,()=>i(h))||Ya(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||Za(f),n(h,f),f},n0=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,s0=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},r0=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,i0=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},o0=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=d.get(m[1]);v!==void 0?m[1]=v:(m[1]=S=>{S.type==="error"?(Object.defineProperties(S,{type:{value:"processorerror"}}),g(S)):g(new ErrorEvent(m[0],{...S}))},d.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return i0(u),e(i,o,l,u)},xh=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),a0=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),c0=async(n,e)=>{const t=await a0(e);return new n(t)},l0=(n,e,t,s)=>{let r=fa.get(n);r===void 0&&(r=new WeakMap,fa.set(n,r));const i=c0(t,s);return r.set(e,i),i},u0=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(b=>b<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const S=g.channelCount*g.numberOfInputs,I=v.reduce((b,E)=>b+E,0),A=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(S+A>6||I>6)throw c();const _=new MessageChannel,x=[],w=[];for(let b=0;b<g.numberOfInputs;b+=1)x.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),w.push(r(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const C=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:b,maxValue:E,minValue:P,name:D}of m.parameterDescriptors){const M=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[D]!==void 0?g.parameterData[D]:b===void 0?0:b});Object.defineProperties(M.offset,{defaultValue:{get:()=>b===void 0?0:b},maxValue:{get:()=>E===void 0?Qe:E},minValue:{get:()=>P===void 0?at:P}}),C.push(M)}const O=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,S+A)}),N=xh(p,f.sampleRate),R=a(f,N,S+A,Math.max(1,I)),k=r(f,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),L=[];for(let b=0;b<g.numberOfOutputs;b+=1)L.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[b]}));for(let b=0;b<g.numberOfInputs;b+=1){x[b].connect(w[b]);for(let E=0;E<g.channelCount;E+=1)w[b].connect(O,E,b*g.channelCount+E)}const $=new Sh(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:b},E)=>{const P=C[E];return P.connect(O,0,S+E),P.start(0),[b,P.offset]}));O.connect(R);let H=g.channelInterpretation,U=null;const q=g.numberOfOutputs===0?[R]:L,z={get bufferSize(){return N},get channelCount(){return g.channelCount},set channelCount(b){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(b){throw t()},get channelInterpretation(){return H},set channelInterpretation(b){for(const E of x)E.channelInterpretation=b;H=b},get context(){return R.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(b){typeof U=="function"&&z.removeEventListener("processorerror",U),U=typeof b=="function"?b:null,typeof U=="function"&&z.addEventListener("processorerror",U)},get parameters(){return $},get port(){return _.port2},addEventListener(...b){return R.addEventListener(b[0],b[1],b[2])},connect:n.bind(null,q),disconnect:l.bind(null,q),dispatchEvent(...b){return R.dispatchEvent(b[0])},removeEventListener(...b){return R.removeEventListener(b[0],b[1],b[2])}},G=new Map;_.port1.addEventListener=(b=>(...E)=>{if(E[0]==="message"){const P=typeof E[1]=="function"?E[1]:typeof E[1]=="object"&&E[1]!==null&&typeof E[1].handleEvent=="function"?E[1].handleEvent:null;if(P!==null){const D=G.get(E[1]);D!==void 0?E[1]=D:(E[1]=M=>{u(f.currentTime,f.sampleRate,()=>P(M))},G.set(P,E[1]))}}return b.call(_.port1,E[0],E[1],E[2])})(_.port1.addEventListener),_.port1.removeEventListener=(b=>(...E)=>{if(E[0]==="message"){const P=G.get(E[1]);P!==void 0&&(G.delete(E[1]),E[1]=P)}return b.call(_.port1,E[0],E[1],E[2])})(_.port1.removeEventListener);let ee=null;Object.defineProperty(_.port1,"onmessage",{get:()=>ee,set:b=>{typeof ee=="function"&&_.port1.removeEventListener("message",ee),ee=typeof b=="function"?b:null,typeof ee=="function"&&(_.port1.addEventListener("message",ee),_.port1.start())}}),m.prototype.port=_.port1;let Z=null;l0(f,z,m,g).then(b=>Z=b);const Be=Di(g.numberOfInputs,g.channelCount),Je=Di(g.numberOfOutputs,v),ie=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((b,{name:E})=>({...b,[E]:new Float32Array(128)}),{});let he=!0;const Pe=()=>{g.numberOfOutputs>0&&R.disconnect(k);for(let b=0,E=0;b<g.numberOfOutputs;b+=1){const P=L[b];for(let D=0;D<v[b];D+=1)k.disconnect(P,E+D,D);E+=v[b]}},K=new Map;R.onaudioprocess=({inputBuffer:b,outputBuffer:E})=>{if(Z!==null){const P=h(z);for(let D=0;D<N;D+=128){for(let M=0;M<g.numberOfInputs;M+=1)for(let F=0;F<g.channelCount;F+=1)Pi(b,Be[M],F,F,D);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:M},F)=>{Pi(b,ie,M,S+F,D)});for(let M=0;M<g.numberOfInputs;M+=1)for(let F=0;F<v[M];F+=1)Je[M][F].byteLength===0&&(Je[M][F]=new Float32Array(128));try{const M=Be.map((V,j)=>{if(P[j].size>0)return K.set(j,N/128),V;const B=K.get(j);return B===void 0?[]:(V.every(J=>J.every(Q=>Q===0))&&(B===1?K.delete(j):K.set(j,B-1)),V)});he=u(f.currentTime+D/f.sampleRate,f.sampleRate,()=>Z.process(M,Je,ie));for(let V=0,j=0;V<g.numberOfOutputs;V+=1){for(let Y=0;Y<v[V];Y+=1)kh(E,Je[V],Y,j+Y,D);j+=v[V]}}catch(M){he=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:M.colno,filename:M.filename,lineno:M.lineno,message:M.message}))}if(!he){for(let M=0;M<g.numberOfInputs;M+=1){x[M].disconnect(w[M]);for(let F=0;F<g.channelCount;F+=1)w[D].disconnect(O,F,M*g.channelCount+F)}if(m.parameterDescriptors!==void 0){const M=m.parameterDescriptors.length;for(let F=0;F<M;F+=1){const V=C[F];V.disconnect(O,0,S+F),V.stop()}}O.disconnect(R),R.onaudioprocess=null,Vt?Pe():qt();break}}}};let Vt=!1;const it=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ut=()=>R.connect(it).connect(f.destination),qt=()=>{R.disconnect(it),it.disconnect()},y=()=>{if(he){qt(),g.numberOfOutputs>0&&R.connect(k);for(let b=0,E=0;b<g.numberOfOutputs;b+=1){const P=L[b];for(let D=0;D<v[b];D+=1)k.connect(P,E+D,D);E+=v[b]}}Vt=!0},T=()=>{he&&(Ut(),Pe()),Vt=!1};return Ut(),d(z,y,T)},Oh=(n,e)=>{const t=n.createBiquadFilter();return je(t,e),Ae(t,e,"Q"),Ae(t,e,"detune"),Ae(t,e,"frequency"),Ae(t,e,"gain"),ke(t,e,"type"),t},h0=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),je(r,s),r},d0=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ve()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Ve()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Ve()}})},Hr=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return je(t,e),d0(t),t},f0=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return je(a,o),Ae(a,o,"offset"),e(s,()=>s(i))||Ya(a),e(r,()=>r(i))||Za(a),n(i,a),a},Ls=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),p0=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(Ls(h,l),d,f)},m0=(n,e)=>(t,s)=>{const r=t.createConvolver();if(je(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),ke(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},Eh=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return je(t,e),Ae(t,e,"delayTime"),t},g0=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(je(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ae(s,t,"attack"),Ae(s,t,"knee"),Ae(s,t,"ratio"),Ae(s,t,"release"),Ae(s,t,"threshold"),s},ht=(n,e)=>{const t=n.createGain();return je(t,e),Ae(t,e,"gain"),t},_0=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return je(r,s),r};function v0(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function y0(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function Sl(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=y0(t,e),t[0]+=n[s];return t}const w0=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=xh(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(d[0]===0)throw e();if(m===0||m>20)throw s();if(f[0]===0)throw e();if(d[0]!==1){for(let C=0;C<m;C+=1)f[C]/=d[0];for(let C=1;C<p;C+=1)d[C]/=d[0]}const v=t(r,h,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=c;const S=32,I=[],A=[],_=[];for(let C=0;C<o;C+=1){I.push(0);const O=new Float32Array(S),N=new Float32Array(S);O.fill(0),N.fill(0),A.push(O),_.push(N)}v.onaudioprocess=C=>{const O=C.inputBuffer,N=C.outputBuffer,R=O.numberOfChannels;for(let k=0;k<R;k+=1){const L=O.getChannelData(k),$=N.getChannelData(k);I[k]=Ah(d,p,f,m,g,A[k],_[k],I[k],S,L,$)}};const x=r.sampleRate/2;return Ls({get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(C){v.channelCount=C},get channelCountMode(){return v.channelCountMode},set channelCountMode(C){v.channelCountMode=C},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(C){v.channelInterpretation=C},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...C){return v.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return v.dispatchEvent(C[0])},getFrequencyResponse(C,O,N){if(C.length!==O.length||O.length!==N.length)throw n();const R=C.length;for(let k=0;k<R;k+=1){const L=-Math.PI*(C[k]/x),$=[Math.cos(L),Math.sin(L)],H=Sl(f,$),U=Sl(d,$),q=v0(H,U);O[k]=Math.sqrt(q[0]*q[0]+q[1]*q[1]),N[k]=Math.atan2(q[1],q[0])}},removeEventListener(...C){return v.removeEventListener(C[0],C[1],C[2])}},v)},b0=(n,e)=>n.createMediaElementSource(e.mediaElement),T0=(n,e)=>{const t=n.createMediaStreamDestination();return je(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},C0=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},S0=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},k0=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,A0=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return je(c,a),Ae(c,a,"detune"),Ae(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):ke(c,a,"type"),e(t,()=>t(o))||Ya(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Za(c),n(o,c),c},x0=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(je(s,t),Ae(s,t,"orientationX"),Ae(s,t,"orientationY"),Ae(s,t,"orientationZ"),Ae(s,t,"positionX"),Ae(s,t,"positionY"),Ae(s,t,"positionZ"),ke(s,t,"coneInnerAngle"),ke(s,t,"coneOuterAngle"),ke(s,t,"coneOuterGain"),ke(s,t,"distanceModel"),ke(s,t,"maxDistance"),ke(s,t,"panningModel"),ke(s,t,"refDistance"),ke(s,t,"rolloffFactor"),s)},O0=(n,e,t,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:S,panningModel:I,positionX:A,positionY:_,positionZ:x,refDistance:w,rolloffFactor:C,...O})=>{const N=u.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw o();je(N,O);const R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=t(u,{...R,channelInterpretation:"speakers",numberOfInputs:6}),L=s(u,{...O,gain:1}),$=s(u,{...R,gain:1}),H=s(u,{...R,gain:0}),U=s(u,{...R,gain:0}),q=s(u,{...R,gain:0}),z=s(u,{...R,gain:0}),G=s(u,{...R,gain:0}),ee=r(u,256,6,1),Z=i(u,{...R,curve:new Float32Array([1,1]),oversample:"none"});let re=[g,v,S],Be=[A,_,x];const Je=new Float32Array(1);ee.onaudioprocess=({inputBuffer:K})=>{const Vt=[c(K,Je,0),c(K,Je,1),c(K,Je,2)];Vt.some((Ut,qt)=>Ut!==re[qt])&&(N.setOrientation(...Vt),re=Vt);const it=[c(K,Je,3),c(K,Je,4),c(K,Je,5)];it.some((Ut,qt)=>Ut!==Be[qt])&&(N.setPosition(...it),Be=it)},Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0});const ie={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(K){if(K>2)throw o();L.channelCount=K,N.channelCount=K},get channelCountMode(){return N.channelCountMode},set channelCountMode(K){if(K==="max")throw o();L.channelCountMode=K,N.channelCountMode=K},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(K){L.channelInterpretation=K,N.channelInterpretation=K},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(K){N.coneInnerAngle=K},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(K){N.coneOuterAngle=K},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(K){if(K<0||K>1)throw e();N.coneOuterGain=K},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(K){N.distanceModel=K},get inputs(){return[L]},get maxDistance(){return N.maxDistance},set maxDistance(K){if(K<0)throw new RangeError;N.maxDistance=K},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return $.gain},get orientationY(){return H.gain},get orientationZ(){return U.gain},get panningModel(){return N.panningModel},set panningModel(K){N.panningModel=K},get positionX(){return q.gain},get positionY(){return z.gain},get positionZ(){return G.gain},get refDistance(){return N.refDistance},set refDistance(K){if(K<0)throw new RangeError;N.refDistance=K},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(K){if(K<0)throw new RangeError;N.rolloffFactor=K},addEventListener(...K){return L.addEventListener(K[0],K[1],K[2])},dispatchEvent(...K){return L.dispatchEvent(K[0])},removeEventListener(...K){return L.removeEventListener(K[0],K[1],K[2])}};h!==ie.coneInnerAngle&&(ie.coneInnerAngle=h),d!==ie.coneOuterAngle&&(ie.coneOuterAngle=d),f!==ie.coneOuterGain&&(ie.coneOuterGain=f),p!==ie.distanceModel&&(ie.distanceModel=p),m!==ie.maxDistance&&(ie.maxDistance=m),g!==ie.orientationX.value&&(ie.orientationX.value=g),v!==ie.orientationY.value&&(ie.orientationY.value=v),S!==ie.orientationZ.value&&(ie.orientationZ.value=S),I!==ie.panningModel&&(ie.panningModel=I),A!==ie.positionX.value&&(ie.positionX.value=A),_!==ie.positionY.value&&(ie.positionY.value=_),x!==ie.positionZ.value&&(ie.positionZ.value=x),w!==ie.refDistance&&(ie.refDistance=w),C!==ie.rolloffFactor&&(ie.rolloffFactor=C),(re[0]!==1||re[1]!==0||re[2]!==0)&&N.setOrientation(...re),(Be[0]!==0||Be[1]!==0||Be[2]!==0)&&N.setPosition(...Be);const he=()=>{L.connect(N),n(L,Z,0,0),Z.connect($).connect(k,0,0),Z.connect(H).connect(k,0,1),Z.connect(U).connect(k,0,2),Z.connect(q).connect(k,0,3),Z.connect(z).connect(k,0,4),Z.connect(G).connect(k,0,5),k.connect(ee).connect(u.destination)},Pe=()=>{L.disconnect(N),a(L,Z,0,0),Z.disconnect($),$.disconnect(k),Z.disconnect(H),H.disconnect(k),Z.disconnect(U),U.disconnect(k),Z.disconnect(q),q.disconnect(k),Z.disconnect(z),z.disconnect(k),Z.disconnect(G),G.disconnect(k),k.disconnect(ee),ee.disconnect(u.destination)};return l(Ls(ie,N),he,Pe)},E0=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},zr=(n,e,t,s)=>n.createScriptProcessor(e,t,s),I0=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return je(i,s),Ae(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},N0=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,v)=>{const S=new Float32Array(16385),I=new Float32Array(16385);for(let O=0;O<16385;O+=1){const N=O/16384*c;S[O]=Math.cos(N),I[O]=Math.sin(N)}const A=t(p,{...l,gain:0}),_=s(p,{...u,curve:S}),x=s(p,{...u,curve:a}),w=t(p,{...l,gain:0}),C=s(p,{...u,curve:I});return{connectGraph(){m.connect(A),m.connect(x.inputs===void 0?x:x.inputs[0]),m.connect(w),x.connect(g),g.connect(_.inputs===void 0?_:_.inputs[0]),g.connect(C.inputs===void 0?C:C.inputs[0]),_.connect(A.gain),C.connect(w.gain),A.connect(v,0,0),w.connect(v,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(x.inputs===void 0?x:x.inputs[0]),m.disconnect(w),x.disconnect(g),g.disconnect(_.inputs===void 0?_:_.inputs[0]),g.disconnect(C.inputs===void 0?C:C.inputs[0]),_.disconnect(A.gain),C.disconnect(w.gain),A.disconnect(v,0,0),w.disconnect(v,0,1)}}},d=(p,m,g,v)=>{const S=new Float32Array(16385),I=new Float32Array(16385),A=new Float32Array(16385),_=new Float32Array(16385),x=Math.floor(16385/2);for(let q=0;q<16385;q+=1)if(q>x){const z=(q-x)/(16384-x)*c;S[q]=Math.cos(z),I[q]=Math.sin(z),A[q]=0,_[q]=1}else{const z=q/(16384-x)*c;S[q]=1,I[q]=0,A[q]=Math.cos(z),_[q]=Math.sin(z)}const w=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(p,{...l,gain:0}),O=s(p,{...u,curve:S}),N=t(p,{...l,gain:0}),R=s(p,{...u,curve:I}),k=s(p,{...u,curve:a}),L=t(p,{...l,gain:0}),$=s(p,{...u,curve:A}),H=t(p,{...l,gain:0}),U=s(p,{...u,curve:_});return{connectGraph(){m.connect(w),m.connect(k.inputs===void 0?k:k.inputs[0]),w.connect(C,0),w.connect(N,0),w.connect(L,1),w.connect(H,1),k.connect(g),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect($.inputs===void 0?$:$.inputs[0]),g.connect(U.inputs===void 0?U:U.inputs[0]),O.connect(C.gain),R.connect(N.gain),$.connect(L.gain),U.connect(H.gain),C.connect(v,0,0),L.connect(v,0,0),N.connect(v,0,1),H.connect(v,0,1)},disconnectGraph(){m.disconnect(w),m.disconnect(k.inputs===void 0?k:k.inputs[0]),w.disconnect(C,0),w.disconnect(N,0),w.disconnect(L,1),w.disconnect(H,1),k.disconnect(g),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect($.inputs===void 0?$:$.inputs[0]),g.disconnect(U.inputs===void 0?U:U.inputs[0]),O.disconnect(C.gain),R.disconnect(N.gain),$.disconnect(L.gain),U.disconnect(H.gain),C.disconnect(v,0,0),L.disconnect(v,0,0),N.disconnect(v,0,1),H.disconnect(v,0,1)}}},f=(p,m,g,v,S)=>{if(m===1)return h(p,g,v,S);if(m===2)return d(p,g,v,S);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:v,...S})=>{if(g==="max")throw r();const I=n(p,{...S,channelCount:1,channelCountMode:g,numberOfInputs:2}),A=t(p,{...S,channelCount:m,channelCountMode:g,gain:1}),_=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:x,disconnectGraph:w}=f(p,m,A,_,I);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(k){A.channelCount!==k&&(O&&w(),{connectGraph:x,disconnectGraph:w}=f(p,k,A,_,I),O&&x()),A.channelCount=k},get channelCountMode(){return A.channelCountMode},set channelCountMode(k){if(k==="clamped-max"||k==="max")throw r();A.channelCountMode=k},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(k){A.channelInterpretation=k},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return _.gain},addEventListener(...k){return A.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return A.dispatchEvent(k[0])},removeEventListener(...k){return A.removeEventListener(k[0],k[1],k[2])}};let O=!1;const N=()=>{x(),O=!0},R=()=>{w(),O=!1};return i(Ls(C,I),N,R)}},R0=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);je(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();ke(l,{curve:u},"curve"),ke(l,c,"oversample");let h=null,d=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),d&&(s(g)&&h===null?h=n(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},P0=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();je(l,c),je(u,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1});let m=null,g=!1,v=null;const S={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,l.channelCount=_,f.channelCount=_,u.channelCount=_,p.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,l.channelCountMode=_,f.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,l.channelInterpretation=_,f.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_},get context(){return l.context},get curve(){return v},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)l.curve=_,u.curve=_;else{const x=_.length,w=new Float32Array(x+2-x%2),C=new Float32Array(x+2-x%2);w[0]=_[0],C[0]=-_[x-1];const O=Math.ceil((x+1)/2),N=(x+1)/2-1;for(let R=1;R<O;R+=1){const k=R/O*N,L=Math.floor(k),$=Math.ceil(k);w[R]=L===$?_[L]:(1-(k-L))*_[L]+(1-($-k))*_[$],C[R]=L===$?-_[x-1-L]:-((1-(k-L))*_[x-1-L])-(1-($-k))*_[x-1-$]}w[O]=x%2===1?_[O-1]:(_[O-2]+_[O-1])/2,l.curve=w,u.curve=C}v=_,g&&(s(v)&&m===null?m=n(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(S.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==S.oversample&&(S.oversample=a);const I=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(p).connect(f),g=!0,s(v)&&(m=n(i,h))},A=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(p),p.disconnect(f),g=!1,m!==null&&(m(),m=null)};return r(Ls(S,f),I,A)},rt=()=>new DOMException("","NotSupportedError"),D0={numberOfChannels:1},M0=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...D0,...l},f=s(h,u,d);e(wr,()=>wr(f))||f.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wh(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},F0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},j0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...F0,...l},d=t(u,h),f=i(u),p=f?s():null,m=c.sampleRate/2;super(c,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Ns(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),ln(this)&&qr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},L0=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const f=Ke(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},$0={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},V0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...$0,...l},d=t(u,h),f=i(u),p=f?s():null;super(c,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Qe,at),this._orientationY=e(this,f,d.orientationY,Qe,at),this._orientationZ=e(this,f,d.orientationZ,Qe,at),this._positionX=e(this,f,d.positionX,Qe,at),this._positionY=e(this,f,d.positionY,Qe,at),this._positionZ=e(this,f,d.positionZ,Qe,at),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},U0=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let m=null,g=i(f);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},S={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},I=Ke(g,p);if("bufferSize"in g)m=s(p,{...v,gain:1});else if(!I){const A={...S,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,A)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const R=new o(6,f.context.length,p.sampleRate),k=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(R.destination),h=(async()=>{const L=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async($,H)=>{const U=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:H===0?1:0});return await a(R,$,U.offset),U}));for(let $=0;$<6;$+=1)L[$].connect(k,0,$),L[$].start(0);return l(R)})()}const A=await h,_=s(p,{...v,gain:1});await c(f,p,_);const x=[];for(let R=0;R<A.numberOfChannels;R+=1)x.push(A.getChannelData(R));let w=[x[0][0],x[1][0],x[2][0]],C=[x[3][0],x[4][0],x[5][0]],O=s(p,{...v,gain:1}),N=r(p,{...S,orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:C[0],positionY:C[1],positionZ:C[2]});_.connect(O).connect(N.inputs[0]),N.connect(m);for(let R=128;R<A.length;R+=128){const k=[x[0][R],x[1][R],x[2][R]],L=[x[3][R],x[4][R],x[5][R]];if(k.some(($,H)=>$!==w[H])||L.some(($,H)=>$!==C[H])){w=k,C=L;const $=R/p.sampleRate;O.gain.setValueAtTime(0,$),O=s(p,{...v,gain:0}),N=r(p,{...S,orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),O.gain.setValueAtTime(1,$),_.connect(O).connect(N.inputs[0]),N.connect(m)}}return m}return I?(await n(p,f.orientationX,g.orientationX),await n(p,f.orientationY,g.orientationY),await n(p,f.orientationZ,g.orientationZ),await n(p,f.positionX,g.positionX),await n(p,f.positionY,g.positionY),await n(p,f.positionZ,g.positionZ)):(await a(p,f.orientationX,g.orientationX),await a(p,f.orientationY,g.orientationY),await a(p,f.orientationZ,g.orientationZ),await a(p,f.positionX,g.positionX),await a(p,f.positionY,g.positionY),await a(p,f.positionZ,g.positionZ)),js(g)?await c(f,p,g.inputs[0]):await c(f,p,g),g};return{render(f,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},q0={disableNormalization:!1},B0=(n,e,t,s)=>class Ih{constructor(i,o){const a=e(i),c=s({...q0,...o}),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Ih.prototype||t.has(i)}},W0=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),H0=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),f=s.context.destination;!t(l)&&(s!==f||!t(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},z0=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},G0=(n,e,t,s)=>r=>n(wr,()=>wr(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),K0=n=>(e,t)=>{n.set(e,t)},J0=n=>(e,t)=>n.set(e,t),Y0=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Ga(u)):e(i,()=>i(u))||a(u),n.add(u),u)),Z0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},X0=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...Z0,...c},h=t(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},Q0=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Ke(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),js(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ev=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},tv=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},nv=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},sv=()=>new DOMException("","UnknownError"),rv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},iv=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...rv,...l},d=t(u,h),p=i(u)?s():null;super(c,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},ov=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Ke(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),js(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},av=()=>typeof window>"u"?null:window,cv=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},lv=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},uv=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},hv=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Nh=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Rh=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Gr=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},dv=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),fv=n=>({...n,channelCount:n.numberOfOutputs}),pv=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Ph=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Ph(n,e,t+1e-7)}},mv=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},gv=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},_v=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Xa=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Dh=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Qa=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},vv=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},yv=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},Mh=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ls(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},$s=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},wv=Vm(as),bv=zm(as),Tv=r_(co),Fh=new WeakMap,Cv=T_(Fh),jt=Dg(new Map,new WeakMap),Kt=av(),jh=X_(jt,Yt),ec=b_(nt),qe=H0(nt,ec,Qn),Sv=Zm(jh,Te,qe),be=k_(ao),dn=k0(Kt),me=q_(dn),Lh=new WeakMap,$h=p_($s),Kr=n0(Kt),tc=L_(Kr),nc=$_(Kt),Vh=V_(Kt),br=r0(Kt),Re=Tg(Um(fh),Hm(wv,bv,Ii,Tv,Ni,nt,Cv,Ur,Te,as,ln,Qn,mi),jt,P_(ha,Ni,nt,Te,yr,ln),Yt,lo,rt,e_(Ii,ha,nt,Te,yr,be,ln,me),a_(Lh,nt,Ft),$h,be,tc,nc,Vh,me,br),kv=Ym(Re,Sv,Yt,jh,be,me),sc=new WeakSet,kl=Q_(Kt),Uh=Gg(new Uint32Array(1)),rc=cv(Uh,Yt),ic=lv(Uh),Av=Qm(sc,jt,rt,kl,dn,ev(kl),rc,ic),uo=Gm(ht),qh=z0(ec,Br,Qn),Zt=Ug(qh),Vs=t0(uo,jt,mv,gv,_v,Xa,Dh,Qa,yv,uv(Gr),Mh),Xt=W0(C_(Br),qh),xv=ng(Zt,Vs,Te,Xt,qe),Lt=Cg(qm(ph),Lh,za,Sg,Dm,Mm,Fm,jm,Lm,ca,hh,Kr,Ph),Ov=tg(Re,xv,Lt,Ve,Vs,be,me,$s),Ev=hg(Re,dg,Yt,Ve,s0(ht,Gr),be,me,qe),Iv=Pg(Zt,Oh,Te,Xt,qe),cs=J0(Fh),Nv=Rg(Re,Lt,Iv,lo,Oh,be,me,cs),jn=Y_(as,nc),Rv=hv(Ve,jn),Ln=h0(Kr,Rv),Pv=jg(Ln,Te,qe),Dv=Fg(Re,Pv,Ln,be,me),Mv=Vg(Hr,Te,qe),Fv=$g(Re,Mv,Hr,be,me,fv),jv=p0(uo,Vs,ht,jn),Us=f0(uo,jt,jv,Xa,Qa),Lv=zg(Zt,Us,Te,Xt,qe),$v=Hg(Re,Lt,Lv,Us,be,me,$s),Bh=m0(rt,Gr),Vv=Yg(Bh,Te,qe),Uv=Jg(Re,Vv,Bh,be,me,cs),qv=s_(Zt,Eh,Te,Xt,qe),Bv=n_(Re,Lt,qv,Eh,be,me,cs),Wh=g0(rt),Wv=h_(Zt,Wh,Te,Xt,qe),Hv=u_(Re,Lt,Wv,Wh,rt,be,me,cs),zv=y_(Zt,ht,Te,Xt,qe),Gv=v_(Re,Lt,zv,ht,be,me),Kv=w0(lo,Ve,zr,rt),ho=G0(jt,ht,zr,nv(ht,dn)),Jv=R_(Vs,Te,dn,qe,ho),Yv=_0(Kv),Zv=I_(Re,Yv,Jv,be,me,cs),Xv=fg(Lt,Ln,Us,zr,rt,Nh,me,Gr),Hh=new WeakMap,Qv=J_(Ev,Xv,$h,me,Hh,$s),zh=A0(uo,jt,Xa,Dh,Qa,Mh),ey=L0(Zt,zh,Te,Xt,qe),ty=j0(Re,Lt,zh,ey,be,me,$s),Gh=Bg(Vs),ny=P0(Gh,Ve,ht,Rh,jn),fo=R0(Gh,Ve,ny,Rh,jn,Kr,Gr),sy=O0(Ii,Ve,Ln,ht,zr,fo,rt,Ni,Nh,jn),Kh=x0(sy),ry=U0(Zt,Ln,Us,ht,Kh,Te,dn,Xt,qe,ho),iy=V0(Re,Lt,Kh,ry,be,me,cs),oy=E0(Yt),ay=B0(oy,be,new WeakSet,pv),cy=N0(Ln,Hr,ht,fo,rt,jn),Jh=I0(cy,rt),ly=Q0(Zt,Jh,Te,Xt,qe),uy=X0(Re,Lt,Jh,ly,be,me),hy=ov(fo,Te,qe),dy=iv(Re,Ve,fo,hy,be,me,cs),Yh=B_(Kt),oc=m_(Kt),Zh=new WeakMap,fy=A_(Zh,dn),py=Yh?Wm(jt,rt,f_(Kt),oc,g_($m),be,fy,me,br,new WeakMap,new WeakMap,tv(br,dn),Kt):void 0,my=U_(tc,me),gy=Qg(sc,jt,Xg,d_,new WeakSet,be,my,Oi,wr,rc,ic),Xh=Ig(py,kv,Av,Ov,Nv,Dv,Fv,$v,Uv,gy,Bv,Hv,Gv,Zv,Qv,ty,iy,ay,uy,dy),_y=W_(Re,b0,be,me),vy=z_(Re,T0,be,me),yy=G_(Re,C0,be,me),wy=S0(Ve,me),by=K_(Re,wy,be),Ty=ug(Xh,Ve,rt,sv,_y,vy,yy,by,Kr),ac=x_(Hh),Cy=Km(ac),Qh=qg(Yt),Sy=i_(ac),ed=c_(Yt),td=new WeakMap,ky=w_(td,Ft),Ay=u0(Qh,Yt,Ve,Ln,Hr,Us,ht,zr,rt,ed,oc,ky,jn),xy=o0(Ve,Ay,ht,rt,jn),Oy=Eg(Zt,Qh,Vs,Ln,Hr,Us,ht,Sy,ed,oc,Te,br,dn,Xt,qe,ho),Ey=S_(Zh),Iy=K0(td),Al=Yh?Ag(Cy,Re,Lt,Oy,xy,nt,Ey,be,me,br,dv,Iy,vv,$s):void 0,Ny=Zg(rt,dn),Ry=Y0(sc,jt,ec,ac,ho,Oi,rc,ic),Py=M0(Xh,jt,Ve,Ny,Ry),Dy=D_(ao,tc),My=M_(Ha,nc),Fy=F_(za,Vh),jy=j_(ao,me);function se(n,e){if(!n)throw new Error(e)}function Rn(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function nd(n){!n.isOffline&&n.state!=="running"&&rd('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let sd=console;function Ly(...n){sd.log(...n)}function rd(...n){sd.warn(...n)}function At(n){return typeof n>"u"}function ae(n){return!At(n)}function $y(n){return typeof n=="function"}function es(n){return typeof n=="number"}function Yn(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Vy(n){return typeof n=="boolean"}function Dt(n){return Array.isArray(n)}function Jt(n){return typeof n=="string"}function oi(n){return Jt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Uy(n){return new Ty(n)}function qy(n,e,t){return new Py(n,e,t)}const Zn=typeof self=="object"?self:null,By=Zn&&(Zn.hasOwnProperty("AudioContext")||Zn.hasOwnProperty("webkitAudioContext"));function Wy(n,e,t){return se(ae(Al),"This node only works in a secure context (https or localhost)"),new Al(n,e,t)}function $t(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function De(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}class Hy{constructor(e,t,s){this._callback=e,this._type=t,this._updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ts(n){return Fy(n)}function En(n){return My(n)}function gi(n){return jy(n)}function ys(n){return Dy(n)}function id(n){return n instanceof AudioBuffer}function zy(n,e){return n==="value"||ts(e)||En(e)||id(e)}function As(n,...e){if(!e.length)return n;const t=e.shift();if(Yn(n)&&Yn(t))for(const s in t)zy(s,t[s])?n[s]=t[s]:Yn(t[s])?(n[s]||Object.assign(n,{[s]:{}}),As(n[s],t[s])):Object.assign(n,{[s]:t[s]});return As(n,...e)}function Gy(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function W(n,e,t=[],s){const r={},i=Array.from(e);if(Yn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(As(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&Yn(i[0]))As(r,i[0]);else for(let o=0;o<t.length;o++)ae(i[o])&&(r[t[o]]=i[o]);return As(n,r)}function Ky(n){return n.constructor.getDefaults()}function xs(n,e){return At(n)?e:n}function xl(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class fn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Zn&&this.toString()===Zn.TONE_DEBUG_CLASS)&&Ly(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}fn.version=uh;const cc=1e-6;function Mi(n,e){return n>e+cc}function ga(n,e){return Mi(n,e)||It(n,e)}function od(n,e){return n+cc<e}function It(n,e){return Math.abs(n-e)<cc}function Jy(n,e,t){return Math.max(Math.min(n,t),e)}class Qt extends fn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=W(Qt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(se(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];se(ga(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(It(this._timeline[t].time,e)){for(let s=t;s>=0&&It(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&ga(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(It(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(It(u[t],e))o=l;else break}return o}else{if(od(a[t],e)&&Mi(c[t],e))return o;Mi(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&It(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&It(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const ad=[];function po(n){ad.push(n)}function Yy(n){ad.forEach(e=>e(n))}const cd=[];function mo(n){cd.push(n)}function Zy(n){cd.forEach(e=>e(n))}class Jr extends fn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{At(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(At(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(At(t))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Jr.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class ld extends Jr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Yr extends ld{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Qt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=W(Yr.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=Uy({latencyHint:e.latencyHint}),this._ticker=new Hy(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Yy(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return se(ys(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return se(ys(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return se(ys(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){se(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){se(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){se(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){se(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return Wy(this.rawContext,e,t)}addAudioWorkletModule(e,t){return De(this,void 0,void 0,function*(){se(ae(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return De(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,Jt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return ys(this._context)?this._context.resume():Promise.resolve()}close(){return De(this,void 0,void 0,function*(){ys(this._context)&&(yield this._context.close()),this._initialized&&Zy(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class Xy extends ld{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return De(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Oe(n,e){Dt(e)?e.forEach(t=>Oe(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function ud(n,e){Dt(e)?e.forEach(t=>ud(n,t)):Object.defineProperty(n,e,{writable:!0})}const ge=()=>{};class ye extends fn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ge;const e=W(ye.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&id(e.url)||e.url instanceof ye?this.set(e.url):Jt(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:ge,onload:ge,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ct().sampleRate}set(e){return e instanceof ye?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return De(this,void 0,void 0,function*(){const t=ye.load(e).then(s=>{this.set(s),this.onload(this)});ye.downloads.push(t);try{yield t}finally{const s=ye.downloads.indexOf(t);ye.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Dt(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=Ct(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(es(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(es(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);se(s<r,"The start time must be less than the end time");const i=r-s,o=Ct().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ye(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ye().fromArray(e)}static fromUrl(e){return De(this,void 0,void 0,function*(){return yield new ye().load(e)})}static load(e){return De(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const a=t[1].split("|");let c=a[0];for(const l of a)if(ye.supportsType(l)){c=l;break}e=e.replace(t[0],c)}const s=ye.baseUrl===""||ye.baseUrl.endsWith("/")?ye.baseUrl:ye.baseUrl+"/",r=yield fetch(s+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const i=yield r.arrayBuffer();return yield Ct().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return De(this,void 0,void 0,function*(){for(yield Promise.resolve();ye.downloads.length;)yield ye.downloads[0]})}}ye.baseUrl="";ye.downloads=[];class lc extends Yr{constructor(){super({clockSource:"offline",context:gi(arguments[0])?arguments[0]:qy(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:gi(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=gi(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return De(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return De(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new ye(t)})}close(){return Promise.resolve()}}const hd=new Xy;let ar=hd;function Ct(){return ar===hd&&By&&Qy(new Yr),ar}function Qy(n){ys(n)?ar=new Yr(n):gi(n)?ar=new lc(n):ar=n}if(Zn&&!Zn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${uh} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function e1(n){return Math.pow(10,n/20)}function t1(n){return 20*(Math.log(n)/Math.LN10)}function dd(n){return Math.pow(2,n/12)}let go=440;function n1(){return go}function s1(n){go=n}function _a(n){return Math.round(fd(n))}function fd(n){return 69+12*Math.log2(n/go)}function r1(n){return go*Math.pow(2,(n-69)/12)}class uc extends fn{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof uc&&this.fromType(this._val),At(this._val))return this._noArg();if(Jt(this._val)&&At(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Yn(this._val)){let e=0;for(const t in this._val)if(ae(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(ae(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Jt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Nt extends uc{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Nt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new Nt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Nt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return _a(this.toFrequency())}_now(){return this.context.now()}}class St extends Nt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return n1()}static set A4(e){s1(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:St.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=i1[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:St.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new St(this.context,this.valueOf()*dd(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return _a(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/St.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),o1[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return r1(e)}static ftom(e){return _a(e)}}const i1={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},o1=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class cr extends Nt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ut extends fn{constructor(){super();const e=W(ut.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Ct()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Nt(this.context,e).toSeconds()}toFrequency(e){return new St(this.context,e).toFrequency()}toTicks(e){return new cr(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{At(e[s])&&delete t[s]}),t}get(){const e=Ky(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];ae(s)&&ae(s.value)&&ae(s.setValueAtTime)?e[t]=s.value:s instanceof ut?e[t]=s._getPartialProperties(e[t]):Dt(s)||es(s)||Jt(s)||Vy(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ae(this[t])&&(this[t]&&ae(this[t].value)&&ae(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof ut?this[t].set(e[t]):this[t]=e[t])}),this}}class hc extends Qt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Rn(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Se extends ut{constructor(){super(W(Se.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=W(Se.getDefaults(),arguments,["param","units","convert"]);for(se(ae(e.param)&&(ts(e.param)||e.param instanceof Se),"param must be an AudioParam");!ts(e.param);)e.param=e.param._param;this._swappable=ae(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Qt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ae(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ut.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ae(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ae(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ae(this.maxValue)&&ae(this.minValue)&&Rn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?e1(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?t1(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return se(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return se(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=It(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return se(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);se(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),se(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return se(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));se(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&It(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){se(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class oe extends ut{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ae(this.input)?ts(this.input)||this.input instanceof Se?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ae(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ae(e)&&(e instanceof oe||En(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();se(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return qs(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return rd("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return a1(this,e,t,s),this}chain(...e){return va(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ae(this.input)&&(this.input instanceof oe?this.input.dispose():En(this.input)&&this.input.disconnect()),ae(this.output)&&(this.output instanceof oe?this.output.dispose():En(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function va(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof oe?t.connect(s):En(t)&&qs(t,s),s),e)}function qs(n,e,t=0,s=0){for(se(ae(n),"Cannot connect from undefined node"),se(ae(e),"Cannot connect to undefined node"),(e instanceof oe||En(e))&&se(e.numberOfInputs>0,"Cannot connect to node with no inputs"),se(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof oe||e instanceof Se;)ae(e.input)&&(e=e.input);for(;n instanceof oe;)ae(n.output)&&(n=n.output);ts(e)?n.connect(e,t):n.connect(e,t,s)}function a1(n,e,t=0,s=0){if(ae(e))for(;e instanceof oe;)e=e.input;for(;!En(n);)ae(n.output)&&(n=n.output);ts(e)?n.disconnect(e,t):En(e)?n.disconnect(e,t,s):n.disconnect()}class st extends oe{constructor(){super(W(st.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=W(st.getDefaults(),arguments,["gain","units"]);this.gain=new Se({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Oe(this,"gain")}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Rs extends oe{constructor(e){super(e),this.onended=ge,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new st({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(oe.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ge})}_startGain(e,t=1){se(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){se(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ge&&(this.onended(this),this.onended=ge,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),se(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Fi extends Rs{constructor(){super(W(Fi.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=W(Fi.getDefaults(),arguments,["offset"]);qs(this._source,this._gainNode),this.offset=new Se({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Rs.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Le extends oe{constructor(){super(W(Le.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=W(Le.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Fi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return dc(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function dc(n,e,t,s){(e instanceof Se||ts(e)||e instanceof Le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Le&&(e.overridden=!0)),qs(n,e,t,s)}class ji extends Se{constructor(){super(W(ji.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Qt(1/0),this._multiplier=1;const e=W(ji.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Se.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(At(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Li extends Le{constructor(){super(W(Li.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=W(Li.getDefaults(),arguments,["value"]);this.input=this._param=new ji({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class $i extends ut{constructor(){super(W($i.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new hc,this._tickOffset=new Qt;const e=W($i.getDefaults(),arguments,["frequency"]);this.frequency=new Li({context:this.context,units:e.units,value:e.frequency}),Oe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ut.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ae(t)&&this.setTicksAtTime(t,s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,t+this.sampleTime,a=>{let c=i.time;const l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(o=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let r=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=It(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Tr extends ut{constructor(){super(W(Tr.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ge,this._lastUpdate=0,this._state=new hc("stopped"),this._boundLoop=this._loop.bind(this);const e=W(Tr.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new $i({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Oe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ut.getDefaults(),{callback:ge,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){nd(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Jr.mixin(Tr);class fc extends fn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=W(fc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ge,onload:ge,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return se(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=ge,r=ge){return Jt(t)?this._buffers.set(e.toString(),new ye(this.baseUrl+t,s,r)):this._buffers.set(e.toString(),new ye(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class cn extends cr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class c1 extends ut{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Qt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}po(n=>{n.draw=new c1({context:n})});mo(n=>{n.draw.dispose()});class l1 extends fn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){se(ae(e.time),"Events must have a time property"),se(ae(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new u1(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class u1{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ns extends oe{constructor(){super(W(ns.getDefaults(),arguments,["volume"])),this.name="Volume";const e=W(ns.getDefaults(),arguments,["volume"]);this.input=this.output=new st({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Oe(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Vi extends oe{constructor(){super(W(Vi.getDefaults(),arguments)),this.name="Destination",this.input=new ns({context:this.context}),this.output=new st({context:this.context}),this.volume=this.input.volume;const e=W(Vi.getDefaults(),arguments);va(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),va(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}po(n=>{n.destination=new Vi({context:n})});mo(n=>{n.destination.dispose()});class h1 extends fn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Qt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Pn{constructor(e,t){this.id=Pn._eventId++;const s=Object.assign(Pn.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:ge,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Pn._eventId=0;class pc extends Pn{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(pc.getDefaults(),t);this.duration=new cn(e.context,s.duration).valueOf(),this._interval=new cn(e.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Pn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new cn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new cn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new cn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Cr extends ut{constructor(){super(W(Cr.getDefaults(),arguments)),this.name="Transport",this._loop=new h1(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Qt,this._repeatedEvents=new l1,this._syncedSignals=[],this._swingAmount=0;const e=W(Cr.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Tr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Oe(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ut.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new cn(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,s=>s.invoke(e))}schedule(e,t){const s=new Pn(this,{callback:e,time:new cr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new pc(this,{callback:e,duration:new Nt(this.context,r).toTicks(),interval:new Nt(this.context,t).toTicks(),time:new cr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Pn(this,{callback:e,once:!0,time:new cr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new cn(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let s;return ae(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Dt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Nt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Nt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new cn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new cn(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const s=new st(t);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ud(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Jr.mixin(Cr);po(n=>{n.transport=new Cr({context:n})});mo(n=>{n.transport.dispose()});class yt extends oe{constructor(e){super(e),this.input=void 0,this._state=new hc("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ge,this._syncedStop=ge,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ns({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Oe(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,onstop:ge,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=At(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")se(Mi(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(xs(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else nd(this.context),this._start(r,t,s);return this}stop(e){let t=At(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ae(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ge,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Sr extends Rs{constructor(){super(W(Sr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=W(Sr.getDefaults(),arguments,["url","onload"]);qs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Se({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ye(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Rs.getDefaults(),{url:new ye,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){se(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=xs(t,this.loopStart):t=xs(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;ga(o,a)&&(o=(o-c)%l+c),It(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,od(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ae(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ls(n,e){return De(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new lc(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Ui extends Rs{constructor(){super(W(Ui.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=W(Ui.getDefaults(),arguments,["frequency","type"]);qs(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Se({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Se({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Oe(this,["frequency","detune"])}static getDefaults(){return Object.assign(Rs.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ie extends yt{constructor(){super(W(Ie.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=W(Ie.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),Oe(this,"frequency"),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Oe(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new Ui({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ie._periodicWaveCache.find(t=>t.phase===this._phase&&Gy(t.partials,this._partials));{const e=Ie._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(ae(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ie._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ie._periodicWaveCache.length>100&&Ie._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Rn(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return Jy(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ie._periodicWaveCache=[];class _o extends oe{constructor(){super(Object.assign(W(_o.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return dc(this,e,t,s),this}}class kr extends _o{constructor(){super(Object.assign(W(kr.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=W(kr.getDefaults(),arguments,["mapping","length"]);Dt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):$y(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Le.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));se(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class d1 extends _o{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new kr({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ss extends Le{constructor(){super(Object.assign(W(ss.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=W(ss.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new st({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ar extends yt{constructor(){super(W(Ar.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new d1({context:this.context}),this._modulationNode=new st({context:this.context});const e=W(Ar.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ie({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ss({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Oe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class xr extends yt{constructor(){super(W(xr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new st({context:this.context,gain:0});const e=W(xr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ie({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ie({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ss({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ss({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Oe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ps extends yt{constructor(){super(W(Ps.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new st({context:this.context,gain:0}),this._thresh=new kr({context:this.context,mapping:t=>t<=0?-1:1});const e=W(Ps.getDefaults(),arguments,["frequency","width"]);this.width=new Le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Oe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Or extends yt{constructor(){super(W(Or.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=W(Or.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Oe(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Rn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Ie({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ge});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Er extends yt{constructor(){super(W(Er.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ss({context:this.context,value:2});const e=W(Er.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ps({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Oe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ol={am:Ar,fat:Or,fm:xr,oscillator:Ie,pulse:Ps,pwm:Er};class Ir extends yt{constructor(){super(W(Ir.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=W(Ir.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Oe(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ie.getDefaults(),xr.getDefaults(),Ar.getDefaults(),Or.getDefaults(),Ps.getDefaults(),Er.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Ol[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Ol[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&es(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&es(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Jt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return De(this,void 0,void 0,function*(){return ls(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function pd(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Rn(i,n,e),t.set(this,i)}})}}function pn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Rn(this.toSeconds(i),n,e),t.set(this,i)}})}}class Nr extends yt{constructor(){super(W(Nr.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=W(Nr.getDefaults(),arguments,["url","onload"]);this._buffer=new ye({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(yt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1,reverse:!1})}load(e){return De(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ge){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=xs(t,this._loopStart):t=xs(t,0);const r=this.toSeconds(t),i=s;s=xs(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Sr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&At(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){this._stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Rn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Rn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$t([pn(0)],Nr.prototype,"fadeIn",void 0);$t([pn(0)],Nr.prototype,"fadeOut",void 0);class un extends oe{constructor(){super(W(un.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=W(un.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(oe.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Jt(e))return e;{let s;for(s in ai)if(ai[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Jt(s)&&Reflect.has(ai,s)){const r=ai[s];Yn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Dt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){se(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(se(Dt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return dc(this,e,t,s),this}asArray(e=1024){return De(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new lc(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$t([pn(0)],un.prototype,"attack",void 0);$t([pn(0)],un.prototype,"decay",void 0);$t([pd(0,1)],un.prototype,"sustain",void 0);$t([pn(0)],un.prototype,"release",void 0);const ai=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class rs extends oe{constructor(){super(W(rs.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=W(rs.getDefaults(),arguments);this._volume=this.output=new ns({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Oe(this,"volume")}static getDefaults(){return Object.assign(oe.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class is extends rs{constructor(){super(W(is.getDefaults(),arguments));const e=W(is.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(rs.getDefaults(),{detune:0,onsilence:ge,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof St?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}$t([pn(0)],is.prototype,"portamento",void 0);class mc extends un{constructor(){super(W(mc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new st({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Rr extends is{constructor(){super(W(Rr.getDefaults(),arguments)),this.name="Synth";const e=W(Rr.getDefaults(),arguments);this.oscillator=new Ir(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new mc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Oe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(is.getDefaults(),{envelope:Object.assign(xl(un.getDefaults(),Object.keys(oe.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(xl(Ir.getDefaults(),[...Object.keys(yt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Pr extends Rr{constructor(){super(W(Pr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=W(Pr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Oe(this,["oscillator","envelope"])}static getDefaults(){return As(is.getDefaults(),Rr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof St?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$t([pd(0)],Pr.prototype,"octaves",void 0);$t([pn(0)],Pr.prototype,"pitchDecay",void 0);const md=new Set;function gc(n){md.add(n)}function gd(n,e){const t=`registerProcessor("${n}", ${e})`;md.add(t)}const f1=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;gc(f1);const p1=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;gc(p1);const m1=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;gc(m1);const g1="feedback-comb-filter",_1=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;gd(g1,_1);class Ds extends rs{constructor(){super(W(Ds.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=W(Ds.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(se(oi(s)||es(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),oi(s)){const i=new St(this.context,s).toMidi();t[i]=e.urls[s]}else es(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new fc({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(rs.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ge,onerror:ge,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=fd(new St(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=dd(c+a),d=new Sr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,s),Dt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new St(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Dt(t)?(se(Dt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(se(oi(e)||isFinite(e),`note must be a pitch or midi: ${e}`),oi(e)){const r=new St(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}$t([pn(0)],Ds.prototype,"attack",void 0);$t([pn(0)],Ds.prototype,"release",void 0);class qi extends oe{constructor(){super(Object.assign(W(qi.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=W(qi.getDefaults(),arguments,["pan"]);this.pan=new Se({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Oe(this,"pan")}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const v1="bit-crusher",y1=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;gd(v1,y1);class Ee extends oe{constructor(){super(W(Ee.getDefaults(),arguments,["solo"])),this.name="Solo";const e=W(Ee.getDefaults(),arguments,["solo"]);this.input=this.output=new st({context:this.context}),Ee._allSolos.has(this.context)||Ee._allSolos.set(this.context,new Set),Ee._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(oe.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ee._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ee._soloed.has(this.context)||Ee._soloed.set(this.context,new Set),Ee._soloed.get(this.context).add(this)}_removeSolo(){Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).delete(this)}_isSoloed(){return Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).has(this)}_noSolos(){return!Ee._soloed.has(this.context)||Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ee._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ee._allSolos=new Map;Ee._soloed=new Map;class Bi extends oe{constructor(){super(W(Bi.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=W(Bi.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new qi({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ns({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Oe(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Gn extends oe{constructor(){super(W(Gn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=W(Gn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ee({solo:e.solo,context:this.context}),this._panVol=this.output=new Bi({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Oe(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Gn.buses.has(e)||Gn.buses.set(e,new st({context:this.context})),Gn.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new st({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Gn.buses=new Map;class w1 extends oe{constructor(){super(...arguments),this.name="Listener",this.positionX=new Se({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Se({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Se({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Se({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Se({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Se({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Se({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Se({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Se({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(oe.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}po(n=>{n.listener=new w1({context:n})});mo(n=>{n.listener.dispose()});function Zs(){return Ct().now()}Ct().transport;Ct().destination;Ct().destination;Ct().listener;Ct().draw;Ct();const ya=new Ds({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination(),b1={class:"keys"},T1=["data-key","onMousedown","onMouseup","onMouseleave"],C1=$r({__name:"ThePiano",props:{isRecording:{type:Boolean}},emits:["update:record"],setup(n,{emit:e}){const t=n,s=e,r={z:"c2",s:"c#2",x:"d2",d:"d#2",c:"e2",v:"f2",g:"f#2",b:"g2",h:"g#2",n:"a2",j:"a#2",m:"b2",q:"c3",2:"c#3",w:"d3",3:"d#3",e:"e3",r:"f3",5:"f#3",t:"g3",6:"g#3",y:"a3",7:"a#3",u:"b3"},i=et(new Set),o=et([]);document.addEventListener("keydown",l=>{if(!(l.key in r))return;const u=r[l.key];u&&!i.value.has(u)&&a(u)}),document.addEventListener("keyup",l=>{if(!(l.key in r))return;const u=r[l.key];u&&i.value.has(u)&&c(u)});function a(l){if(i.value.add(l),ya.triggerAttack(l),!t.isRecording)return;const u=o.value.length!==0,h=u?o.value[0].timeStamp:0;o.value.push({id:`${l}-${Date.now()}`,name:l,duration:Zs(),timeStamp:Zs(),startTime:u?Zs()-h:h})}function c(l){if(ya.triggerRelease(l),i.value.delete(l),!t.isRecording)return;const u=o.value.slice().reverse().find(d=>d.name===l),h=o.value.find(d=>d.id===(u==null?void 0:u.id));!h||(h.duration=Zs()-h.duration)}return ks(()=>t.isRecording,l=>{l?o.value=[]:s("update:record",o.value)}),(l,u)=>(Tt(),On("div",b1,[(Tt(!0),On(bt,null,Fu(jr(Im),(h,d)=>(Tt(),On("div",{key:d,class:Fr([h.type===0?"keys__white-key":"keys__black-key",i.value.has(h.name)?h.type===0?"keys__white-key--active":"keys__black-key--active":""]),"data-key":h.name==="c3"?"c3":"",onMousedown:f=>a(h.name),onMouseup:f=>c(h.name),onMouseleave:f=>c(h.name)},null,42,T1))),128))]))}});const vo=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},S1=vo(C1,[["__scopeId","data-v-356434f5"]]),k1="modulepreload",A1=function(n){return"/pengUIn/"+n},El={},Ms=function(e,t,s){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=A1(i),i in El)return;El[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":k1,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},x1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ms(()=>Promise.resolve().then(()=>Bs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class _c extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class O1 extends _c{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class E1 extends _c{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class I1 extends _c{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wa;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(wa||(wa={}));var N1=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class R1{constructor(e,{headers:t={},customFetch:s,region:r=wa.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=x1(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return N1(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:l}).catch(p=>{throw new O1(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new E1(u);if(!u.ok)throw new I1(u);let d=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="text/event-stream"?f=u:d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var ct={},vc={},yo={},Zr={},wo={},bo={},D1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fs=D1();const M1=Fs.fetch,_d=Fs.fetch.bind(Fs),vd=Fs.Headers,F1=Fs.Request,j1=Fs.Response,Bs=Object.freeze(Object.defineProperty({__proto__:null,fetch:M1,default:_d,Headers:vd,Request:F1,Response:j1},Symbol.toStringTag,{value:"Module"})),L1=P1(Bs);var To={};Object.defineProperty(To,"__esModule",{value:!0});class $1 extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}To.default=$1;var yd=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bo,"__esModule",{value:!0});const V1=yd(L1),U1=yd(To);class q1{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=V1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,h=null,d=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{l=JSON.parse(m),Array.isArray(l)&&i.status===404&&(u=[],l=null,d=200,f="OK")}catch{i.status===404&&m===""?(d=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&((c=l==null?void 0:l.details)===null||c===void 0?void 0:c.includes("0 rows"))&&(l=null,d=200,f="OK"),l&&this.shouldThrowOnError)throw new U1.default(l)}return{error:l,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}bo.default=q1;var B1=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wo,"__esModule",{value:!0});const W1=B1(bo);class H1 extends W1.default{select(e){let t=!1;const s=(e!=null?e:"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}wo.default=H1;var z1=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zr,"__esModule",{value:!0});const G1=z1(wo);class K1 extends G1.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}Zr.default=K1;var J1=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yo,"__esModule",{value:!0});const Ks=J1(Zr);class Y1{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Ks.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ks.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ks.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Ks.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ks.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}yo.default=Y1;var Co={},So={};Object.defineProperty(So,"__esModule",{value:!0});So.version=void 0;So.version="0.0.0-automated";Object.defineProperty(Co,"__esModule",{value:!0});Co.DEFAULT_HEADERS=void 0;const Z1=So;Co.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Z1.version}`};var wd=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vc,"__esModule",{value:!0});const X1=wd(yo),Q1=wd(Zr),ew=Co;class yc{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},ew.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new X1.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new yc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",c=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Q1.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}vc.default=yc;var Ws=xt&&xt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const bd=Ws(vc);ct.PostgrestClient=bd.default;const Td=Ws(yo);ct.PostgrestQueryBuilder=Td.default;const Cd=Ws(Zr);ct.PostgrestFilterBuilder=Cd.default;const Sd=Ws(wo);ct.PostgrestTransformBuilder=Sd.default;const kd=Ws(bo);ct.PostgrestBuilder=kd.default;const Ad=Ws(To);ct.PostgrestError=Ad.default;var tw=ct.default={PostgrestClient:bd.default,PostgrestQueryBuilder:Td.default,PostgrestFilterBuilder:Cd.default,PostgrestTransformBuilder:Sd.default,PostgrestBuilder:kd.default,PostgrestError:Ad.default};const{PostgrestClient:nw,PostgrestQueryBuilder:OT,PostgrestFilterBuilder:ET,PostgrestTransformBuilder:IT,PostgrestBuilder:NT,PostgrestError:RT}=tw,sw="2.11.2",rw={"X-Client-Info":`realtime-js/${sw}`},iw="1.0.0",xd=1e4,ow=1e3;var Os;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Os||(Os={}));var gt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(gt||(gt={}));var Et;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Et||(Et={}));var ba;(function(n){n.websocket="websocket"})(ba||(ba={}));var Kn;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Kn||(Kn={}));class aw{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const c=s.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Od{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ve;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ve||(ve={}));const Il=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=cw(o,n,e,r),i),{})},cw=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?Ed(i,o):Ta(o)},Ed=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return dw(e,t)}switch(n){case ve.bool:return lw(e);case ve.float4:case ve.float8:case ve.int2:case ve.int4:case ve.int8:case ve.numeric:case ve.oid:return uw(e);case ve.json:case ve.jsonb:return hw(e);case ve.timestamp:return fw(e);case ve.abstime:case ve.date:case ve.daterange:case ve.int4range:case ve.int8range:case ve.money:case ve.reltime:case ve.text:case ve.time:case ve.timestamptz:case ve.timetz:case ve.tsrange:case ve.tstzrange:return Ta(e);default:return Ta(e)}},Ta=n=>n,lw=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},uw=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},hw=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},dw=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Ed(e,a))}return n},fw=n=>typeof n=="string"?n.replace(" ","T"):n,Id=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Uo{constructor(e,t,s={},r=xd){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nl;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Nl||(Nl={}));class lr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lr.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=lr.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=lr.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const d=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=u.filter(g=>f.indexOf(g.presence_ref)<0),m=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[l]=p),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}s(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,r(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rl;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Rl||(Rl={}));var Pl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Pl||(Pl={}));var rn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(rn||(rn={}));class wc{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Uo(this,Et.join,this.params,this.timeout),this.rejoinTimer=new Od(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Et.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new lr(this),this.broadcastEndpointURL=Id(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(rn.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(rn.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(rn.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let m=0;m<f;m++){const g=d[m],{filter:{event:v,schema:S,table:I,filter:A}}=g,_=u&&u[m];if(_&&_.event===v&&_.schema===S&&_.table===I&&_.filter===A)p.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),e==null||e(rn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(rn.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(rn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=l.body)===null||r===void 0?void 0:r.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Et.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const r=new Uo(this,Et.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Uo(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Et;if(s&&[a,c,l,u].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var p,m,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(m=f.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,m,g,v,S,I;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return A&&((m=t.ids)===null||m===void 0?void 0:m.includes(A))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const A=(S=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return A==="*"||A===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:m,table:g,commit_timestamp:v,type:S,errors:I}=p;d=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:v,eventType:S,new:{},old:{},errors:I}),this._getPayloadRecords(p))}f.callback(d,s)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&wc.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Et.close,{},e)}_onError(e){this._on(Et.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Il(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Il(e.columns,e.old_record)),t}}const pw=()=>{},mw=typeof WebSocket<"u",gw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _w{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=rw,this.params={},this.timeout=xd,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=pw,this.conn=null,this.sendBuffer=[],this.serializer=new aw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ms(()=>Promise.resolve().then(()=>Bs),void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ba.websocket}`,this.httpEndpoint=Id(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Od(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(mw){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new vw(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ms(()=>import("./browser.278a5880.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iw}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return Kn.Connecting;case Os.open:return Kn.Open;case Os.closing:return Kn.Closing;default:return Kn.Closed}}isConnected(){return this.connectionState()===Kn.Open}channel(e,t={config:{}}){const s=new wc(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Et.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ow,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Et.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([gw],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class vw{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Os.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class bc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $e(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class yw extends bc{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ca extends bc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ww=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const Nd=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ms(()=>Promise.resolve().then(()=>Bs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},bw=()=>ww(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ms(()=>Promise.resolve().then(()=>Bs),void 0)).Response:Response}),Sa=n=>{if(Array.isArray(n))return n.map(t=>Sa(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Sa(s)}),e};var us=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const qo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Tw=(n,e,t)=>us(void 0,void 0,void 0,function*(){const s=yield bw();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new yw(qo(r),n.status||500))}).catch(r=>{e(new Ca(qo(r),r))}):e(new Ca(qo(n),n))}),Cw=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function Xr(n,e,t,s,r,i){return us(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Cw(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Tw(c,a,s))})})}function Wi(n,e,t,s){return us(this,void 0,void 0,function*(){return Xr(n,"GET",e,t,s)})}function Sn(n,e,t,s,r){return us(this,void 0,void 0,function*(){return Xr(n,"POST",e,s,r,t)})}function Sw(n,e,t,s,r){return us(this,void 0,void 0,function*(){return Xr(n,"PUT",e,s,r,t)})}function kw(n,e,t,s){return us(this,void 0,void 0,function*(){return Xr(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Rd(n,e,t,s,r){return us(this,void 0,void 0,function*(){return Xr(n,"DELETE",e,s,r,t)})}var ot=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const Aw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xw{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Nd(r)}uploadOrUpdate(e,t,s,r){return ot(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Dl),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if($e(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:Dl.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),d=yield h.json();return h.ok?{data:{path:i,fullPath:d.Key},error:null}:{data:null,error:d}}catch(c){if($e(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Sn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new bc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}update(e,t,s){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ot(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}copy(e,t,s){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Sn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return ot(this,void 0,void 0,function*(){try{const r=yield Sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}download(e,t){return ot(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Wi(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}info(e){return ot(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Wi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Sa(s),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}exists(e){return ot(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield kw(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if($e(s)&&s instanceof Ca){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${l}`)}}}remove(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Rd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}list(e,t,s){return ot(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Aw),t),{prefix:e||""});return{data:yield Sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ow="2.7.1",Ew={"X-Client-Info":`storage-js/${Ow}`};var ps=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class Iw{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Ew),t),this.fetch=Nd(s)}listBuckets(){return ps(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}getBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ps(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return ps(this,void 0,void 0,function*(){try{return{data:yield Sw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield Rd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}}class Nw extends Iw{constructor(e,t={},s){super(e,t,s)}from(e){return new xw(this.url,this.headers,e,this.fetch)}}const Rw="2.47.10";let Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";const Pw={"X-Client-Info":`supabase-js-${Xs}/${Rw}`},Dw={headers:Pw},Mw={schema:"public"},Fw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jw={};var Lw=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};const $w=n=>{let e;return n?e=n:typeof fetch>"u"?e=_d:e=fetch,(...t)=>e(...t)},Vw=()=>typeof Headers>"u"?vd:Headers,Uw=(n,e,t)=>{const s=$w(t),r=Vw();return(i,o)=>Lw(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let l=new r(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:l}))})};var qw=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};function Bw(n){return n.replace(/\/$/,"")}function Ww(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:c,global:l}=e,u={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i),accessToken:()=>qw(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}const Pd="2.67.3",Hw="http://localhost:9999",zw="supabase.auth.token",Gw={"X-Client-Info":`gotrue-js/${Pd}`},Ml=10,ka="X-Supabase-Api-Version",Dd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Kw(n){return Math.round(Date.now()/1e3)+n}function Jw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",Bn={tested:!1,writable:!1},ur=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bn.tested)return Bn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Bn.tested=!0,Bn.writable=!0}catch{Bn.tested=!0,Bn.writable=!1}return Bn.writable};function Yw(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const Md=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ms(()=>Promise.resolve().then(()=>Bs),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Zw=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Fd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ci=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},li=async(n,e)=>{await n.removeItem(e)};function Xw(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,c,l,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),s=o<<2|a>>4,r=(a&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ko{constructor(){this.promise=new ko.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ko.promiseConstructor=Promise;function Fl(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Xw(s))}async function Qw(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function eb(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function tb(n){return("0"+n.toString(16)).substr(-2)}function nb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,tb).join("")}async function sb(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function rb(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ib(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await sb(n);return rb(t)}async function ms(n,e,t=!1){const s=nb();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await Fd(n,`${e}-code-verifier`,r);const i=await ib(s);return[i,s===i?"plain":"s256"]}const ob=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ab(n){const e=n.headers.get(ka);if(!e||!e.match(ob))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Tc extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class cb extends Tc{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function lb(n){return ne(n)&&n.name==="AuthApiError"}class jd extends Tc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class hs extends Tc{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class _n extends hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ub(n){return ne(n)&&n.name==="AuthSessionMissingError"}class Bo extends hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ui extends hs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hi extends hs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hb(n){return ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class jl extends hs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Aa extends hs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Wo(n){return ne(n)&&n.name==="AuthRetryableFetchError"}class Ll extends hs{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var db=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Hn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fb=[502,503,504];async function $l(n){var e;if(!Zw(n))throw new Aa(Hn(n),0);if(fb.includes(n.status))throw new Aa(Hn(n),n.status);let t;try{t=await n.json()}catch(i){throw new jd(Hn(i),i)}let s;const r=ab(n);if(r&&r.getTime()>=Dd["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Ll(Hn(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new _n}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ll(Hn(t),n.status,t.weak_password.reasons);throw new cb(Hn(t),n.status||500,s)}const pb=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function ce(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[ka]||(i[ka]=Dd["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await mb(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function mb(n,e,t,s,r,i){const o=pb(e,s,r,i);let a;try{a=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Aa(Hn(c),0)}if(a.ok||await $l(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await $l(c)}}function vn(n){var e;let t=null;yb(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Kw(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Vl(n){const e=vn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function kn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function gb(n){return{data:n,error:null}}function _b(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=db(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function vb(n){return n}function yb(n){return n.access_token&&n.refresh_token&&n.expires_in}var wb=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class bb{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Md(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:kn})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=wb(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:_b,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:kn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:vb});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);l[`${g}Page`]=m}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(ne(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:kn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:kn})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:kn})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}}const Tb={getItem:n=>ur()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{!ur()||globalThis.localStorage.setItem(n,e)},removeItem:n=>{!ur()||globalThis.localStorage.removeItem(n)}};function Ul(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Cb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const gs={debug:!!(globalThis&&ur()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ld extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sb extends Ld{}async function kb(n,e,t){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Sb(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Cb();const Ab={url:Hw,storageKey:zw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Js=30*1e3,ql=3;async function Bl(n,e,t){return await t()}class Dr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dr.nextInstanceID,Dr.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ab),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new bb({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Md(r.fetch),this.lock=r.lock||Bl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ht()&&((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0?void 0:t.locks)?this.lock=kb:this.lock=Bl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ur()?this.storage=Tb:(this.memoryStorage={},this.storage=Ul(this.memoryStorage)):(this.memoryStorage={},this.storage=Ul(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Yw(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Ht()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),hb(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ne(t)?{error:t}:{error:new jd("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:vn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await ms(this.storage,this.storageKey)),i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:vn})}else if("phone"in e){const{phone:u,password:h,options:d}=e;i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vn})}else throw new ui("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vl})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vl})}else throw new ui("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Bo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await ci(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t!=null?t:"").split("/");try{const{data:i,error:o}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:vn});if(await li(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Bo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r!=null?r:null}),error:o})}catch(i){if(ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:vn}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Bo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await ms(this.storage,this.storageKey));const{error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ui("You must provide either an email or phone number.")}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:vn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ms(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:gb})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new _n;const{error:r}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await ce(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ui("You must provide either an email or phone number and a type")}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ci(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:kn}):await this._useSession(async t=>{var s,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _n}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:kn})})}catch(t){if(ne(t))return ub(t)&&(await this._removeSession(),await li(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new _n;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await ms(this.storage,this.storageKey));const{data:l,error:u}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:kn});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Fl(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _n;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=Fl(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new _n;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ht())throw new hi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new jl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hi("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jl("No code detected.");const{data:S,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new hi("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const f=d-u;f*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:m,error:g}=await this._getUser(i);if(g)throw g;const v={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(s){if(ne(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ci(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(lb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await li(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Jw(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await ms(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Ht()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ne(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await eb(async r=>(r>0&&await Qw(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vn})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Wo(i)&&Date.now()+o-s<Js})}catch(s){if(this._debug(t,"error",s),ne(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ht()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await ci(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+Ml;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ml}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Wo(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new _n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ko;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new _n;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),ne(i)){const o={session:null,error:i};return Wo(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Fd(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await li(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ht()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Js}ms, refresh threshold is ${ql} ticks`),r<=ql&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ld)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ms(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&((r=c==null?void 0:c.totp)===null||r===void 0?void 0:r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}Dr.nextInstanceID=0;const xb=Dr;class Ob extends xb{constructor(e){super(e)}}var Eb=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class Ib{constructor(e,t,s){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Bw(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:Mw,realtime:jw,auth:Object.assign(Object.assign({},Fw),{storageKey:c}),global:Dw},u=Ww(s!=null?s:{},l);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Uw(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new nw(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new R1(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Nw(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Eb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,lock:a,debug:c},l,u){var h;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ob({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(e){return new _w(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Nb=(n,e,t)=>new Ib(n,e,t),Rb="https://xwajagoyuqwubxjydant.supabase.co",Pb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3YWphZ295dXF3dWJ4anlkYW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxNzQ1NDYsImV4cCI6MjA1MTc1MDU0Nn0.d7vcjZnoHqK-7m16QHUjSoruQv0TVqqJoLs6zcELfKU",Ho=Nb(Rb,Pb),$d=Em("recordStore",()=>{const n=et(new Map);async function e(){const{data:r,error:i}=await Ho.from("records").select("*");i?console.error("Error fetching messages:",i):(console.log({data:r}),r.forEach(({id:o,...a})=>n.value.set(o,{title:a.title,description:a.description,record:a.record,position:a.position,createTime:a.create_time})))}async function t(r,i){const{data:o,error:a}=await Ho.from("records").insert([{title:r.title,description:r.description,record:i}]).select();a?console.error("Error saving record:",a):(n.value.set(o[0].id,{title:o[0].title,description:o[0].description,record:o[0].record,position:o[0].position,createTime:o[0].create_time}),console.log("Record saved successfully:",o[0]))}async function s(r,i){const{data:o,error:a}=await Ho.from("records").update({position:i}).eq("id",r).select();a?console.error("Error updating record:",a):(n.value.set(r,{title:o[0].title,description:o[0].description,record:o[0].record,position:o[0].position,createTime:o[0].create_time}),console.log("Record updated successfully:",o[0]))}return{records:n,getAllRecords:e,saveRecord:t,updateRecordPosition:s}});function Db(n){return tu()?(ef(n),!0):!1}const Qr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Mb=Object.prototype.toString,Fb=n=>Mb.call(n)==="[object Object]";function zo(n){return Array.isArray(n)?n:[n]}function jb(n,e={}){if(!xe(n))return yu(n);const t=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const s in n.value)t[s]=Af(()=>({get(){return n.value[s]},set(r){var i;if((i=Fe(e.replaceRef))!=null?i:!0)if(Array.isArray(n.value)){const a=[...n.value];a[s]=r,n.value=a}else{const a={...n.value,[s]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(n.value)),n.value=a}else n.value[s]=r}}));return t}function Lb(n,e,t){return ks(n,e,{...t,immediate:!0})}const Vd=Qr?window:void 0;Qr&&window.document;Qr&&window.navigator;Qr&&window.location;function $b(n){var e;const t=Fe(n);return(e=t==null?void 0:t.$el)!=null?e:t}function _i(...n){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},s=(a,c,l,u)=>(a.addEventListener(c,l,u),()=>a.removeEventListener(c,l,u)),r=Es(()=>{const a=zo(Fe(n[0])).filter(c=>c!=null);return a.every(c=>typeof c!="string")?a:void 0}),i=Lb(()=>{var a,c;return[(c=(a=r.value)==null?void 0:a.map(l=>$b(l)))!=null?c:[Vd].filter(l=>l!=null),zo(Fe(r.value?n[1]:n[0])),zo(jr(r.value?n[2]:n[1])),Fe(r.value?n[3]:n[2])]},([a,c,l,u])=>{if(t(),!(a!=null&&a.length)||!(c!=null&&c.length)||!(l!=null&&l.length))return;const h=Fb(u)?{...u}:u;e.push(...a.flatMap(d=>c.flatMap(f=>l.map(p=>s(d,f,p,h)))))},{flush:"post"}),o=()=>{i(),t()};return Db(t),o}function Vb(n,e={}){var t;const{pointerTypes:s,preventDefault:r,stopPropagation:i,exact:o,onMove:a,onEnd:c,onStart:l,initialValue:u,axis:h="both",draggingElement:d=Vd,containerElement:f,handle:p=n,buttons:m=[0]}=e,g=et((t=Fe(u))!=null?t:{x:0,y:0}),v=et(),S=w=>s?s.includes(w.pointerType):!0,I=w=>{Fe(r)&&w.preventDefault(),Fe(i)&&w.stopPropagation()},A=w=>{var C;if(!Fe(m).includes(w.button)||Fe(e.disabled)||!S(w)||Fe(o)&&w.target!==Fe(n))return;const O=Fe(f),N=(C=O==null?void 0:O.getBoundingClientRect)==null?void 0:C.call(O),R=Fe(n).getBoundingClientRect(),k={x:w.clientX-(O?R.left-N.left+O.scrollLeft:R.left),y:w.clientY-(O?R.top-N.top+O.scrollTop:R.top)};(l==null?void 0:l(k,w))!==!1&&(v.value=k,I(w))},_=w=>{if(Fe(e.disabled)||!S(w)||!v.value)return;const C=Fe(f),O=Fe(n).getBoundingClientRect();let{x:N,y:R}=g.value;(h==="x"||h==="both")&&(N=w.clientX-v.value.x,C&&(N=Math.min(Math.max(0,N),C.scrollWidth-O.width))),(h==="y"||h==="both")&&(R=w.clientY-v.value.y,C&&(R=Math.min(Math.max(0,R),C.scrollHeight-O.height))),g.value={x:N,y:R},a==null||a(g.value,w),I(w)},x=w=>{Fe(e.disabled)||!S(w)||!v.value||(v.value=void 0,c==null||c(g.value,w),I(w))};if(Qr){const w=()=>{var C;return{capture:(C=e.capture)!=null?C:!0,passive:!Fe(r)}};_i(p,"pointerdown",A,w),_i(d,"pointermove",_,w),_i(d,"pointerup",x,w)}return{...jb(g),position:g,isDragging:Es(()=>!!v.value),style:Es(()=>`left:${g.value.x}px;top:${g.value.y}px;`)}}const Ub={style:{opacity:"0.5","overflow-y":"auto"}},qb=$r({__name:"TheSticker",props:{id:{},title:{},description:{},position:{}},emits:["play"],setup(n,{emit:e}){var u;const t=n,s=e,r=Pu("stickerRef"),i=et(!1),{x:o,y:a,style:c}=Vb(r,{initialValue:(u=t.position)!=null?u:{x:0,y:0},onMove:()=>{i.value=!0},onEnd:()=>{setTimeout(()=>{i.value=!1},50)}});_i(r,"mouseup",()=>{l(t.id,{x:o.value,y:a.value}),console.log("mouseup",o.value,a.value)});async function l(h,d){await $d().updateRecordPosition(h,d)}return(h,d)=>(Tt(),On("div",{ref:"stickerRef",class:"sticker",style:Ki(jr(c)),onClick:d[0]||(d[0]=f=>!i.value&&s("play"))},[Ue("div",null,"\u{1F427} "+Ko(h.title),1),Ue("div",Ub,Ko(h.description),1)],4))}});const Bb=vo(qb,[["__scopeId","data-v-bdcd0d7c"]]),Wb={class:"dialog"},Hb=$r({__name:"TheDialog",emits:["submit"],setup(n,{expose:e,emit:t}){const s=et(!1),r=et(""),i=et(""),o=t;e({open:()=>{s.value=!0}});const c=()=>{s.value=!1,l()},l=()=>{r.value="",i.value=""},u=()=>{const h={title:r.value===""?"-":r.value,description:i.value};o("submit",h),c()};return(h,d)=>(Tt(),so(Kp,{name:"fade"},{default:La(()=>[s.value?(Tt(),On("div",{key:0,class:"dialog-overlay",onClick:_m(c,["self"])},[Ue("div",Wb,[d[4]||(d[4]=Ue("h3",{style:{"margin-bottom":"0.5rem","text-align":"center"}},"\u2764\uFE0F \u5B8C\u7F8E\uFF01",-1)),d[5]||(d[5]=Ue("label",{for:"title"},"Title:",-1)),Ec(Ue("input",{"onUpdate:modelValue":d[0]||(d[0]=f=>r.value=f),id:"title",type:"text",placeholder:"Give a cool name",onKeydown:d[1]||(d[1]=f=>f.stopPropagation())},null,544),[[al,r.value]]),d[6]||(d[6]=Ue("label",{for:"description"},"Description:",-1)),Ec(Ue("textarea",{"onUpdate:modelValue":d[2]||(d[2]=f=>i.value=f),id:"description",placeholder:"Say something about it",onKeydown:d[3]||(d[3]=f=>f.stopPropagation())},null,544),[[al,i.value]]),Ue("div",{class:"button-group"},[Ue("button",{onClick:u,class:"submit-btn"},"Submit"),Ue("button",{onClick:c,class:"cancel-btn"},"Cancel")])])])):Np("",!0)]),_:1}))}});const zb=vo(Hb,[["__scopeId","data-v-ddb6301c"]]),Gb={style:{margin:"auto"}},Kb={class:"stage"},Jb={class:"penguin"},Yb=["fill"],Zb=$r({__name:"MainStage",setup(n){const e=et(!1),t=$d(),s=Es(()=>t.records),r=et(),i=Pu("penguin"),o=et(0);$a(()=>{t.getAllRecords()});function a(){e.value?l():c()}function c(){e.value=!0,o.value=0}function l(){if(e.value=!1,!i.value)return;const p=window.getComputedStyle(i.value),m=new DOMMatrix(p.transform);o.value=m.m42,i.value.style.transform=`translateY(${o.value}px)`,requestAnimationFrame(()=>{!i.value||(i.value.style.transform="translateY(0)")})}function u(p){var m;r.value=p,(m=d.value)==null||m.open()}function h(p){const m=p==null?void 0:p.record;if(!!m)for(const g of m)ya.triggerAttackRelease(g.name,g.duration,Zs()+g.startTime)}const d=et();async function f(p){!r.value||r.value.length<=2||await t.saveRecord(p,r.value)}return(p,m)=>(Tt(),On("div",Gb,[(Tt(!0),On(bt,null,Fu(s.value,([g,v])=>(Tt(),so(Bb,{key:g,id:g,title:v.title,description:v.description,position:v.position,onPlay:S=>h(v)},null,8,["id","title","description","position","onPlay"]))),128)),Ue("div",Kb,[Ue("div",Jb,[(Tt(),On("svg",{ref_key:"penguin",ref:i,class:Fr(e.value?"penguin-jump":""),version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"180",height:"180",viewBox:"0 0 624 624",onClick:a,fill:e.value?"#b33e3e":"#000000"},m[1]||(m[1]=[Ue("path",{d:"M0 0 C12.7884638 3.60345032 25.16543342 6.60434061 38.49853516 7.1159668 C39.26004883 7.14529297 40.0215625 7.17461914 40.80615234 7.20483398 C41.98032715 7.24979004 41.98032715 7.24979004 43.17822266 7.2956543 C65.06034129 8.17093904 65.06034129 8.17093904 73.81103516 15.1784668 C76.49853516 18.1159668 76.49853516 18.1159668 76.49853516 21.1159668 C75.36158203 21.08116211 74.22462891 21.04635742 73.05322266 21.01049805 C51.22147331 20.53517148 34.55052796 26.52007304 17.49853516 40.1159668 C16.65162109 40.76307617 15.80470703 41.41018555 14.93212891 42.0769043 C10.25721283 45.99392868 6.44507127 50.6549729 4.24853516 56.3659668 C4.53615365 59.52977019 5.41480976 60.71690585 7.78369141 62.78393555 C9.03375033 63.75493804 10.29284696 64.71433831 11.55712891 65.66674805 C27.58803947 77.75244318 35.61544013 92.59079345 38.44313049 112.26493835 C38.96632072 116.08709466 39.45202989 119.91368756 39.93603516 123.7409668 C40.36561637 127.05920471 40.80053437 130.37672887 41.23681641 133.6940918 C41.3970932 134.91804153 41.3970932 134.91804153 41.56060791 136.16671753 C42.45863975 142.96238595 43.52036744 149.72573166 44.62353516 156.4909668 C46.93998645 170.9630078 48.26924598 185.51815784 49.49853516 200.1159668 C49.57201172 200.97464355 49.64548828 201.83332031 49.72119141 202.71801758 C50.09135045 207.18256885 50.34170011 211.63903903 50.49853516 216.1159668 C50.5257666 216.80400391 50.55299805 217.49204102 50.58105469 218.20092773 C51.28808745 238.41583925 48.57552634 258.5188374 46.10400391 278.54174805 C45.91760094 280.05365974 45.91760094 280.05365974 45.72743225 281.59611511 C45.53763039 283.1350518 45.53763039 283.1350518 45.34399414 284.70507812 C45.21548065 285.74741608 45.08696716 286.78975403 44.95455933 287.86367798 C44.69188988 289.99279768 44.42864383 292.12184633 44.16482544 294.25082397 C41.92173531 312.44086415 40.21770713 330.64013718 38.87963867 348.91845703 C37.74599553 364.09464753 36.34655454 379.46520586 31.99853516 394.1159668 C31.75063232 394.95861084 31.50272949 395.80125488 31.24731445 396.66943359 C25.99929218 413.77678332 19.74553853 430.67492768 8.81103516 444.97924805 C4.92978841 450.07070249 4.92978841 450.07070249 3.49853516 456.1159668 C4.25521484 456.65995117 5.01189453 457.20393555 5.79150391 457.7644043 C9.22156825 460.74405615 10.28985045 463.55068492 11.81103516 467.7409668 C12.07464844 468.4215918 12.33826172 469.1022168 12.60986328 469.8034668 C14.49853516 474.76797573 14.49853516 474.76797573 14.49853516 477.1159668 C13.50853516 477.4459668 12.51853516 477.7759668 11.49853516 478.1159668 C11.49853516 480.7559668 11.49853516 483.3959668 11.49853516 486.1159668 C10.23009766 485.48368164 10.23009766 485.48368164 8.93603516 484.83862305 C2.70647778 481.83003 -2.55142681 479.38851731 -9.50146484 479.1159668 C-10.16146484 481.4259668 -10.82146484 483.7359668 -11.50146484 486.1159668 C-16.11619475 485.19302082 -18.27410573 483.45884003 -21.31396484 480.0534668 C-24.70802744 476.54478294 -26.83444783 475.06583043 -31.72802734 474.9284668 C-42.78305456 475.61908956 -42.78305456 475.61908956 -53.50146484 478.1159668 C-53.50146484 478.7759668 -53.50146484 479.4359668 -53.50146484 480.1159668 C-52.80021484 480.38022461 -52.09896484 480.64448242 -51.37646484 480.91674805 C-41.2946226 485.1220817 -34.27634718 489.43961501 -30.06787109 499.56518555 C-26.26731687 509.41352287 -26.26731687 509.41352287 -27.50146484 513.1159668 C-28.38898438 512.50108398 -28.38898438 512.50108398 -29.29443359 511.8737793 C-30.47972656 511.06553711 -30.47972656 511.06553711 -31.68896484 510.2409668 C-32.85492188 509.44045898 -32.85492188 509.44045898 -34.04443359 508.6237793 C-38.52203491 505.87599852 -42.20799616 504.54058977 -47.50146484 505.1159668 C-49.87637783 506.83792317 -50.45814404 507.95588832 -51.23193359 510.81518555 C-51.38275391 511.80131836 -51.53357422 512.78745117 -51.68896484 513.8034668 C-51.84751953 514.79733398 -52.00607422 515.79120117 -52.16943359 516.81518555 C-52.27900391 517.57444336 -52.38857422 518.33370117 -52.50146484 519.1159668 C-53.16146484 519.1159668 -53.82146484 519.1159668 -54.50146484 519.1159668 C-54.99517578 518.18913086 -55.48888672 517.26229492 -55.99755859 516.30737305 C-56.64459983 515.09768725 -57.29174039 513.88805458 -57.93896484 512.6784668 C-58.26445312 512.06680664 -58.58994141 511.45514648 -58.92529297 510.82495117 C-60.43861627 507.77880474 -60.43861627 507.77880474 -62.50146484 505.1159668 C-64.06965446 505.06515542 -65.64008024 505.08051068 -67.20849609 505.1237793 C-83.07299983 505.43755093 -95.47179717 505.20411967 -108.50146484 495.1159668 C-109.73768579 493.91485152 -110.94895081 492.6871887 -112.12646484 491.4284668 C-117.54246433 485.78575105 -123.595883 484.22800236 -131.10302734 482.82739258 C-148.19288845 479.62304362 -161.00440793 471.85025716 -174.50146484 461.1159668 C-175.08250977 460.6627002 -175.66355469 460.20943359 -176.26220703 459.74243164 C-177.71500473 458.58163863 -179.11380558 457.35389383 -180.50146484 456.1159668 C-180.50146484 455.4559668 -180.50146484 454.7959668 -180.50146484 454.1159668 C-179.7108667 454.04079834 -178.92026855 453.96562988 -178.10571289 453.88818359 C-174.46577058 453.53644569 -170.82744084 453.17005009 -167.18896484 452.8034668 C-165.94566406 452.68551758 -164.70236328 452.56756836 -163.42138672 452.44604492 C-150.33079572 451.38701057 -150.33079572 451.38701057 -138.68896484 445.9909668 C-136.85753826 441.55698664 -137.84226647 438.40574879 -139.50146484 434.1159668 C-144.22415284 423.41519273 -150.19151171 415.33194631 -158.50146484 407.1159668 C-159.10345703 406.51268555 -159.70544922 405.9094043 -160.32568359 405.2878418 C-160.71369141 404.90112305 -161.10169922 404.5144043 -161.50146484 404.1159668 C-162.01708984 404.7759668 -162.53271484 405.4359668 -163.06396484 406.1159668 C-166.3014224 408.77234222 -168.42698766 408.42938812 -172.50146484 408.1159668 C-173.7693529 405.58019069 -173.46713103 404.15962533 -173.24755859 401.3347168 C-172.05676115 378.76875698 -176.98460073 357.78332227 -181.68676758 335.82606506 C-183.41829316 327.68263666 -184.88497199 319.54556713 -186.06396484 311.3034668 C-186.20737305 310.31781738 -186.35078125 309.33216797 -186.49853516 308.31665039 C-186.8732248 305.58601579 -187.20169207 302.85579083 -187.50146484 300.1159668 C-187.64962646 298.78432495 -187.64962646 298.78432495 -187.80078125 297.42578125 C-190.47873122 268.83640594 -190.86168879 237.37464963 -185.50146484 209.1159668 C-185.31825684 208.08987305 -185.13504883 207.0637793 -184.94628906 206.0065918 C-181.55529422 187.70233552 -175.81379625 170.09984139 -170.06396484 152.4284668 C-169.52349518 150.7607724 -169.52349518 150.7607724 -168.97210693 149.05938721 C-165.40349709 138.10026105 -161.72437032 127.22038639 -157.27099609 116.5847168 C-156.96335831 115.8496138 -156.65572052 115.1145108 -156.33876038 114.35713196 C-148.09065575 95.24142346 -135.14535329 78.83230069 -121.98095703 62.90698242 C-119.99781848 60.50627212 -118.03140221 58.09205167 -116.06396484 55.6784668 C-113.43202662 52.46488477 -110.79434184 49.25608027 -108.15380859 46.04956055 C-107.55721436 45.32502686 -106.96062012 44.60049316 -106.34594727 43.85400391 C-105.1193187 42.36565128 -103.89162154 40.87817868 -102.6628418 39.39160156 C-100.06618971 36.24754524 -97.47541107 33.10255371 -94.95458984 29.8972168 C-69.45264659 -2.29672575 -38.85444223 -11.01980938 0 0 Z M-85.99365234 29.54174805 C-89.62512962 33.69968208 -91.28267853 37.11042555 -91.87646484 42.5534668 C-91.42007041 46.88921392 -90.34057659 48.82857425 -87.50146484 52.1159668 C-82.83387871 54.90123769 -78.40222973 55.93053282 -73.12646484 56.8034668 C-72.39041016 56.93301758 -71.65435547 57.06256836 -70.89599609 57.19604492 C-69.09926647 57.51105596 -67.30054921 57.81469495 -65.50146484 58.1159668 C-65.50146484 62.1159668 -65.50146484 62.1159668 -67.54833984 64.5534668 C-68.88638672 65.8219043 -68.88638672 65.8219043 -70.25146484 67.1159668 C-71.13318359 67.9615918 -72.01490234 68.8072168 -72.92333984 69.6784668 C-73.77412109 70.4828418 -74.62490234 71.2872168 -75.50146484 72.1159668 C-76.17951172 72.82495117 -76.85755859 73.53393555 -77.55615234 74.2644043 C-79.55061679 76.16274997 -81.49323803 77.3779283 -83.87646484 78.7409668 C-96.9632465 87.3439167 -100.55522255 107.75861023 -105.31396484 121.9284668 C-105.57569489 122.70576141 -105.83742493 123.48305603 -106.10708618 124.28390503 C-110.01817527 135.96252782 -113.33400505 147.67570002 -116.1557312 159.66107178 C-118.3936335 169.1591848 -121.14138514 178.34443736 -124.37646484 187.5534668 C-128.82783621 200.37549276 -130.59346604 211.88005786 -130.56005859 225.40893555 C-130.55901123 226.18400452 -130.55796387 226.95907349 -130.55688477 227.75762939 C-130.52784663 235.7937322 -130.30833465 243.82254721 -130.07339478 251.85479736 C-127.12027767 354.95203719 -127.12027767 354.95203719 -152.25146484 392.26831055 C-154.43668655 395.69686261 -155.28877964 397.98256413 -154.50146484 402.1159668 C-153.07142214 404.55390261 -153.07142214 404.55390261 -151.00146484 406.7409668 C-147.88175525 410.39893615 -145.11605171 414.0799577 -142.50146484 418.1159668 C-136.68019478 427.00226707 -130.31737697 435.11784142 -122.12646484 441.9284668 C-119.48927939 444.13938305 -117.31200218 446.45993184 -115.12646484 449.1159668 C-101.85492304 464.49224651 -80.39497283 467.34904413 -61.31787109 468.79174805 C-38.7685232 470.21780825 -22.39509556 463.97541584 -5.50146484 449.1159668 C9.62181413 435.63166387 16.73451167 419.29073473 22.83789062 400.41186523 C23.61675005 398.01187453 24.41444173 395.61871175 25.21337891 393.2253418 C31.02791586 375.54790696 32.97550119 358.48789895 34.14874268 339.95327759 C35.66965206 316.10498069 37.90229987 292.39630937 40.64306641 268.6608429 C42.86757902 249.42878091 42.86757902 249.42878091 44.12353516 230.1159668 C44.16075684 229.23626221 44.19797852 228.35655762 44.23632812 227.45019531 C44.49495077 220.99952686 44.68093491 214.57133217 44.49853516 208.1159668 C44.48064941 207.42277344 44.46276367 206.72958008 44.44433594 206.01538086 C44.17975292 196.80325693 43.58036793 187.70379241 42.22509766 178.5847168 C42.09500809 177.69438248 41.96491852 176.80404816 41.83088684 175.88673401 C40.27269733 165.37397314 38.54593281 154.88919975 36.7565918 144.41357422 C36.37607459 142.17264209 36.00107659 139.93076583 35.6315918 137.68798828 C29.93152584 98.99816377 29.93152584 98.99816377 9.31494141 67.3659668 C4.69821894 64.38415706 0.71927031 63.03089365 -4.78662109 62.6862793 C-5.86266602 62.61473633 -6.93871094 62.54319336 -8.04736328 62.46948242 C-9.2078418 62.39407227 -10.36832031 62.31866211 -11.56396484 62.2409668 C-21.31791337 61.56101037 -31.03595833 60.71941509 -40.75146484 59.6159668 C-42.36420288 59.43831787 -42.36420288 59.43831787 -44.00952148 59.25708008 C-49.37008189 58.62873288 -54.36907072 57.79776826 -59.50146484 56.1159668 C-59.69773875 54.53369715 -59.88312022 52.95007409 -60.06396484 51.3659668 C-60.22058594 50.04338867 -60.22058594 50.04338867 -60.38037109 48.6940918 C-60.49764688 46.19725254 -60.19623773 44.49100603 -59.50146484 42.1159668 C-59.01948336 37.7781334 -59.11524712 35.73889861 -61.43896484 31.9909668 C-64.77904313 28.44094074 -69.00166545 25.93520591 -73.50146484 24.1159668 C-78.71758081 24.1159668 -82.28162463 25.99491528 -85.99365234 29.54174805 Z ",transform:"translate(383.50146484375,53.884033203125)"},null,-1)]),10,Yb))]),tt(S1,{"is-recording":e.value,"onUpdate:record":m[0]||(m[0]=g=>u(g))},null,8,["is-recording"])]),tt(zb,{style:{"z-index":"12"},ref_key:"dialog",ref:d,onSubmit:f},{default:La(()=>m[2]||(m[2]=[Ue("h2",null,"Enter information",-1)])),_:1},512)]))}});const Xb=vo(Zb,[["__scopeId","data-v-bc39526f"]]),Qb=$r({__name:"App",setup(n){return(e,t)=>(Tt(),so(Xb))}});const Ud=wm(Qb);Ud.use(Sm());Ud.mount("#app");
